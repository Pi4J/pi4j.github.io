<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.142.0"><meta name=description content="Java IO Library for the Raspberry Pi"><meta name=author content="Pi4J"><link rel=icon href=/assets/favicon.ico type=image/ico><title>PWM Hardware Support on RPi5 - Pi4J</title>
<link href=/css/nucleus.css?1738069976 rel=stylesheet><link href=/css/fontawesome-all.min.css?1738069976 rel=stylesheet><link href=/css/hybrid.css?1738069976 rel=stylesheet><link href=/css/featherlight.min.css?1738069976 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1738069976 rel=stylesheet><link href=/css/auto-complete.css?1738069976 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1738069976 rel=stylesheet><link href=/css/theme.css?1738069976 rel=stylesheet><link href=/css/hugo-theme.css?1738069976 rel=stylesheet><link href=/css/theme-blue.css?1738069976 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1738069976></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><style>.DocSearch{width:90%}#docsearch-input{border:none;padding-top:15px;margin:0 0 0 10px;padding:0;background:0 0}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3></pre></li></head><body data-url=/blog/2024/20240423_pwm_rpi5/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/assets/pi4j-header.png></a></div><div id=docsearch></div></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/about/ title=About class=dd-item><a href=/about/>About</a><ul><li data-nav-id=/about/previous-version-v1/ title="Previous versions (V.1)" class=dd-item><a href=/about/previous-version-v1/>Previous versions (V.1)</a></li><li data-nav-id=/about/new-in-v2/ title="What's New (V.2)" class=dd-item><a href=/about/new-in-v2/>What's New (V.2)</a></li><li data-nav-id=/about/release-notes/ title="Release Notes" class=dd-item><a href=/about/release-notes/>Release Notes</a></li><li data-nav-id=/about/download/ title="Pi4J Downloads" class=dd-item><a href=/about/download/>Pi4J Downloads</a></li><li data-nav-id=/about/license/ title="License (Open Source)" class=dd-item><a href=/about/license/>License (Open Source)</a></li><li data-nav-id=/about/team/ title="The Team" class=dd-item><a href=/about/team/>The Team</a></li></ul></li><li data-nav-id=/prepare/ title="Prepare a Raspberry Pi" class=dd-item><a href=/prepare/>Prepare a Raspberry Pi</a><ul><li data-nav-id=/prepare/sd-card/ title="Write OS to SD card" class=dd-item><a href=/prepare/sd-card/>Write OS to SD card</a></li><li data-nav-id=/prepare/first-boot/ title="The First Boot" class=dd-item><a href=/prepare/first-boot/>The First Boot</a></li><li data-nav-id=/prepare/install-java/ title="Install Java and Tools" class=dd-item><a href=/prepare/install-java/>Install Java and Tools</a></li></ul></li><li data-nav-id=/getting-started/ title="Getting Started With Pi4J" class=dd-item><a href=/getting-started/>Getting Started With Pi4J</a><ul><li data-nav-id=/getting-started/understanding-the-pins/ title="Understanding the GPIO pins" class=dd-item><a href=/getting-started/understanding-the-pins/>Understanding the GPIO pins</a></li><li data-nav-id=/getting-started/electrical-engineering/ title="Electrical Engineering" class=dd-item><a href=/getting-started/electrical-engineering/>Electrical Engineering</a></li><li data-nav-id=/getting-started/java-development-on-the-raspberry-pi-with-vsc/ title="Java development with VSC" class=dd-item><a href=/getting-started/java-development-on-the-raspberry-pi-with-vsc/>Java development with VSC</a></li><li data-nav-id=/getting-started/developing-on-a-remote-pc/ title="Developing on a remote PC" class=dd-item><a href=/getting-started/developing-on-a-remote-pc/>Developing on a remote PC</a></li><li data-nav-id=/getting-started/minimal-example-application/ title="Minimal example application" class=dd-item><a href=/getting-started/minimal-example-application/>Minimal example application</a></li><li data-nav-id=/getting-started/minimal-example-application-fatjar/ title="Minimal example as FAT JAR" class=dd-item><a href=/getting-started/minimal-example-application-fatjar/>Minimal example as FAT JAR</a></li><li data-nav-id=/getting-started/user-interface-with-javafx/ title="User interface with JavaFX" class=dd-item><a href=/getting-started/user-interface-with-javafx/>User interface with JavaFX</a></li><li data-nav-id=/getting-started/fxgl/ title="Game development with FXGL" class=dd-item><a href=/getting-started/fxgl/>Game development with FXGL</a><ul><li data-nav-id=/getting-started/fxgl/fxgl-to-picade/ title="FXGl to Picade" class=dd-item><a href=/getting-started/fxgl/fxgl-to-picade/>FXGl to Picade</a></li><li data-nav-id=/getting-started/fxgl/kiosk-mode/ title="JavaFX kiosk mode" class=dd-item><a href=/getting-started/fxgl/kiosk-mode/>JavaFX kiosk mode</a></li></ul></li><li data-nav-id=/getting-started/javafx-mvc-template/ title="JavaFX GUI and MVC template" class=dd-item><a href=/getting-started/javafx-mvc-template/>JavaFX GUI and MVC template</a></li><li data-nav-id=/getting-started/learn-more/ title="Learn more..." class=dd-item><a href=/getting-started/learn-more/>Learn more...</a></li></ul></li><li data-nav-id=/documentation/ title=Documentation class=dd-item><a href=/documentation/>Documentation</a><ul><li data-nav-id=/documentation/pin-numbering/ title="Pin numbering" class=dd-item><a href=/documentation/pin-numbering/>Pin numbering</a></li><li data-nav-id=/documentation/java-for-arm/ title="Java for ARMv6/7/8" class=dd-item><a href=/documentation/java-for-arm/>Java for ARMv6/7/8</a></li><li data-nav-id=/documentation/logging/ title="Logging with SLF4J" class=dd-item><a href=/documentation/logging/>Logging with SLF4J</a></li><li data-nav-id=/documentation/create-context/ title="Creating a Pi4J Context" class=dd-item><a href=/documentation/create-context/>Creating a Pi4J Context</a></li><li data-nav-id=/documentation/platforms/ title="Choosing a Platform" class=dd-item><a href=/documentation/platforms/>Choosing a Platform</a><ul><li data-nav-id=/documentation/platforms/raspberry-pi/ title="Raspberry Pi" class=dd-item><a href=/documentation/platforms/raspberry-pi/>Raspberry Pi</a></li></ul></li><li data-nav-id=/documentation/providers/ title="Choosing an I/O Provider" class=dd-item><a href=/documentation/providers/>Choosing an I/O Provider</a><ul><li data-nav-id=/documentation/providers/gpiod/ title="GpioD Provider" class=dd-item><a href=/documentation/providers/gpiod/>GpioD Provider</a></li><li data-nav-id=/documentation/providers/linuxfs/ title="LinuxFS Provider" class=dd-item><a href=/documentation/providers/linuxfs/>LinuxFS Provider</a></li><li data-nav-id=/documentation/providers/pigpio/ title="PiGpio Provider" class=dd-item><a href=/documentation/providers/pigpio/>PiGpio Provider</a></li></ul></li><li data-nav-id=/documentation/board-info/ title="Using Board Info" class=dd-item><a href=/documentation/board-info/>Using Board Info</a></li><li data-nav-id=/documentation/build-io/ title="Building an I/O Instance" class=dd-item><a href=/documentation/build-io/>Building an I/O Instance</a></li><li data-nav-id=/documentation/io-examples/ title="I/O Examples" class=dd-item><a href=/documentation/io-examples/>I/O Examples</a><ul><li data-nav-id=/documentation/io-examples/digital-output/ title="Digital Output (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-output/>Digital Output (GPIO)</a></li><li data-nav-id=/documentation/io-examples/digital-input/ title="Digital Input (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-input/>Digital Input (GPIO)</a></li><li data-nav-id=/documentation/io-examples/pwm/ title="Pulse Width Modulation (PWM)" class=dd-item><a href=/documentation/io-examples/pwm/>Pulse Width Modulation (PWM)</a></li><li data-nav-id=/documentation/io-examples/i2c/ title="Inter-Integrated Circuit (I²C)" class=dd-item><a href=/documentation/io-examples/i2c/>Inter-Integrated Circuit (I²C)</a><ul><li data-nav-id=/documentation/io-examples/i2c/clock-stretching/ title="I²C Clock Stretching" class=dd-item><a href=/documentation/io-examples/i2c/clock-stretching/>I²C Clock Stretching</a></li></ul></li><li data-nav-id=/documentation/io-examples/spi/ title="Serial Peripheral Interface (SPI)" class=dd-item><a href=/documentation/io-examples/spi/>Serial Peripheral Interface (SPI)</a></li><li data-nav-id=/documentation/io-examples/serial/ title="Serial (UART/RS232)" class=dd-item><a href=/documentation/io-examples/serial/>Serial (UART/RS232)</a></li></ul></li><li data-nav-id=/documentation/registry/ title="I/O Registry" class=dd-item><a href=/documentation/registry/>I/O Registry</a></li><li data-nav-id=/documentation/shutdown/ title="Shutting down the Pi4J Context" class=dd-item><a href=/documentation/shutdown/>Shutting down the Pi4J Context</a></li><li data-nav-id=/documentation/building/ title="Building and running" class=dd-item><a href=/documentation/building/>Building and running</a><ul><li data-nav-id=/documentation/building/javac/ title="Building with javac" class=dd-item><a href=/documentation/building/javac/>Building with javac</a></li><li data-nav-id=/documentation/building/fat-jar/ title="Build as a FAT JAR with Maven" class=dd-item><a href=/documentation/building/fat-jar/>Build as a FAT JAR with Maven</a></li><li data-nav-id=/documentation/building/modules-maven/ title="Build Java modules with Maven" class=dd-item><a href=/documentation/building/modules-maven/>Build Java modules with Maven</a></li><li data-nav-id=/documentation/building/modules-gradle/ title="Build Java modules with Gradle" class=dd-item><a href=/documentation/building/modules-gradle/>Build Java modules with Gradle</a></li><li data-nav-id=/documentation/building/jbang/ title="Running Pi4J with JBang" class=dd-item><a href=/documentation/building/jbang/>Running Pi4J with JBang</a></li></ul></li></ul></li><li data-nav-id=/examples/ title="Example Implementations" class=dd-item><a href=/examples/>Example Implementations</a><ul><li data-nav-id=/examples/jbang/ title="JBang Examples" class=dd-item><a href=/examples/jbang/>JBang Examples</a><ul><li data-nav-id=/examples/jbang/jbang_minimal_example/ title="Minimal Example" class=dd-item><a href=/examples/jbang/jbang_minimal_example/>Minimal Example</a></li><li data-nav-id=/examples/jbang/jbang_pi4j_spi_led_matrix/ title="8x8 LED Matrix" class=dd-item><a href=/examples/jbang/jbang_pi4j_spi_led_matrix/>8x8 LED Matrix</a></li><li data-nav-id=/examples/jbang/bme280_temperature_humidity_pressure/ title="BME280 Sensor" class=dd-item><a href=/examples/jbang/bme280_temperature_humidity_pressure/>BME280 Sensor</a></li><li data-nav-id=/examples/jbang/pixelblaze_output_expander/ title="Pixelblaze Output Expander" class=dd-item><a href=/examples/jbang/pixelblaze_output_expander/>Pixelblaze Output Expander</a></li><li data-nav-id=/examples/jbang/pixelblaze_output_expander_image/ title="Controlling a LED Matrix" class=dd-item><a href=/examples/jbang/pixelblaze_output_expander_image/>Controlling a LED Matrix</a></li><li data-nav-id=/examples/jbang/pixelblaze_output_expander_javafx/ title="LED strip with a JavaFX UI" class=dd-item><a href=/examples/jbang/pixelblaze_output_expander_javafx/>LED strip with a JavaFX UI</a></li></ul></li><li data-nav-id=/examples/components/ title="Component Examples" class=dd-item><a href=/examples/components/>Component Examples</a><ul><li data-nav-id=/examples/components/simplebutton/ title="Simple Button" class=dd-item><a href=/examples/components/simplebutton/>Simple Button</a></li><li data-nav-id=/examples/components/simpleled/ title="Simple LED" class=dd-item><a href=/examples/components/simpleled/>Simple LED</a></li><li data-nav-id=/examples/components/ads1115/ title="AD Converter ADS1115" class=dd-item><a href=/examples/components/ads1115/>AD Converter ADS1115</a></li><li data-nav-id=/examples/components/buzzer/ title=Buzzer class=dd-item><a href=/examples/components/buzzer/>Buzzer</a></li><li data-nav-id=/examples/components/camera/ title=Camera class=dd-item><a href=/examples/components/camera/>Camera</a></li><li data-nav-id=/examples/components/joystick/ title=Joystick class=dd-item><a href=/examples/components/joystick/>Joystick</a></li><li data-nav-id=/examples/components/joystickanalog/ title="Joystick Analog" class=dd-item><a href=/examples/components/joystickanalog/>Joystick Analog</a></li><li data-nav-id=/examples/components/lcddisplay/ title="LCD Display" class=dd-item><a href=/examples/components/lcddisplay/>LCD Display</a></li><li data-nav-id=/examples/components/ledbutton/ title="LED Button" class=dd-item><a href=/examples/components/ledbutton/>LED Button</a></li><li data-nav-id=/examples/components/ledmatrix/ title="LED Matrix" class=dd-item><a href=/examples/components/ledmatrix/>LED Matrix</a></li><li data-nav-id=/examples/components/ledstrip/ title="LED Strip" class=dd-item><a href=/examples/components/ledstrip/>LED Strip</a></li><li data-nav-id=/examples/components/potentiometer/ title=Potentiometer class=dd-item><a href=/examples/components/potentiometer/>Potentiometer</a></li><li data-nav-id=/examples/components/servo/ title=ServoMotor class=dd-item><a href=/examples/components/servo/>ServoMotor</a></li></ul></li><li data-nav-id=/examples/crowpi/ title="Electronics with CrowPi" class=dd-item><a href=/examples/crowpi/>Electronics with CrowPi</a><ul><li data-nav-id=/examples/crowpi/develop-crowpi-with-intellij/ title="Develop with Intellij IDEA" class=dd-item><a href=/examples/crowpi/develop-crowpi-with-intellij/>Develop with Intellij IDEA</a></li><li data-nav-id=/examples/crowpi/crowpi-examples/ title="CrowPi examples" class=dd-item><a href=/examples/crowpi/crowpi-examples/>CrowPi examples</a></li></ul></li><li data-nav-id=/examples/communityimplementation/ title="Community Implementations" class=dd-item><a href=/examples/communityimplementation/>Community Implementations</a><ul><li data-nav-id=/examples/communityimplementation/prototype-board/ title="Prototype Board" class=dd-item><a href=/examples/communityimplementation/prototype-board/>Prototype Board</a></li><li data-nav-id=/examples/communityimplementation/bmp280/ title="BMP280 Sensor" class=dd-item><a href=/examples/communityimplementation/bmp280/>BMP280 Sensor</a></li></ul></li></ul></li><li data-nav-id=/debugging-failures/ title="Debugging Failures" class=dd-item><a href=/debugging-failures/>Debugging Failures</a></li><li data-nav-id=/architecture/ title=Architecture/Design class=dd-item><a href=/architecture/>Architecture/Design</a><ul><li data-nav-id=/architecture/about-the-code/ title="Project source structure" class=dd-item><a href=/architecture/about-the-code/>Project source structure</a><ul><li data-nav-id=/architecture/about-the-code/download-sources/ title=Download/Install class=dd-item><a href=/architecture/about-the-code/download-sources/>Download/Install</a></li><li data-nav-id=/architecture/about-the-code/build-instructions/ title="Build Instructions" class=dd-item><a href=/architecture/about-the-code/build-instructions/>Build Instructions</a></li><li data-nav-id=/architecture/about-the-code/maven-settings/ title="Maven settings" class=dd-item><a href=/architecture/about-the-code/maven-settings/>Maven settings</a></li><li data-nav-id=/architecture/about-the-code/code-styling/ title="Code styling" class=dd-item><a href=/architecture/about-the-code/code-styling/>Code styling</a></li><li data-nav-id=/architecture/about-the-code/hardware-testing/ title="Hardware testing" class=dd-item><a href=/architecture/about-the-code/hardware-testing/>Hardware testing</a></li></ul></li><li data-nav-id=/architecture/advanced/ title=Advanced class=dd-item><a href=/architecture/advanced/>Advanced</a><ul><li data-nav-id=/architecture/advanced/annotated-provisioning/ title="Annotated provisioning" class=dd-item><a href=/architecture/advanced/annotated-provisioning/>Annotated provisioning</a></li><li data-nav-id=/architecture/advanced/dependency-injection/ title="Dependency injection" class=dd-item><a href=/architecture/advanced/dependency-injection/>Dependency injection</a></li><li data-nav-id=/architecture/advanced/library-path/ title="Native Library Path" class=dd-item><a href=/architecture/advanced/library-path/>Native Library Path</a></li><li data-nav-id=/architecture/advanced/plugins/ title=Plug-ins class=dd-item><a href=/architecture/advanced/plugins/>Plug-ins</a></li><li data-nav-id=/architecture/advanced/remote-support/ title="Remote support" class=dd-item><a href=/architecture/advanced/remote-support/>Remote support</a></li></ul></li><li data-nav-id=/architecture/pi4j-logo/ title="The Pi4J Logo" class=dd-item><a href=/architecture/pi4j-logo/>The Pi4J Logo</a></li></ul></li><li data-nav-id=/kotlin/ title="Pi4J Kotlin DSL" class=dd-item><a href=/kotlin/>Pi4J Kotlin DSL</a><ul><li data-nav-id=/kotlin/minimal-kotlin-example/ title="Minimal Kotlin Pi4J example" class=dd-item><a href=/kotlin/minimal-kotlin-example/>Minimal Kotlin Pi4J example</a></li><li data-nav-id=/kotlin/kotlin-api-docs/ title="Kotlin API & DSL Documentation" class=dd-item><a href=/kotlin/kotlin-api-docs/>Kotlin API & DSL Documentation</a></li><li data-nav-id=/kotlin/coroutines/ title="Coroutines Support" class=dd-item><a href=/kotlin/coroutines/>Coroutines Support</a></li><li data-nav-id=/kotlin/i2c/ title="I²C Kotlin DSL" class=dd-item><a href=/kotlin/i2c/>I²C Kotlin DSL</a></li><li data-nav-id=/kotlin/serial/ title="Serial Kotlin DSL" class=dd-item><a href=/kotlin/serial/>Serial Kotlin DSL</a></li></ul></li><li data-nav-id=/blog/ title=Blogs class="dd-item
parent"><a href=/blog/>Blogs</a><ul><li data-nav-id=/blog/2025/20250115-miami-jug/ title="Pi4J presentation for Miami JUG" class=dd-item><a href=/blog/2025/20250115-miami-jug/>Pi4J presentation for Miami JUG</a></li><li data-nav-id=/blog/2024/20241114-floss-weekly-podcast/ title="Pi4J in Floss Weekly" class=dd-item><a href=/blog/2024/20241114-floss-weekly-podcast/>Pi4J in Floss Weekly</a></li><li data-nav-id=/blog/2024/20241104-download-stats/ title="Maven Downloads" class=dd-item><a href=/blog/2024/20241104-download-stats/>Maven Downloads</a></li><li data-nav-id=/blog/2024/20240927-bits-bytes-signed-unsigned/ title="Signed versus unsigned values" class=dd-item><a href=/blog/2024/20240927-bits-bytes-signed-unsigned/>Signed versus unsigned values</a></li><li data-nav-id=/blog/2024/20240517_bosch_sensor_gas_measurement/ title="Bosch sensor gas measurement" class=dd-item><a href=/blog/2024/20240517_bosch_sensor_gas_measurement/>Bosch sensor gas measurement</a></li><li data-nav-id=/blog/2024/20240425_interview_tom_aarts/ title="Interview Tom Aarts" class=dd-item><a href=/blog/2024/20240425_interview_tom_aarts/>Interview Tom Aarts</a></li><li data-nav-id=/blog/2024/20240423_pwm_rpi5/ title="PWM Hardware Support on RPi5" class="dd-item active"><a href=/blog/2024/20240423_pwm_rpi5/>PWM Hardware Support on RPi5</a></li><li data-nav-id=/blog/2024/20240419_interview_robert_von_burg/ title="Interview Robert von Burg" class=dd-item><a href=/blog/2024/20240419_interview_robert_von_burg/>Interview Robert von Burg</a></li><li data-nav-id=/blog/2024/20240418_i2c_improvements/ title="Ongoing I2C Improvements" class=dd-item><a href=/blog/2024/20240418_i2c_improvements/>Ongoing I2C Improvements</a></li><li data-nav-id=/blog/2024/20240417_led_matrix_max7219_spi_web/ title="LED Matrix with SPI MAX7219" class=dd-item><a href=/blog/2024/20240417_led_matrix_max7219_spi_web/>LED Matrix with SPI MAX7219</a></li><li data-nav-id=/blog/2024/20240318_interview_alexander_liggesmeyer/ title="Alexander Liggesmeyer and RPi5" class=dd-item><a href=/blog/2024/20240318_interview_alexander_liggesmeyer/>Alexander Liggesmeyer and RPi5</a></li><li data-nav-id=/blog/2022/20221128_led_strip_with_jbang/ title="LED strip with Pi4J and JBang" class=dd-item><a href=/blog/2022/20221128_led_strip_with_jbang/>LED strip with Pi4J and JBang</a></li><li data-nav-id=/blog/2022/20221117_kotlin_on_raspberrypi/ title="Kotlin on the Raspberry Pi" class=dd-item><a href=/blog/2022/20221117_kotlin_on_raspberrypi/>Kotlin on the Raspberry Pi</a></li><li data-nav-id=/blog/2022/20220113_javafx_pi4j_template/ title="Getting Started Template" class=dd-item><a href=/blog/2022/20220113_javafx_pi4j_template/>Getting Started Template</a></li></ul></li><li data-nav-id=/featured-projects/ title="Featured Projects" class=dd-item><a href=/featured-projects/>Featured Projects</a><ul><li data-nav-id=/featured-projects/binary-clock/ title="Binary Clock" class=dd-item><a href=/featured-projects/binary-clock/>Binary Clock</a></li><li data-nav-id=/featured-projects/soft-real-time-plc-written-in-strolch/ title="Soft real time PLC" class=dd-item><a href=/featured-projects/soft-real-time-plc-written-in-strolch/>Soft real time PLC</a></li><li data-nav-id=/featured-projects/pijukebox-by-daniel-martensson/ title=PiJukeBox class=dd-item><a href=/featured-projects/pijukebox-by-daniel-martensson/>PiJukeBox</a></li><li data-nav-id=/featured-projects/cocktail-maker-by-alex9849/ title=CocktailPi class=dd-item><a href=/featured-projects/cocktail-maker-by-alex9849/>CocktailPi</a></li><li data-nav-id=/featured-projects/street-artist-robot/ title="Didier the street artist robot" class=dd-item><a href=/featured-projects/street-artist-robot/>Didier the street artist robot</a></li><li data-nav-id=/featured-projects/joystick-game/ title="JMonkeyEngine with Joystick" class=dd-item><a href=/featured-projects/joystick-game/>JMonkeyEngine with Joystick</a></li><li data-nav-id=/featured-projects/sensor-drivers/ title="Sensor drivers" class=dd-item><a href=/featured-projects/sensor-drivers/>Sensor drivers</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://pi4j.com/tags target=_blank><i class='fas more-tag fa-tags'></i> Tags</a></li><li><a class=padding href=https://github.com/Pi4J target=_blank><i class='fab more-tag fa-github'></i> GitHub project</a></li><li><a class=padding href=https://foojay.social/@pi4j target=_blank rel=me><i class='fab more-tag fa-mastodon'></i> Mastodon @pi4j@foojay.social</a></li><li><a class=padding href=https://www.linkedin.com/company/pi4j/ target=_blank><i class='fab more-tag fa-linkedin'></i> LinkedIn @pi4j</a></li><li><a class=padding href=https://github.com/Pi4J/pi4j-v2/discussions target=_blank><i class='fab more-tag fa-github'></i> Pi4J V2 Discussions</a></li><li><a class=padding href=https://join.slack.com/t/pi4j/shared_invite/zt-1ttqt8wgj-E6t69qaLrNuCMPLiYnBCsg target=_blank><i class='fab more-tag fa-slack'></i> Join our Slack</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p><p>Visitor counter by <a href=https://clicky.com/101436354 target=_blank rel=noopener>Clicky</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title='Edit this page' href=https://github.com/Pi4J/pi4j.github.io/blob/main/content/blog/2024/20240423_pwm_rpi5.md target=blank><i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Welcome to Pi4J</a> > <a href=/blog/>Blogs</a> > PWM Hardware Support on RPi5</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#what-changes-are-required>What Changes Are Required</a><ul><li><a href=#update-pomxml>Update pom.xml</a></li><li><a href=#modify-configtxt>Modify config.txt</a></li><li><a href=#reboot>Reboot</a></li><li><a href=#modify-the-application>Modify the application</a></li><li><a href=#connect-led>Connect LED</a></li><li><a href=#run-sample-program>Run sample program</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags><div class=tags><a class=tag-link href=/tags/pwm>PWM</a>
<a class=tag-link href=/tags/linuxfs>LinuxFS</a></div></div><div id=body-inner><h1>PWM Hardware Support on RPi5</h1><p>2024-04-23, by Tom Aarts</p><p>The next version of Pi4J (are now already in 2.5.2-SNAPSHOT) will add PWM support via a new provider <code>linuxfs-pwm</code>. The previous PWM PiGpio provider does not support the Raspberry Pi 5 RP1 chip. To use this new provider, changes are required in your <code>pom.xml</code> dependencies and Java code. The details of using this new provider are explained in the Pi4J documentation in <a href=/documentation/io-examples/pwm/>Pulse Width Modulation</a>. In this blog post, I want to provide extra details and an example implementation. This post reference changes when using the Bookworm OS on a Raspberry Pi 5. If you are using the <code>linuxfs-pwm</code> provider on a Raspberry Pi 4, consult the <a href=/documentation/io-examples/pwm/>Pulse Width Modulation</a> for <code>config.sys</code> and channel differences.</p><p>With this new version of Pi4J, additional improvements of the PWM integration are improved, based on this <a href="https://forums.raspberrypi.com/viewtopic.php?t=368751" target=_blank rel=noopener>discussion &ldquo;java.nio.file.AccessDeniedException: /sys/class/pwm/pwmchip0/pwm0/duty_cycle&rdquo; on the Raspberry Pi Forum</a>.</p><h2 id=what-changes-are-required>What Changes Are Required</h2><ol><li>Update pom.xml dependencies to add the <code>linuxfs</code> provider.</li><li>Modify <code>config.txt</code>: after deciding which GPIO you want to present the PWM, the required <code>dtoverlay</code> statement must be added as described below.</li><li>Reboot the Raspberry Pi5 to enable the <code>config.txt</code> modification.</li><li>Modify the java application to use the new provider and set the address.</li><li>Connect LED.</li><li>Run the sample program.</li></ol><h3 id=update-pomxml>Update pom.xml</h3><p>You projects pom.xml requires an additional dependency.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>&lt;</span>dependency<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>groupId<span style=color:#f92672>&gt;</span>com.<span style=color:#a6e22e>pi4j</span><span style=color:#f92672>&lt;/</span>groupId<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>artifactId<span style=color:#f92672>&gt;</span>pi4j<span style=color:#f92672>-</span>plugin<span style=color:#f92672>-</span>linuxfs<span style=color:#f92672>&lt;/</span>artifactId<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span>version<span style=color:#f92672>&gt;</span>${pi4j.<span style=color:#a6e22e>version</span>}<span style=color:#f92672>&lt;/</span>version<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/</span>dependency<span style=color:#f92672>&gt;</span>
</span></span></code></pre></div><h3 id=modify-configtxt>Modify config.txt</h3><div class="notices warning"><p>Modification of this files requires `sudo. In addition, while opening the file to edit OS settings, will display a warning that an error in this file might prevent successful reboot. Consider if you want to backup your system.</p></div><p>These are optional values to place into the file. Only one item should be added. Which one you use
is based upon whether you want one or two GPIOs for PWM, and which GPIO(s) you want to use.</p><p>The selected value <code>dtoverlay</code> must be placed after the [all] statement.</p><ul><li>One active PWM on GPIO 18, this is channel 2, so the address attribute will be 2:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>[all]
</span></span><span style=display:flex><span>dtoverlay=pwm
</span></span></code></pre></div><ul><li>Two active PWMs. First one on GPIO 18, this is channel 2 (= address attribute 2). The other active PWM on GPIO 19, this is channel 3 (= address attribute 3):</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>[all]
</span></span><span style=display:flex><span>dtoverlay=pwm-2chan
</span></span></code></pre></div><ul><li>Two active PWM. First one on GPIO 12, this is channel 0 (= address attribute 0). The other active PWM on GPIO 13, this is channel 1 (= address attribute 1).</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>[all]
</span></span><span style=display:flex><span>dtoverlay=pwm-2chan,pin=12,func=4,pin2=13,func2=4
</span></span></code></pre></div><p>For example, see screenshot on how to edit <code>config.sys</code> to set to a single PWM GPIO18:</p><p><img src=/assets/blogs/pwm/pwm-config-txt.jpg alt></p><h3 id=reboot>Reboot</h3><ul><li>Close your open applications.</li><li>Enter: <code>sudo shutdown -r</code>. This will terminate all remaining applications and reboot.</li></ul><h3 id=modify-the-application>Modify the application</h3><ul><li>Your system is now ready to use the <code>linuxfs-pwm</code> provider.</li><li>Previously the application&rsquo;s `PwmConfigBuilder address was the GPIO number, but now you need to use the channel number as the address parameter.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.pi4j.test.devices.pwmTest;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.pi4j.Pi4J;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.pi4j.context.Context;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.pi4j.io.pwm.Pwm;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.pi4j.io.pwm.PwmType;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.pi4j.util.Console;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Scanner;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>UserTest</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> Pwm pwm <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> Context pi4j;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) <span style=color:#66d9ef>throws</span> Exception {
</span></span><span style=display:flex><span>        pi4j <span style=color:#f92672>=</span> Pi4J.<span style=color:#a6e22e>newAutoContext</span>(); 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> console <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Console();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;----------------------------------------------------------&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;PI4J PROVIDERS&#34;</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;----------------------------------------------------------&#34;</span>);
</span></span><span style=display:flex><span>        pi4j.<span style=color:#a6e22e>providers</span>().<span style=color:#a6e22e>describe</span>().<span style=color:#a6e22e>print</span>(System.<span style=color:#a6e22e>out</span>);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;----------------------------------------------------------&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> address <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> args.<span style=color:#a6e22e>length</span>; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            String o <span style=color:#f92672>=</span> args<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (o.<span style=color:#a6e22e>contentEquals</span>(<span style=color:#e6db74>&#34;-a&#34;</span>)) { <span style=color:#75715e>// pin</span>
</span></span><span style=display:flex><span>                String a <span style=color:#f92672>=</span> args<span style=color:#f92672>[</span>i <span style=color:#f92672>+</span> 1<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>                address <span style=color:#f92672>=</span> Short.<span style=color:#a6e22e>parseShort</span>(a.<span style=color:#a6e22e>substring</span>(0), 10);
</span></span><span style=display:flex><span>                i<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>            } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                console.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;  No valid Parm, -a address &#34;</span>);
</span></span><span style=display:flex><span>                System.<span style=color:#a6e22e>exit</span>(42);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        initGPIO(address);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;linuxfs pin after creation at duty_cycle 50  &#34;</span>);
</span></span><span style=display:flex><span>        waitForInput(console);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        pwm.<span style=color:#a6e22e>on</span>(50, 2);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;linuxfs pin after pin.on  freq 2    &#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        waitForInput(console);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        pwm.<span style=color:#a6e22e>off</span>();
</span></span><span style=display:flex><span>        pwm.<span style=color:#a6e22e>on</span>(50, 10);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;linuxfs pin after pin.on  freq 10  &#34;</span>);
</span></span><span style=display:flex><span>        waitForInput(console);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        pwm.<span style=color:#a6e22e>off</span>();
</span></span><span style=display:flex><span>        pwm.<span style=color:#a6e22e>on</span>(50, 50);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;linuxfs pin after pin.on  freq 50   &#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        waitForInput(console);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        pwm.<span style=color:#a6e22e>off</span>();
</span></span><span style=display:flex><span>        pwm.<span style=color:#a6e22e>on</span>(50, 1);
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;linuxfs pin after pin.on  freq 1&#34;</span>);
</span></span><span style=display:flex><span>        waitForInput(console);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;linuxfs pin call pwm.shutdown &#34;</span>);
</span></span><span style=display:flex><span>        waitForInput(console);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        pwm.<span style=color:#a6e22e>shutdown</span>(pi4j);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;linuxfs pi4j  call pi4j.shutdown &#34;</span>);
</span></span><span style=display:flex><span>        waitForInput(console);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        pi4j.<span style=color:#a6e22e>shutdown</span>();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Wait a bit for shutdown</span>
</span></span><span style=display:flex><span>        Thread.<span style=color:#a6e22e>sleep</span>(2000);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>waitForInput</span>(Console console) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> rval <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>        Scanner scan <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Scanner(System.<span style=color:#a6e22e>in</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        console.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Hit any key to continue&#34;</span>);
</span></span><span style=display:flex><span>        scan.<span style=color:#a6e22e>next</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> (rval);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>initGPIO</span>(<span style=color:#66d9ef>int</span> address) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> configPwm <span style=color:#f92672>=</span> Pwm.<span style=color:#a6e22e>newConfigBuilder</span>(pi4j)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>address</span>(address)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>pwmType</span>(PwmType.<span style=color:#a6e22e>HARDWARE</span>)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>provider</span>(<span style=color:#e6db74>&#34;linuxfs-pwm&#34;</span>)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>initial</span>(50)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>frequency</span>(1)
</span></span><span style=display:flex><span>                .<span style=color:#a6e22e>build</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>            pwm <span style=color:#f92672>=</span> pi4j.<span style=color:#a6e22e>create</span>(configPwm);
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>catch</span> (Exception e) {
</span></span><span style=display:flex><span>            System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Error in initGPIO &#34;</span> <span style=color:#f92672>+</span> e.<span style=color:#a6e22e>getMessage</span>());
</span></span><span style=display:flex><span>            e.<span style=color:#a6e22e>printStackTrace</span>();
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=connect-led>Connect LED</h3><p>Use appropriate Resistor in LED Cathode path. Connect Cathode lead to ground, Anode lead to GPIO18.</p><p><img src=/assets/blogs/pwm/led-connection.jpg alt="LED Connection"></p><p>To calculate the resistor size, you can use this <a href=https://www.digikey.com/en/resources/conversion-calculators/conversion-calculator-led-series-resistor target=_blank rel=noopener>LED Series Resistor Calculator by DigiKey</a>.</p><h3 id=run-sample-program>Run sample program</h3><p>The example program can be called passing the parameter <code>-a</code> for the address, for example, in this configuration <code>-a 2</code>. But the program defaults to address 2. This means no parameter is required with this example when using <code>dtoverlay=pwm</code>.</p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1738069976></script><script src=/js/perfect-scrollbar.min.js?1738069976></script><script src=/js/perfect-scrollbar.jquery.min.js?1738069976></script><script src=/js/jquery.sticky.js?1738069976></script><script src=/js/featherlight.min.js?1738069976></script><script src=/js/highlight.pack.js?1738069976></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1738069976></script><script src=/js/learn.js?1738069976></script><script src=/js/hugo-learn.js?1738069976></script><script src=/mermaid/mermaid.js?1738069976></script><script>mermaid.initialize({startOnLoad:!0})</script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script><script type=text/javascript>docsearch({appId:"QJ0EB8YHN3",apiKey:"8ddde1d36a62d9e2d7c4333239e6a2fc",indexName:"pi4j",container:"#docsearch",debug:!0})</script><script async data-id=101436817 src=//static.getclicky.com/js></script></body></html>