<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.148.2"><meta name=description content="Java IO Library for the Raspberry Pi"><meta name=author content="Pi4J"><link rel=icon href=/assets/favicon.ico type=image/ico><title>Controlling a LED Matrix - Pi4J</title><link href=/css/nucleus.css?1755630386 rel=stylesheet><link href=/css/fontawesome-all.min.css?1755630386 rel=stylesheet><link href=/css/hybrid.css?1755630386 rel=stylesheet><link href=/css/featherlight.min.css?1755630386 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1755630386 rel=stylesheet><link href=/css/auto-complete.css?1755630386 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1755630386 rel=stylesheet><link href=/css/theme.css?1755630386 rel=stylesheet><link href=/css/hugo-theme.css?1755630386 rel=stylesheet><link href=/css/theme-blue.css?1755630386 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1755630386></script><style>:root #header+#content>#left>#rlblock_left{display:none !important}</style><style>.DocSearch{width:90%}#docsearch-input{border:none;padding-top:15px;margin:0 0 0 10px;padding:0;background:0 0}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3></pre></li></head><body data-url=/examples/jbang/pixelblaze_output_expander_image/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/assets/pi4j-header.png></a></div><div id=docsearch></div></div><section id=homelinks><ul><li><a class=padding href=/><i class='fas fa-home'></i> Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/about/ title=About class=dd-item><a href=/about/>About</a><ul><li data-nav-id=/about/info-v1/ title="Info about V1" class=dd-item><a href=/about/info-v1/>Info about V1</a></li><li data-nav-id=/about/info-v2/ title="What's New in V2" class=dd-item><a href=/about/info-v2/>What's New in V2</a></li><li data-nav-id=/about/info-v3/ title="What's New in V3" class=dd-item><a href=/about/info-v3/>What's New in V3</a></li><li data-nav-id=/about/release-notes/ title="Release Notes" class=dd-item><a href=/about/release-notes/>Release Notes</a></li><li data-nav-id=/about/download/ title="Pi4J Downloads" class=dd-item><a href=/about/download/>Pi4J Downloads</a></li><li data-nav-id=/about/license/ title="License (Open Source)" class=dd-item><a href=/about/license/>License (Open Source)</a></li><li data-nav-id=/about/team/ title="The Team" class=dd-item><a href=/about/team/>The Team</a></li></ul></li><li data-nav-id=/prepare/ title="Prepare a Raspberry Pi" class=dd-item><a href=/prepare/>Prepare a Raspberry Pi</a><ul><li data-nav-id=/prepare/sd-card/ title="Write OS to SD card" class=dd-item><a href=/prepare/sd-card/>Write OS to SD card</a></li><li data-nav-id=/prepare/first-boot/ title="The First Boot" class=dd-item><a href=/prepare/first-boot/>The First Boot</a></li><li data-nav-id=/prepare/install-java/ title="Install Java and Tools" class=dd-item><a href=/prepare/install-java/>Install Java and Tools</a></li><li data-nav-id=/prepare/install-vsc-ide/ title="Install Visual Studio Code" class=dd-item><a href=/prepare/install-vsc-ide/>Install Visual Studio Code</a></li></ul></li><li data-nav-id=/getting-started/ title="Getting Started With Pi4J" class=dd-item><a href=/getting-started/>Getting Started With Pi4J</a><ul><li data-nav-id=/getting-started/understanding-the-pins/ title="Understanding the GPIO pins" class=dd-item><a href=/getting-started/understanding-the-pins/>Understanding the GPIO pins</a></li><li data-nav-id=/getting-started/electrical-engineering/ title="Electrical Engineering" class=dd-item><a href=/getting-started/electrical-engineering/>Electrical Engineering</a></li><li data-nav-id=/getting-started/java-development-on-the-raspberry-pi-with-vsc/ title="Java development with VSC" class=dd-item><a href=/getting-started/java-development-on-the-raspberry-pi-with-vsc/>Java development with VSC</a></li><li data-nav-id=/getting-started/developing-on-a-remote-pc/ title="Developing on a remote PC" class=dd-item><a href=/getting-started/developing-on-a-remote-pc/>Developing on a remote PC</a></li><li data-nav-id=/getting-started/minimal-example-application/ title="Minimal example application" class=dd-item><a href=/getting-started/minimal-example-application/>Minimal example application</a></li><li data-nav-id=/getting-started/minimal-example-application-fatjar/ title="Minimal example as FAT JAR" class=dd-item><a href=/getting-started/minimal-example-application-fatjar/>Minimal example as FAT JAR</a></li><li data-nav-id=/getting-started/user-interface-with-javafx/ title="User interface with JavaFX" class=dd-item><a href=/getting-started/user-interface-with-javafx/>User interface with JavaFX</a></li><li data-nav-id=/getting-started/fxgl/ title="Game development with FXGL" class=dd-item><a href=/getting-started/fxgl/>Game development with FXGL</a><ul><li data-nav-id=/getting-started/fxgl/fxgl-to-picade/ title="FXGl to Picade" class=dd-item><a href=/getting-started/fxgl/fxgl-to-picade/>FXGl to Picade</a></li><li data-nav-id=/getting-started/fxgl/kiosk-mode/ title="JavaFX kiosk mode" class=dd-item><a href=/getting-started/fxgl/kiosk-mode/>JavaFX kiosk mode</a></li></ul></li><li data-nav-id=/getting-started/javafx-mvc-template/ title="JavaFX GUI and MVC template" class=dd-item><a href=/getting-started/javafx-mvc-template/>JavaFX GUI and MVC template</a></li><li data-nav-id=/getting-started/learn-more/ title="Learn more..." class=dd-item><a href=/getting-started/learn-more/>Learn more...</a></li></ul></li><li data-nav-id=/documentation/ title=Documentation class=dd-item><a href=/documentation/>Documentation</a><ul><li data-nav-id=/documentation/javadoc/ title="Pi4J API JavaDoc" class=dd-item><a href=/documentation/javadoc/>Pi4J API JavaDoc</a></li><li data-nav-id=/documentation/pin-numbering/ title="Pin numbering" class=dd-item><a href=/documentation/pin-numbering/>Pin numbering</a></li><li data-nav-id=/documentation/java-for-arm/ title="Java for ARMv6/7/8" class=dd-item><a href=/documentation/java-for-arm/>Java for ARMv6/7/8</a></li><li data-nav-id=/documentation/logging/ title="Logging with SLF4J" class=dd-item><a href=/documentation/logging/>Logging with SLF4J</a></li><li data-nav-id=/documentation/create-context/ title="Creating a Pi4J Context" class=dd-item><a href=/documentation/create-context/>Creating a Pi4J Context</a></li><li data-nav-id=/documentation/platforms/ title="Choosing a Platform" class=dd-item><a href=/documentation/platforms/>Choosing a Platform</a><ul><li data-nav-id=/documentation/platforms/raspberry-pi/ title="Raspberry Pi" class=dd-item><a href=/documentation/platforms/raspberry-pi/>Raspberry Pi</a></li></ul></li><li data-nav-id=/documentation/providers/ title="Choosing an I/O Provider" class=dd-item><a href=/documentation/providers/>Choosing an I/O Provider</a><ul><li data-nav-id=/documentation/providers/gpiod/ title="GpioD Provider" class=dd-item><a href=/documentation/providers/gpiod/>GpioD Provider</a></li><li data-nav-id=/documentation/providers/linuxfs/ title="LinuxFS Provider" class=dd-item><a href=/documentation/providers/linuxfs/>LinuxFS Provider</a></li><li data-nav-id=/documentation/providers/pigpio/ title="PiGpio Provider" class=dd-item><a href=/documentation/providers/pigpio/>PiGpio Provider</a></li></ul></li><li data-nav-id=/documentation/board-info/ title="Using Board Info" class=dd-item><a href=/documentation/board-info/>Using Board Info</a></li><li data-nav-id=/documentation/build-io/ title="Building an I/O Instance" class=dd-item><a href=/documentation/build-io/>Building an I/O Instance</a></li><li data-nav-id=/documentation/io-examples/ title="I/O Examples" class=dd-item><a href=/documentation/io-examples/>I/O Examples</a><ul><li data-nav-id=/documentation/io-examples/digital-output/ title="Digital Output (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-output/>Digital Output (GPIO)</a></li><li data-nav-id=/documentation/io-examples/digital-input/ title="Digital Input (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-input/>Digital Input (GPIO)</a></li><li data-nav-id=/documentation/io-examples/pwm/ title="Pulse Width Modulation (PWM)" class=dd-item><a href=/documentation/io-examples/pwm/>Pulse Width Modulation (PWM)</a></li><li data-nav-id=/documentation/io-examples/i2c/ title="Inter-Integrated Circuit (I²C)" class=dd-item><a href=/documentation/io-examples/i2c/>Inter-Integrated Circuit (I²C)</a><ul><li data-nav-id=/documentation/io-examples/i2c/clock-stretching/ title="I²C Clock Stretching" class=dd-item><a href=/documentation/io-examples/i2c/clock-stretching/>I²C Clock Stretching</a></li></ul></li><li data-nav-id=/documentation/io-examples/spi/ title="Serial Peripheral Interface (SPI)" class=dd-item><a href=/documentation/io-examples/spi/>Serial Peripheral Interface (SPI)</a></li><li data-nav-id=/documentation/io-examples/serial/ title="Serial (UART/RS232)" class=dd-item><a href=/documentation/io-examples/serial/>Serial (UART/RS232)</a></li><li data-nav-id=/documentation/io-examples/1-wire/ title=1-Wire class=dd-item><a href=/documentation/io-examples/1-wire/>1-Wire</a></li></ul></li><li data-nav-id=/documentation/registry/ title="I/O Registry" class=dd-item><a href=/documentation/registry/>I/O Registry</a></li><li data-nav-id=/documentation/shutdown/ title="Shutdown (cleanup)" class=dd-item><a href=/documentation/shutdown/>Shutdown (cleanup)</a></li><li data-nav-id=/documentation/building/ title="Building and running" class=dd-item><a href=/documentation/building/>Building and running</a><ul><li data-nav-id=/documentation/building/javac/ title="Building with javac" class=dd-item><a href=/documentation/building/javac/>Building with javac</a></li><li data-nav-id=/documentation/building/fat-jar/ title="Build as a FAT JAR with Maven" class=dd-item><a href=/documentation/building/fat-jar/>Build as a FAT JAR with Maven</a></li><li data-nav-id=/documentation/building/modules-maven/ title="Build Java modules with Maven" class=dd-item><a href=/documentation/building/modules-maven/>Build Java modules with Maven</a></li><li data-nav-id=/documentation/building/modules-gradle/ title="Build Java modules with Gradle" class=dd-item><a href=/documentation/building/modules-gradle/>Build Java modules with Gradle</a></li><li data-nav-id=/documentation/building/jbang/ title="Running Pi4J with JBang" class=dd-item><a href=/documentation/building/jbang/>Running Pi4J with JBang</a></li></ul></li></ul></li><li data-nav-id=/examples/ title="Example Implementations" class="dd-item
parent"><a href=/examples/>Example Implementations</a><ul><li data-nav-id=/examples/jbang/ title="JBang Examples" class="dd-item
parent"><a href=/examples/jbang/>JBang Examples</a><ul><li data-nav-id=/examples/jbang/jbang_minimal_example/ title="Minimal Example" class=dd-item><a href=/examples/jbang/jbang_minimal_example/>Minimal Example</a></li><li data-nav-id=/examples/jbang/jbang_pi4j_spi_led_matrix/ title="8x8 LED Matrix" class=dd-item><a href=/examples/jbang/jbang_pi4j_spi_led_matrix/>8x8 LED Matrix</a></li><li data-nav-id=/examples/jbang/bme280_temperature_humidity_pressure/ title="BME280 Sensor" class=dd-item><a href=/examples/jbang/bme280_temperature_humidity_pressure/>BME280 Sensor</a></li><li data-nav-id=/examples/jbang/pixelblaze_output_expander/ title="Pixelblaze Output Expander" class=dd-item><a href=/examples/jbang/pixelblaze_output_expander/>Pixelblaze Output Expander</a></li><li data-nav-id=/examples/jbang/pixelblaze_output_expander_image/ title="Controlling a LED Matrix" class="dd-item active"><a href=/examples/jbang/pixelblaze_output_expander_image/>Controlling a LED Matrix</a></li><li data-nav-id=/examples/jbang/pixelblaze_output_expander_javafx/ title="LED strip with a JavaFX UI" class=dd-item><a href=/examples/jbang/pixelblaze_output_expander_javafx/>LED strip with a JavaFX UI</a></li></ul></li><li data-nav-id=/examples/components/ title="Component Examples" class=dd-item><a href=/examples/components/>Component Examples</a><ul><li data-nav-id=/examples/components/simplebutton/ title="Simple Button" class=dd-item><a href=/examples/components/simplebutton/>Simple Button</a></li><li data-nav-id=/examples/components/simpleled/ title="Simple LED" class=dd-item><a href=/examples/components/simpleled/>Simple LED</a></li><li data-nav-id=/examples/components/ads1115/ title="AD Converter ADS1115" class=dd-item><a href=/examples/components/ads1115/>AD Converter ADS1115</a></li><li data-nav-id=/examples/components/buzzer/ title=Buzzer class=dd-item><a href=/examples/components/buzzer/>Buzzer</a></li><li data-nav-id=/examples/components/camera/ title=Camera class=dd-item><a href=/examples/components/camera/>Camera</a></li><li data-nav-id=/examples/components/joystick/ title=Joystick class=dd-item><a href=/examples/components/joystick/>Joystick</a></li><li data-nav-id=/examples/components/joystickanalog/ title="Joystick Analog" class=dd-item><a href=/examples/components/joystickanalog/>Joystick Analog</a></li><li data-nav-id=/examples/components/lcddisplay/ title="LCD Display" class=dd-item><a href=/examples/components/lcddisplay/>LCD Display</a></li><li data-nav-id=/examples/components/ledbutton/ title="LED Button" class=dd-item><a href=/examples/components/ledbutton/>LED Button</a></li><li data-nav-id=/examples/components/ledmatrix/ title="LED Matrix" class=dd-item><a href=/examples/components/ledmatrix/>LED Matrix</a></li><li data-nav-id=/examples/components/ledstrip/ title="LED Strip" class=dd-item><a href=/examples/components/ledstrip/>LED Strip</a></li><li data-nav-id=/examples/components/potentiometer/ title=Potentiometer class=dd-item><a href=/examples/components/potentiometer/>Potentiometer</a></li><li data-nav-id=/examples/components/servo/ title=ServoMotor class=dd-item><a href=/examples/components/servo/>ServoMotor</a></li></ul></li><li data-nav-id=/examples/crowpi/ title="Electronics with CrowPi" class=dd-item><a href=/examples/crowpi/>Electronics with CrowPi</a><ul><li data-nav-id=/examples/crowpi/develop-crowpi-with-intellij/ title="Develop with Intellij IDEA" class=dd-item><a href=/examples/crowpi/develop-crowpi-with-intellij/>Develop with Intellij IDEA</a></li><li data-nav-id=/examples/crowpi/crowpi-examples/ title="CrowPi examples" class=dd-item><a href=/examples/crowpi/crowpi-examples/>CrowPi examples</a></li></ul></li><li data-nav-id=/examples/communityimplementation/ title="Community Implementations" class=dd-item><a href=/examples/communityimplementation/>Community Implementations</a><ul><li data-nav-id=/examples/communityimplementation/prototype-board/ title="Prototype Board" class=dd-item><a href=/examples/communityimplementation/prototype-board/>Prototype Board</a></li><li data-nav-id=/examples/communityimplementation/bmp280/ title="BMP280 Sensor" class=dd-item><a href=/examples/communityimplementation/bmp280/>BMP280 Sensor</a></li></ul></li></ul></li><li data-nav-id=/debugging-failures/ title="Debugging Failures" class=dd-item><a href=/debugging-failures/>Debugging Failures</a></li><li data-nav-id=/architecture/ title=Architecture/Design class=dd-item><a href=/architecture/>Architecture/Design</a><ul><li data-nav-id=/architecture/about-the-code/ title="Project source structure" class=dd-item><a href=/architecture/about-the-code/>Project source structure</a><ul><li data-nav-id=/architecture/about-the-code/download-sources/ title=Download/Install class=dd-item><a href=/architecture/about-the-code/download-sources/>Download/Install</a></li><li data-nav-id=/architecture/about-the-code/build-instructions/ title="Build Instructions" class=dd-item><a href=/architecture/about-the-code/build-instructions/>Build Instructions</a></li><li data-nav-id=/architecture/about-the-code/maven-settings/ title="Maven settings" class=dd-item><a href=/architecture/about-the-code/maven-settings/>Maven settings</a></li><li data-nav-id=/architecture/about-the-code/code-styling/ title="Code styling" class=dd-item><a href=/architecture/about-the-code/code-styling/>Code styling</a></li><li data-nav-id=/architecture/about-the-code/hardware-testing/ title="Hardware testing" class=dd-item><a href=/architecture/about-the-code/hardware-testing/>Hardware testing</a></li></ul></li><li data-nav-id=/architecture/advanced/ title=Advanced class=dd-item><a href=/architecture/advanced/>Advanced</a><ul><li data-nav-id=/architecture/advanced/annotated-provisioning/ title="Annotated provisioning" class=dd-item><a href=/architecture/advanced/annotated-provisioning/>Annotated provisioning</a></li><li data-nav-id=/architecture/advanced/dependency-injection/ title="Dependency injection" class=dd-item><a href=/architecture/advanced/dependency-injection/>Dependency injection</a></li><li data-nav-id=/architecture/advanced/library-path/ title="Native Library Path" class=dd-item><a href=/architecture/advanced/library-path/>Native Library Path</a></li><li data-nav-id=/architecture/advanced/plugins/ title=Plug-ins class=dd-item><a href=/architecture/advanced/plugins/>Plug-ins</a></li><li data-nav-id=/architecture/advanced/remote-support/ title="Remote support" class=dd-item><a href=/architecture/advanced/remote-support/>Remote support</a></li></ul></li><li data-nav-id=/architecture/pi4j-logo/ title="The Pi4J Logo" class=dd-item><a href=/architecture/pi4j-logo/>The Pi4J Logo</a></li></ul></li><li data-nav-id=/kotlin/ title="Pi4J with Kotlin" class=dd-item><a href=/kotlin/>Pi4J with Kotlin</a><ul><li data-nav-id=/kotlin/kotlin-dsl/ title="Pi4J Kotlin DSL" class=dd-item><a href=/kotlin/kotlin-dsl/>Pi4J Kotlin DSL</a><ul><li data-nav-id=/kotlin/kotlin-dsl/minimal-kotlin-example/ title="Minimal Kotlin Pi4J example" class=dd-item><a href=/kotlin/kotlin-dsl/minimal-kotlin-example/>Minimal Kotlin Pi4J example</a></li><li data-nav-id=/kotlin/kotlin-dsl/kotlin-api-docs/ title="Kotlin API & DSL Documentation" class=dd-item><a href=/kotlin/kotlin-dsl/kotlin-api-docs/>Kotlin API & DSL Documentation</a></li><li data-nav-id=/kotlin/kotlin-dsl/coroutines/ title="Coroutines Support" class=dd-item><a href=/kotlin/kotlin-dsl/coroutines/>Coroutines Support</a></li><li data-nav-id=/kotlin/kotlin-dsl/i2c/ title="I²C Kotlin DSL" class=dd-item><a href=/kotlin/kotlin-dsl/i2c/>I²C Kotlin DSL</a></li><li data-nav-id=/kotlin/kotlin-dsl/serial/ title="Serial Kotlin DSL" class=dd-item><a href=/kotlin/kotlin-dsl/serial/>Serial Kotlin DSL</a></li></ul></li><li data-nav-id=/kotlin/kotlin-examples/ title="Kotlin Examples" class=dd-item><a href=/kotlin/kotlin-examples/>Kotlin Examples</a><ul><li data-nav-id=/kotlin/kotlin-examples/getting-started/ title="Basic Project Setup" class=dd-item><a href=/kotlin/kotlin-examples/getting-started/>Basic Project Setup</a></li><li data-nav-id=/kotlin/kotlin-examples/useful-tips/ title="Useful Tips" class=dd-item><a href=/kotlin/kotlin-examples/useful-tips/>Useful Tips</a></li></ul></li></ul></li><li data-nav-id=/blog/ title=Blogs class=dd-item><a href=/blog/>Blogs</a><ul><li data-nav-id=/blog/2025/20250811-rpi5-pwm-not-working/ title="RPi5 PWM Fails with NoSuchFileException" class=dd-item><a href=/blog/2025/20250811-rpi5-pwm-not-working/>RPi5 PWM Fails with NoSuchFileException</a></li><li data-nav-id=/blog/2025/20250625-java-21-not-working-on-zero-2/ title="Java 21+ Not Working on Zero 2" class=dd-item><a href=/blog/2025/20250625-java-21-not-working-on-zero-2/>Java 21+ Not Working on Zero 2</a></li><li data-nav-id=/blog/2025/20250507-start-program-with-desktop-icon/ title="Starting with a Desktop Icon" class=dd-item><a href=/blog/2025/20250507-start-program-with-desktop-icon/>Starting with a Desktop Icon</a></li><li data-nav-id=/blog/2025/20250211-welcome-java-21/ title="Pi4J welcomes Java 21" class=dd-item><a href=/blog/2025/20250211-welcome-java-21/>Pi4J welcomes Java 21</a></li><li data-nav-id=/blog/2025/20250115-miami-jug/ title="Pi4J presentation for Miami JUG" class=dd-item><a href=/blog/2025/20250115-miami-jug/>Pi4J presentation for Miami JUG</a></li><li data-nav-id=/blog/2024/20241114-floss-weekly-podcast/ title="Pi4J in Floss Weekly" class=dd-item><a href=/blog/2024/20241114-floss-weekly-podcast/>Pi4J in Floss Weekly</a></li><li data-nav-id=/blog/2024/20241104-download-stats/ title="Maven Downloads" class=dd-item><a href=/blog/2024/20241104-download-stats/>Maven Downloads</a></li><li data-nav-id=/blog/2024/20240927-bits-bytes-signed-unsigned/ title="Signed versus unsigned values" class=dd-item><a href=/blog/2024/20240927-bits-bytes-signed-unsigned/>Signed versus unsigned values</a></li><li data-nav-id=/blog/2024/20240517_bosch_sensor_gas_measurement/ title="Bosch sensor gas measurement" class=dd-item><a href=/blog/2024/20240517_bosch_sensor_gas_measurement/>Bosch sensor gas measurement</a></li><li data-nav-id=/blog/2024/20240425_interview_tom_aarts/ title="Interview Tom Aarts" class=dd-item><a href=/blog/2024/20240425_interview_tom_aarts/>Interview Tom Aarts</a></li><li data-nav-id=/blog/2024/20240423_pwm_rpi5/ title="PWM Hardware Support on RPi5" class=dd-item><a href=/blog/2024/20240423_pwm_rpi5/>PWM Hardware Support on RPi5</a></li><li data-nav-id=/blog/2024/20240419_interview_robert_von_burg/ title="Interview Robert von Burg" class=dd-item><a href=/blog/2024/20240419_interview_robert_von_burg/>Interview Robert von Burg</a></li><li data-nav-id=/blog/2024/20240418_i2c_improvements/ title="Ongoing I2C Improvements" class=dd-item><a href=/blog/2024/20240418_i2c_improvements/>Ongoing I2C Improvements</a></li><li data-nav-id=/blog/2024/20240417_led_matrix_max7219_spi_web/ title="LED Matrix with SPI MAX7219" class=dd-item><a href=/blog/2024/20240417_led_matrix_max7219_spi_web/>LED Matrix with SPI MAX7219</a></li><li data-nav-id=/blog/2024/20240318_interview_alexander_liggesmeyer/ title="Alexander Liggesmeyer and RPi5" class=dd-item><a href=/blog/2024/20240318_interview_alexander_liggesmeyer/>Alexander Liggesmeyer and RPi5</a></li><li data-nav-id=/blog/2022/20221128_led_strip_with_jbang/ title="LED strip with Pi4J and JBang" class=dd-item><a href=/blog/2022/20221128_led_strip_with_jbang/>LED strip with Pi4J and JBang</a></li><li data-nav-id=/blog/2022/20221117_kotlin_on_raspberrypi/ title="Kotlin on the Raspberry Pi" class=dd-item><a href=/blog/2022/20221117_kotlin_on_raspberrypi/>Kotlin on the Raspberry Pi</a></li><li data-nav-id=/blog/2022/20220113_javafx_pi4j_template/ title="Getting Started Template" class=dd-item><a href=/blog/2022/20220113_javafx_pi4j_template/>Getting Started Template</a></li></ul></li><li data-nav-id=/featured-projects/ title="Featured Projects" class=dd-item><a href=/featured-projects/>Featured Projects</a><ul><li data-nav-id=/featured-projects/spring-boot-alarm/ title="Spring Boot Alarm System" class=dd-item><a href=/featured-projects/spring-boot-alarm/>Spring Boot Alarm System</a></li><li data-nav-id=/featured-projects/smartcoop/ title=SmartCoop class=dd-item><a href=/featured-projects/smartcoop/>SmartCoop</a></li><li data-nav-id=/featured-projects/binary-clock/ title="Binary Clock" class=dd-item><a href=/featured-projects/binary-clock/>Binary Clock</a></li><li data-nav-id=/featured-projects/soft-real-time-plc-written-in-strolch/ title="Soft real time PLC" class=dd-item><a href=/featured-projects/soft-real-time-plc-written-in-strolch/>Soft real time PLC</a></li><li data-nav-id=/featured-projects/pijukebox-by-daniel-martensson/ title=PiJukeBox class=dd-item><a href=/featured-projects/pijukebox-by-daniel-martensson/>PiJukeBox</a></li><li data-nav-id=/featured-projects/cocktail-maker-by-alex9849/ title=CocktailPi class=dd-item><a href=/featured-projects/cocktail-maker-by-alex9849/>CocktailPi</a></li><li data-nav-id=/featured-projects/street-artist-robot/ title="Didier the street artist robot" class=dd-item><a href=/featured-projects/street-artist-robot/>Didier the street artist robot</a></li><li data-nav-id=/featured-projects/joystick-game/ title="JMonkeyEngine with Joystick" class=dd-item><a href=/featured-projects/joystick-game/>JMonkeyEngine with Joystick</a></li><li data-nav-id=/featured-projects/sensor-drivers/ title="Sensor drivers" class=dd-item><a href=/featured-projects/sensor-drivers/>Sensor drivers</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://pi4j.com/tags target=_blank><i class='fas more-tag fa-tags'></i> Tags</a></li><li><a class=padding href=https://github.com/Pi4J target=_blank><i class='fab more-tag fa-github'></i> GitHub project</a></li><li><a class=padding href=https://foojay.social/@pi4j target=_blank rel=me><i class='fab more-tag fa-mastodon'></i> Mastodon @pi4j@foojay.social</a></li><li><a class=padding href=https://www.linkedin.com/company/pi4j/ target=_blank><i class='fab more-tag fa-linkedin'></i> LinkedIn @pi4j</a></li><li><a class=padding href=https://github.com/Pi4J/pi4j/discussions target=_blank><i class='fab more-tag fa-github'></i> Pi4J V2 Discussions</a></li><li><a class=padding href=https://join.slack.com/t/pi4j/shared_invite/zt-1ttqt8wgj-E6t69qaLrNuCMPLiYnBCsg target=_blank><i class='fab more-tag fa-slack'></i> Join our Slack</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p><p>Visitor counter by <a href=https://clicky.com/101436354 target=_blank rel=noopener>Clicky</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title='Edit this page' href=https://github.com/Pi4J/pi4j.github.io/blob/main/content/examples/jbang/pixelblaze_output_expander_image.md target=blank><i class="fas fa-code-branch"></i>
<span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Welcome to Pi4J</a> > <a href=/examples/>Example Implementations</a> > <a href=/examples/jbang/>JBang Examples</a> > Controlling a LED Matrix</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#intro>Intro</a></li><li><a href=#application>Application</a><ul><li><a href=#jbang-configuration-and-imports>JBang Configuration and Imports</a></li><li><a href=#enum-with-images>Enum With Images</a></li><li><a href=#loading-an-image-as-rgb-byte-array>Loading an Image as RGB Byte Array</a></li></ul></li><li><a href=#running-the-application>Running the Application</a></li><li><a href=#controlling-an-8x8-matrix>Controlling an 8x8 matrix</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div id=head-tags><div class=tags><a class=tag-link href=/tags/jbang>jbang</a><a class=tag-link href=/tags/led-strip>led strip</a><a class=tag-link href=/tags/pixelblaze>pixelblaze</a></div></div><div id=body-inner><h1>Controlling a LED Matrix</h1><div class="notices tip"><p>GITHUB PROJECT: <a href=https://github.com/Pi4J/pi4j-jbang/blob/main/PixelblazeOutputExpanderImageMatrix8x32.java target=_blank rel=noopener>github.com/Pi4J/pi4j-jbang > PixelblazeOutputExpanderImageMatrix8x32.java</a></p></div><p>A LED strip doesn&rsquo;t only exist as a single strip, the same system is also used in a LED matrix. In this example, we will control such a <a href=https://www.amazon.nl/dp/B0B81R484Z target=_blank rel=noopener>8*32 LED matrix</a>.</p><p>Full LED strip code walkthrough, and additional info in this live session with Robert (aka Eitch) and Frank:</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/eToIXACqSuY?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><h2 id=intro>Intro</h2><p>This example is based on the <a href=/examples/jbang/pixelblaze_output_expander/>Pixelblaze Output Expander (PBOE) JBang example</a>. Make sure to check out the PBOE example, so you fully understand how to set up and use JBang, and connect and control a LED strip via a PBOE.</p><h2 id=application>Application</h2><p>This example uses the same <code>helper.PixelBlazeOutputExpanderHelper</code> to send commands to the PBOE. An additional shared code-file <code>helper.ImageHelper</code> is used to handle images.</p><h3 id=jbang-configuration-and-imports>JBang Configuration and Imports</h3><p>As with each JBang example, we need to define the first script line and the dependencies, one in this case, and we need to include the helper-sources. This example also needs some more imports, and we do a static import of the ImageHelper methods, so we can easily use them in the code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>///usr/bin/env jbang &#34;$0&#34; &#34;$@&#34; ; exit $?</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//DEPS com.fazecast:jSerialComm:2.10.2</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//SOURCES helper/ImageHelper.java</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//SOURCES helper/PixelBlazeOutputExpanderHelper.java</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> helper.PixelBlazeOutputExpanderHelper;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.IOException;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Random;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> helper.ImageHelper.getImageData;
</span></span><span style=display:flex><span><span style=color:#f92672>import static</span> helper.ImageHelper.imageToMatrix;
</span></span></code></pre></div><h3 id=enum-with-images>Enum With Images</h3><p>Within the <a href=https://github.com/Pi4J/pi4j-jbang/tree/main/data target=_blank rel=noopener>JBang sample project you can find a data directory</a>. In this directory, a number of test images is available, PNGs with a size of 8 pixels height by 32 pixels width, matching the size of the matrix. By defining them in the code as an enum, we can add extra info, like the duration we want to display them.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>enum</span> TestImage {
</span></span><span style=display:flex><span>        LINE_1(<span style=color:#e6db74>&#34;image_8_32_line_1.png&#34;</span>, 250),
</span></span><span style=display:flex><span>        LINE_2(<span style=color:#e6db74>&#34;image_8_32_line_2.png&#34;</span>, 250),
</span></span><span style=display:flex><span>        LINE_3(<span style=color:#e6db74>&#34;image_8_32_line_3.png&#34;</span>, 250),
</span></span><span style=display:flex><span>        LINE_4(<span style=color:#e6db74>&#34;image_8_32_line_4.png&#34;</span>, 250),
</span></span><span style=display:flex><span>        LINE_5(<span style=color:#e6db74>&#34;image_8_32_line_5.png&#34;</span>, 250),
</span></span><span style=display:flex><span>        LINE_6(<span style=color:#e6db74>&#34;image_8_32_line_6.png&#34;</span>, 250),
</span></span><span style=display:flex><span>        LINE_7(<span style=color:#e6db74>&#34;image_8_32_line_7.png&#34;</span>, 250),
</span></span><span style=display:flex><span>        LINE_8(<span style=color:#e6db74>&#34;image_8_32_line_8.png&#34;</span>, 250),
</span></span><span style=display:flex><span>        RED(<span style=color:#e6db74>&#34;image_8_32_red.png&#34;</span>, 500),
</span></span><span style=display:flex><span>        GREEN(<span style=color:#e6db74>&#34;image_8_32_green.png&#34;</span>, 500),
</span></span><span style=display:flex><span>        BLUE(<span style=color:#e6db74>&#34;image_8_32_blue.png&#34;</span>, 500),
</span></span><span style=display:flex><span>        STRIPES(<span style=color:#e6db74>&#34;image_8_32_stripes.png&#34;</span>, 2000),
</span></span><span style=display:flex><span>        STRIPES_TEST(<span style=color:#e6db74>&#34;image_8_32_stripes_test.png&#34;</span>, 2000),
</span></span><span style=display:flex><span>        DUKE(<span style=color:#e6db74>&#34;image_8_32_duke.png&#34;</span>, 2000),
</span></span><span style=display:flex><span>        RPI(<span style=color:#e6db74>&#34;image_8_32_raspberrypi.png&#34;</span>, 2000);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> String fileName;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> duration;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        TestImage(String fileName, <span style=color:#66d9ef>int</span> duration) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>fileName</span> <span style=color:#f92672>=</span> fileName;
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>duration</span> <span style=color:#f92672>=</span> duration;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>getFileName</span>() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> fileName;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getDuration</span>() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> duration;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h3 id=loading-an-image-as-rgb-byte-array>Loading an Image as RGB Byte Array</h3><p>As we need to send a byte array with red, green, blue values to the LED strip, we need a method to load an image file and return each pixel as three values. There are several methods available in Java to achieve this. I used <code>bufferedImage.getRGB(x, y)</code> to be able to validate the color returned from every pixel to make it easy to debug.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> <span style=color:#a6e22e>getImageData</span>(String imagePath) <span style=color:#66d9ef>throws</span> IOException {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> imageData <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span>NUMBER_OF_LEDS <span style=color:#f92672>*</span> BYTES_PER_PIXEL<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Open image</span>
</span></span><span style=display:flex><span>        File imgPath <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File(imagePath);
</span></span><span style=display:flex><span>        BufferedImage bufferedImage <span style=color:#f92672>=</span> ImageIO.<span style=color:#a6e22e>read</span>(imgPath);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Read color values for each pixel</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>int</span> pixelCounter <span style=color:#f92672>=</span> 0;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> y <span style=color:#f92672>=</span> 0; y <span style=color:#f92672>&lt;</span> 8; y<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> x <span style=color:#f92672>=</span> 0; x <span style=color:#f92672>&lt;</span> 32; x<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>int</span> color <span style=color:#f92672>=</span> bufferedImage.<span style=color:#a6e22e>getRGB</span>(x, y);
</span></span><span style=display:flex><span>                imageData<span style=color:#f92672>[</span>pixelCounter <span style=color:#f92672>*</span> BYTES_PER_PIXEL<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> (<span style=color:#66d9ef>byte</span>) ((color <span style=color:#f92672>&amp;</span> 0xff0000) <span style=color:#f92672>&gt;&gt;</span> 16); <span style=color:#75715e>// Red</span>
</span></span><span style=display:flex><span>                imageData<span style=color:#f92672>[</span>(pixelCounter <span style=color:#f92672>*</span> BYTES_PER_PIXEL) <span style=color:#f92672>+</span> 1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> (<span style=color:#66d9ef>byte</span>) ((color <span style=color:#f92672>&amp;</span> 0xff00) <span style=color:#f92672>&gt;&gt;</span> 8); <span style=color:#75715e>// Green</span>
</span></span><span style=display:flex><span>                imageData<span style=color:#f92672>[</span>(pixelCounter <span style=color:#f92672>*</span> BYTES_PER_PIXEL) <span style=color:#f92672>+</span> 2<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> (<span style=color:#66d9ef>byte</span>) (color <span style=color:#f92672>&amp;</span> 0xff); <span style=color:#75715e>// Blue</span>
</span></span><span style=display:flex><span>                pixelCounter<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> imageData;
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><h4 id=detecting-the-orientation-of-the-strip>Detecting the Orientation of the Strip</h4><p>While working on this example, I didn&rsquo;t get the output I was expecting. My assumption was that the LEDs are wired in rows, which would be the easiest way to use them.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Column          1   2   3   4   ...    32
</span></span><span style=display:flex><span>Row 1   IN   &gt;                              &gt; OUT, connected to beginning of row 2
</span></span><span style=display:flex><span>Row 2   IN   &gt;                              &gt; OUT, connected to beginning of row 3
</span></span><span style=display:flex><span>Row 3   IN   &gt;                              &gt; OUT, connected to beginning of row 4
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>With the following code, RED is sent to each LED, one by one, from position 0 to the final LED.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Check the position of the LEDs, to identify how the LED strip is wired</span>
</span></span><span style=display:flex><span>System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;One by one RED&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> NUMBER_OF_LEDS; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> pixelData <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span>NUMBER_OF_LEDS <span style=color:#f92672>*</span> BYTES_PER_PIXEL<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    pixelData<span style=color:#f92672>[</span>i <span style=color:#f92672>*</span> BYTES_PER_PIXEL<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> (<span style=color:#66d9ef>byte</span>) 0xff; <span style=color:#75715e>// red</span>
</span></span><span style=display:flex><span>    helper.<span style=color:#a6e22e>sendColors</span>(CHANNEL, BYTES_PER_PIXEL, 1, 0, 2, 0, pixelData, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>    Thread.<span style=color:#a6e22e>sleep</span>(20);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>With this code, I found out the wiring, on the matrix that I use, is actually totally different</p><p>2191</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Column          1     2     3     4     ...    32
</span></span><span style=display:flex><span>                IN    OUT   IN    OUT
</span></span><span style=display:flex><span>                      TO 3        TO 5
</span></span><span style=display:flex><span>                &amp;#x2B07;    &amp;#x2B06;     &amp;#x2B07;    &amp;#x2B06;    ...
</span></span><span style=display:flex><span>Row 1   
</span></span><span style=display:flex><span>Row 2   
</span></span><span style=display:flex><span>Row 3   
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>Row 8
</span></span><span style=display:flex><span>                &amp;#x2B07;    &amp;#x2B06;    &amp;#x2B07;     &amp;#x2B06;    ...
</span></span><span style=display:flex><span>                OUT   IN    OUT   IN
</span></span><span style=display:flex><span>                TO 2        TO 4
</span></span></code></pre></div><p>As it turns out the order of the LEDs doesn&rsquo;t match the X/Y system of an image, an extra method is needed to &ldquo;flip&rdquo; the X/Y into the actual ordering of the LEDs. Although this method is easy, it took me some iterations to find a correct approach&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> <span style=color:#a6e22e>imageToMatrix</span>(<span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> imageData) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> matrixData <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span>imageData.<span style=color:#a6e22e>length</span><span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>int</span> indexInImage <span style=color:#f92672>=</span> 0;;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> row <span style=color:#f92672>=</span> 0; row <span style=color:#f92672>&lt;</span> 8; row<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> column <span style=color:#f92672>=</span> 0; column <span style=color:#f92672>&lt;</span> 32; column<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> indexInMatrix <span style=color:#f92672>=</span> (column <span style=color:#f92672>*</span> 8) <span style=color:#f92672>+</span> (column <span style=color:#f92672>%</span> 2 <span style=color:#f92672>==</span> 0 <span style=color:#f92672>?</span> row : 7 <span style=color:#f92672>-</span> row);
</span></span><span style=display:flex><span>            <span style=color:#75715e>//System.out.println(&#34;Row : &#34; + row + &#34; / column: &#34; + column + &#34; / index image : &#34; + indexInImage + &#34; / index matrix: &#34; + indexInMatrix);</span>
</span></span><span style=display:flex><span>            matrixData<span style=color:#f92672>[</span>indexInMatrix <span style=color:#f92672>*</span> BYTES_PER_PIXEL<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> imageData<span style=color:#f92672>[</span>indexInImage <span style=color:#f92672>*</span> BYTES_PER_PIXEL<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>            matrixData<span style=color:#f92672>[</span>(indexInMatrix <span style=color:#f92672>*</span> BYTES_PER_PIXEL) <span style=color:#f92672>+</span> 1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> imageData<span style=color:#f92672>[</span>(indexInImage <span style=color:#f92672>*</span> BYTES_PER_PIXEL) <span style=color:#f92672>+</span> 1<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>            matrixData<span style=color:#f92672>[</span>(indexInMatrix <span style=color:#f92672>*</span> BYTES_PER_PIXEL) <span style=color:#f92672>+</span> 2<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> imageData<span style=color:#f92672>[</span>(indexInImage <span style=color:#f92672>*</span> BYTES_PER_PIXEL) <span style=color:#f92672>+</span> 2<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>            indexInImage<span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> matrixData;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=displaying-the-images>Displaying the Images</h4><p>With the enum and additional methods, we can now very easy display all the images for the duration that is defined in each enum value.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// Output all defined images</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (TestImage testImage : TestImage.<span style=color:#a6e22e>values</span>()) {
</span></span><span style=display:flex><span>    System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Image: &#34;</span> <span style=color:#f92672>+</span> testImage);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Get the bytes from the given image</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> pixelData <span style=color:#f92672>=</span> imageToMatrix(getImageData(<span style=color:#e6db74>&#34;data/&#34;</span> <span style=color:#f92672>+</span> testImage.<span style=color:#a6e22e>getFileName</span>()));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Show the image on the LED matrix</span>
</span></span><span style=display:flex><span>    helper.<span style=color:#a6e22e>sendColors</span>(CHANNEL, BYTES_PER_PIXEL, 1, 0, 2, 1, pixelData, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Thread.<span style=color:#a6e22e>sleep</span>(testImage.<span style=color:#a6e22e>getDuration</span>());
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h4 id=other-effects>Other Effects</h4><p>Some other effects are included in the example which are not using images.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// All white to test load on power supply</span>
</span></span><span style=display:flex><span>System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Full RGB&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> allWhite <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span>NUMBER_OF_LEDS <span style=color:#f92672>*</span> BYTES_PER_PIXEL<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> NUMBER_OF_LEDS <span style=color:#f92672>*</span> BYTES_PER_PIXEL; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    allWhite<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> (<span style=color:#66d9ef>byte</span>) 0xff;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>helper.<span style=color:#a6e22e>sendColors</span>(CHANNEL, BYTES_PER_PIXEL, 1, 0, 2, 0, allWhite, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>Thread.<span style=color:#a6e22e>sleep</span>(5000);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Random colors</span>
</span></span><span style=display:flex><span>Random rd <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Random();
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> (i <span style=color:#f92672>=</span> 0; i <span style=color:#f92672>&lt;</span> 100; i<span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> random <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span>8 <span style=color:#f92672>*</span> 32 <span style=color:#f92672>*</span> BYTES_PER_PIXEL<span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    rd.<span style=color:#a6e22e>nextBytes</span>(random);
</span></span><span style=display:flex><span>    helper.<span style=color:#a6e22e>sendColors</span>(CHANNEL, BYTES_PER_PIXEL, 1, 0, 2, 0, random, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>    Thread.<span style=color:#a6e22e>sleep</span>(50);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=running-the-application>Running the Application</h2><p>No <code>sudo</code> is needed for serial communication with the <code>jSerialComm</code> library, so the application can be started with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ jbang PixelblazeOutputExpanderImageMatrix8x32.java
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>jbang<span style=color:#f92672>]</span> Building jar <span style=color:#66d9ef>for</span> PixelblazeOutputExpanderImageMatrix8x32.java...
</span></span><span style=display:flex><span>Initializing serial
</span></span><span style=display:flex><span>Opening /dev/ttyS0
</span></span><span style=display:flex><span>All off on channel <span style=color:#ae81ff>2</span> with <span style=color:#ae81ff>256</span>
</span></span><span style=display:flex><span>One by one RED
</span></span><span style=display:flex><span>Full RGB
</span></span><span style=display:flex><span>Image data/image_8_32_line_1.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_line_2.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_line_3.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_line_4.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_line_5.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_line_6.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_line_7.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_line_8.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_red.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_green.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_blue.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_stripes.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_stripes_test.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_duke.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>Image data/image_8_32_raspberrypi.png loaded with W <span style=color:#ae81ff>32</span> and H <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span>All off on channel <span style=color:#ae81ff>2</span> with <span style=color:#ae81ff>256</span>
</span></span><span style=display:flex><span>Closing /dev/ttyS0
</span></span></code></pre></div><h2 id=controlling-an-8x8-matrix>Controlling an 8x8 matrix</h2><p>Within the GitHub project, you can also find an example to send images to an 8x8 matrix.</p><div class="notices tip"><p>GITHUB PROJECT: <a href=https://github.com/Pi4J/pi4j-jbang/blob/main/PixelblazeOutputExpanderImageMatrix8x8.java target=_blank rel=noopener>github.com/Pi4J/pi4j-jbang > PixelblazeOutputExpanderImageMatrix8x8.java</a></p></div><h2 id=conclusion>Conclusion</h2><p>By reusing the existing Pixelblaze Output Expander helper code, we are able to control a LED matrix and experiment with images.</p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1755630386></script><script src=/js/perfect-scrollbar.min.js?1755630386></script><script src=/js/perfect-scrollbar.jquery.min.js?1755630386></script><script src=/js/jquery.sticky.js?1755630386></script><script src=/js/featherlight.min.js?1755630386></script><script src=/js/highlight.pack.js?1755630386></script><script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1755630386></script><script src=/js/learn.js?1755630386></script><script src=/js/hugo-learn.js?1755630386></script><script src=/mermaid/mermaid.js?1755630386></script><script>mermaid.initialize({startOnLoad:!0})</script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script><script type=text/javascript>docsearch({appId:"QJ0EB8YHN3",apiKey:"8ddde1d36a62d9e2d7c4333239e6a2fc",indexName:"pi4j",container:"#docsearch",debug:!0})</script><script async data-id=101436817 src=//static.getclicky.com/js></script></body></html>