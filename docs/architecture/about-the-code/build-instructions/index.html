<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Java IO Library for the Raspberry Pi"><meta name=author content="Pi4J"><link rel=icon href=/assets/favicon.ico type=image/ico><title>Build Instructions - Pi4J</title><link href=/css/nucleus.css?1614705262 rel=stylesheet><link href=/css/fontawesome-all.min.css?1614705262 rel=stylesheet><link href=/css/hybrid.css?1614705262 rel=stylesheet><link href=/css/featherlight.min.css?1614705262 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1614705262 rel=stylesheet><link href=/css/auto-complete.css?1614705262 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1614705262 rel=stylesheet><link href=/css/theme.css?1614705262 rel=stylesheet><link href=/css/hugo-theme.css?1614705262 rel=stylesheet><link href=/css/theme-blue.css?1614705262 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1614705262></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/architecture/about-the-code/build-instructions/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/assets/pi4j-logo.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1614705262></script><script type=text/javascript src=/js/auto-complete.js?1614705262></script><script type=text/javascript>var baseurl="https:\/\/v2.pi4j.com\/";</script><script type=text/javascript src=/js/search.js?1614705262></script></div><div class=highlightable><ul class=topics><li data-nav-id=/about/ title=About class=dd-item><a href=/about/>About</a><ul><li data-nav-id=/about/previous-version-v1/ title="Previous versions (V.1)" class=dd-item><a href=/about/previous-version-v1/>Previous versions (V.1)</a></li><li data-nav-id=/about/new-in-v2/ title="What's New (V.2)" class=dd-item><a href=/about/new-in-v2/>What's New (V.2)</a></li><li data-nav-id=/about/release-notes/ title="Release Notes" class=dd-item><a href=/about/release-notes/>Release Notes</a></li><li data-nav-id=/about/license/ title="License (Open Source)" class=dd-item><a href=/about/license/>License (Open Source)</a></li><li data-nav-id=/about/team/ title="The Team" class=dd-item><a href=/about/team/>The Team</a></li></ul></li><li data-nav-id=/getting-started/ title="Getting started with Pi4J" class=dd-item><a href=/getting-started/>Getting started with Pi4J</a><ul><li data-nav-id=/getting-started/set-up-a-new-raspberry-pi/ title="Set up a new Raspberry Pi" class=dd-item><a href=/getting-started/set-up-a-new-raspberry-pi/>Set up a new Raspberry Pi</a></li><li data-nav-id=/getting-started/understanding-the-pins/ title="Understanding the GPIO pins" class=dd-item><a href=/getting-started/understanding-the-pins/>Understanding the GPIO pins</a></li><li data-nav-id=/getting-started/java-development-on-the-raspberry-pi-with-vsc/ title="Java development with VSC" class=dd-item><a href=/getting-started/java-development-on-the-raspberry-pi-with-vsc/>Java development with VSC</a></li><li data-nav-id=/getting-started/minimal-example-application/ title="Minimal example application" class=dd-item><a href=/getting-started/minimal-example-application/>Minimal example application</a></li><li data-nav-id=/getting-started/introduction-to-electronics-with-crowpi/ title="Introduction to electronics" class=dd-item><a href=/getting-started/introduction-to-electronics-with-crowpi/>Introduction to electronics</a></li><li data-nav-id=/getting-started/user-interface-with-javafx/ title="User interface with JavaFX" class=dd-item><a href=/getting-started/user-interface-with-javafx/>User interface with JavaFX</a></li><li data-nav-id=/getting-started/game-development-with-fxgl/ title="Game development with FXGL" class=dd-item><a href=/getting-started/game-development-with-fxgl/>Game development with FXGL</a></li></ul></li><li data-nav-id=/documentation/ title=Documentation class=dd-item><a href=/documentation/>Documentation</a><ul><li data-nav-id=/documentation/pin-numbering/ title="Pin numbering" class=dd-item><a href=/documentation/pin-numbering/>Pin numbering</a></li><li data-nav-id=/documentation/java-installation/ title="Java for ARMv6/7/8" class=dd-item><a href=/documentation/java-installation/>Java for ARMv6/7/8</a></li><li data-nav-id=/documentation/logging/ title="Logging with SLF4J" class=dd-item><a href=/documentation/logging/>Logging with SLF4J</a></li><li data-nav-id=/documentation/create-context/ title="Creating a Pi4J Context" class=dd-item><a href=/documentation/create-context/>Creating a Pi4J Context</a></li><li data-nav-id=/documentation/platforms/ title="Choosing a Platform" class=dd-item><a href=/documentation/platforms/>Choosing a Platform</a><ul><li data-nav-id=/documentation/platforms/raspberry-pi/ title="Raspberry Pi" class=dd-item><a href=/documentation/platforms/raspberry-pi/>Raspberry Pi</a></li></ul></li><li data-nav-id=/documentation/providers/ title="Choosing an I/O Provider" class=dd-item><a href=/documentation/providers/>Choosing an I/O Provider</a><ul><li data-nav-id=/documentation/providers/pigpio/ title=PiGpio class=dd-item><a href=/documentation/providers/pigpio/>PiGpio</a></li></ul></li><li data-nav-id=/documentation/build-io/ title="Building an I/O Instance" class=dd-item><a href=/documentation/build-io/>Building an I/O Instance</a></li><li data-nav-id=/documentation/io-events/ title="Listening for I/O Events" class=dd-item><a href=/documentation/io-events/>Listening for I/O Events</a></li><li data-nav-id=/documentation/io-examples/ title="I/O Examples" class=dd-item><a href=/documentation/io-examples/>I/O Examples</a><ul><li data-nav-id=/documentation/io-examples/digital-output/ title="Digital Output (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-output/>Digital Output (GPIO)</a></li><li data-nav-id=/documentation/io-examples/digital-input/ title="Digital Input (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-input/>Digital Input (GPIO)</a></li><li data-nav-id=/documentation/io-examples/pwm/ title="Pulse Width Modulation (PWM)" class=dd-item><a href=/documentation/io-examples/pwm/>Pulse Width Modulation (PWM)</a></li><li data-nav-id=/documentation/io-examples/i2c/ title="Inter-Integrated Circuit (I²C)" class=dd-item><a href=/documentation/io-examples/i2c/>Inter-Integrated Circuit (I²C)</a></li><li data-nav-id=/documentation/io-examples/spi/ title="Serial Peripheral Interface (SPI)" class=dd-item><a href=/documentation/io-examples/spi/>Serial Peripheral Interface (SPI)</a></li><li data-nav-id=/documentation/io-examples/serial/ title="Serial (UART/RS232)" class=dd-item><a href=/documentation/io-examples/serial/>Serial (UART/RS232)</a></li></ul></li><li data-nav-id=/documentation/device-examples/ title="Devices examples" class=dd-item><a href=/documentation/device-examples/>Devices examples</a></li><li data-nav-id=/documentation/registry/ title="I/O Registry" class=dd-item><a href=/documentation/registry/>I/O Registry</a></li><li data-nav-id=/documentation/shutdown/ title="Shutting down the Pi4J Context" class=dd-item><a href=/documentation/shutdown/>Shutting down the Pi4J Context</a></li></ul></li><li data-nav-id=/architecture/ title=Architecture/Design class="dd-item
parent"><a href=/architecture/>Architecture/Design</a><ul><li data-nav-id=/architecture/about-the-code/ title="Project source structure" class="dd-item
parent"><a href=/architecture/about-the-code/>Project source structure</a><ul><li data-nav-id=/architecture/about-the-code/download/ title=Download/Install class=dd-item><a href=/architecture/about-the-code/download/>Download/Install</a><ul><li data-nav-id=/architecture/about-the-code/download/direct-download/ title="Direct Download" class=dd-item><a href=/architecture/about-the-code/download/direct-download/>Direct Download</a></li><li data-nav-id=/architecture/about-the-code/download/repository/ title="Maven Repository" class=dd-item><a href=/architecture/about-the-code/download/repository/>Maven Repository</a></li><li data-nav-id=/architecture/about-the-code/download/install/ title=Installation class=dd-item><a href=/architecture/about-the-code/download/install/>Installation</a></li></ul></li><li data-nav-id=/architecture/about-the-code/build-instructions/ title="Build Instructions" class="dd-item active"><a href=/architecture/about-the-code/build-instructions/>Build Instructions</a></li><li data-nav-id=/architecture/about-the-code/maven-settings/ title="Maven settings" class=dd-item><a href=/architecture/about-the-code/maven-settings/>Maven settings</a></li><li data-nav-id=/architecture/about-the-code/code-styling/ title="Code styling" class=dd-item><a href=/architecture/about-the-code/code-styling/>Code styling</a></li><li data-nav-id=/architecture/about-the-code/hardware-testing/ title="Hardware testing" class=dd-item><a href=/architecture/about-the-code/hardware-testing/>Hardware testing</a></li></ul></li><li data-nav-id=/architecture/advanced/ title=Advanced class=dd-item><a href=/architecture/advanced/>Advanced</a><ul><li data-nav-id=/architecture/advanced/annotated-provisioning/ title="Annotated provisioning" class=dd-item><a href=/architecture/advanced/annotated-provisioning/>Annotated provisioning</a></li><li data-nav-id=/architecture/advanced/dependency-injection/ title="Dependency injection" class=dd-item><a href=/architecture/advanced/dependency-injection/>Dependency injection</a></li><li data-nav-id=/architecture/advanced/library-path/ title="Native Library Path" class=dd-item><a href=/architecture/advanced/library-path/>Native Library Path</a></li><li data-nav-id=/architecture/advanced/plugins/ title=Plug-ins class=dd-item><a href=/architecture/advanced/plugins/>Plug-ins</a></li><li data-nav-id=/architecture/advanced/remote-support/ title="Remote support" class=dd-item><a href=/architecture/advanced/remote-support/>Remote support</a></li><li data-nav-id=/architecture/advanced/3rd-party/ title="Third-Party Integration" class=dd-item><a href=/architecture/advanced/3rd-party/>Third-Party Integration</a></li></ul></li></ul></li><li data-nav-id=/featured-projects/ title="Featured Projects" class=dd-item><a href=/featured-projects/>Featured Projects</a><ul><li data-nav-id=/featured-projects/pijukebox-by-daniel-martensson/ title="PiJukeBox by Daniel Mårtensson" class=dd-item><a href=/featured-projects/pijukebox-by-daniel-martensson/>PiJukeBox by Daniel Mårtensson</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://v2.pi4j.com/tags><i class="fas fa-tags"></i>Tags</a></li><li><a class=padding href=https://github.com/Pi4J><i class="fab fa-github"></i>GitHub project</a></li><li><a class=padding href=https://twitter.com/pi4J><i class="fab fa-twitter"></i>Twitter @pi4j</a></li><li><a class=padding href=https://github.com/Pi4J/pi4j-v2/discussions><i class="fab fa-github"></i>Pi4J Forum</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/Pi4J/pi4j.github.io/blob/main/content/architecture/about-the-code/build-instructions.md target=blank><i class="fas fa-code-branch"></i><span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links>Build Instructions</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><ul><li><a href=#prerequsites>Prerequsites</a></li><li><a href=#build-environment>Build Environment</a></li><li><a href=#building-with-maven>Building with Maven</a></li><li><a href=#building-with-docker>Building with Docker</a></li><li><a href=#building-pi4j-native-libraries>Building Pi4J Native Libraries</a></li><li><a href=#custom-build-profiles>Custom Build Profiles</a></li><li><a href=#releasesnapshot-builds>Release/Snapshot Builds</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Build Instructions</h1><p>Building the Pi4J Project is simple and requires minimal effort. Pi4J is primarily built using Apache Maven and Java 11.
Pi4J can be built directly on your host computer or inside a Docker container where all toolchains and dependencies are
already installed, configuired and cached.</p><div class="notices note"><p>If you wish to build using a Docker container, please skip ahead to the
<a href=#building-with-docker><em>Building with Docker</em></a> topic.</p></div><hr><h3 id=prerequsites>Prerequsites</h3><p>In order to build Pi4J, the host system must have the following toolchains pre-installed.</p><table><thead><tr><th style=text-align:left>Name</th><th style=text-align:left>Version</th><th style=text-align:left>URL</th></tr></thead><tbody><tr><td style=text-align:left>Java Development Kit (JDK)</td><td style=text-align:left>11.0.7 (<em>or newer</em>)</td><td style=text-align:left><a href=https://openjdk.java.net/>https://openjdk.java.net/</a></td></tr><tr><td style=text-align:left>Apache Maven</td><td style=text-align:left>3.6.3 (<em>or newer</em>)</td><td style=text-align:left><a href=https://maven.apache.org/download.cgi>https://maven.apache.org/download.cgi</a></td></tr></tbody></table><hr><h3 id=build-environment>Build Environment</h3><p>The <code>JAVA_HOME</code> system environment variable must be configiured to point to the JDK installed path.</p><hr><h3 id=building-with-maven>Building with Maven</h3><p>To build the Pi4J project, use the following Maven comand from the parent Pi4J directory.</p><pre><code>mvn clean install
</code></pre><p>If you prefer to skip all unit/integration testing, use the folllowing Maven command:</p><pre><code>mvn clean install -DskipTests
</code></pre><hr><h3 id=building-with-docker>Building with Docker</h3><p>Alternatively, the Pi4J project can be entirely compiled inside a prebuilt Pi4J Builder Docker container. This eliminates the need/requirement to install the build toolchains and configure your system to build Pi4J. To build the Pi4J project using Docker, run the following shell script from the parent Pi4J directory.</p><pre><code>./build-docker.sh
</code></pre><p>The project which provides these Docker images can be found on <a href=https://github.com/Pi4J/pi4j-docker>GitHub > Pi4J/pi4j-docker</a> and includes an extensive README with the full info on how to build and use these images.</p><p><strong>Extract from the README:</strong></p><p>This project contains the Dockerfiles and build scripts to create the Pi4J builder<br>docker images used for compiling/building the Pi4J projects. The Pi4J builder images
include the following:</p><ul><li><p><strong><a href=https://hub.docker.com/repository/docker/pi4j/pi4j-builder-base rel=nofollow>Pi4J Base Builder</a></strong> <code>pi4j/pi4j-builder-base:latest</code> :
This is the base image used by all the other builder images. It's based on Ubuntu 18.04
with JDK 11 and Maven pre-installed. This image's entry point is a Bash shell.
(<a href=https://hub.docker.com/repository/docker/pi4j/pi4j-builder-base rel=nofollow>https://hub.docker.com/repository/docker/pi4j/pi4j-builder-base</a>)</p></li><li><p><strong><a href=https://hub.docker.com/repository/docker/pi4j/pi4j-builder-native rel=nofollow>Pi4J Native Builder</a></strong> <code>pi4j/pi4j-builder-native:latest</code> :
This image is derived from <code>pi4j/pi4j-builder-base</code> and adds support for native cross-compilers
and build tools for architectures: <code>arm</code>, <code>armhf</code>, <code>aarch64/arm64</code>. This image's
entry point is a bash shell attempting to execute the file <code>./build.sh</code> in the volume mounted
under the <code>/build</code> path.</p></li><li><p><strong><a href=https://hub.docker.com/repository/docker/pi4j/pi4j-builder:1.4 rel=nofollow>Pi4J v1.4 Builder</a></strong> <code>pi4j/pi4j-builder:1.4</code> :
This image is derived from <code>pi4j/pi4j-builder-native</code> and additionally includes pre-cached Maven
build plugins and dependencies for <a href=http://github.com/Pi4J/pi4j>Pi4J v1.4</a> builds. This image's
entry point is a Maven shell. If not explicitly provided, the default maven build arguments will be:
<code>clean install -DskipTests -Pall-platforms</code>. This will effectively build all Pi4J projects including
the <code>pi4j-native</code> project containing native libraries which will be cross-compiled for RaspberryPi/ARM
(32-bit & 64-bit) devices.</p></li><li><p><strong><a href=https://hub.docker.com/repository/docker/pi4j/pi4j-builder:2.0 rel=nofollow>Pi4J v2.0 Builder</a></strong> <code>pi4j/pi4j-builder:2.0</code> :
This image is derived from <code>pi4j/pi4j-builder-native</code> and additionally includes pre-cached Maven
build plugins and dependencies for <a href=http://github.com/Pi4J/pi4j-v2>Pi4J v2.0</a> builds. This image's
entry point is a Maven shell. If not explicitly provided, the default maven build arguments will be:
<code>clean install -DskipTests -native</code>. This will effectively build all Pi4J projects including
the native library projects which will be cross-compiled for RaspberryPi/ARM (32-bit & 64-bit) devices.</p></li></ul><p><strong>Note:</strong> Pi4J versions prior to v1.4 are not currently tested or supported in these Docker images.</p><hr><h3 id=building-pi4j-native-libraries>Building Pi4J Native Libraries</h3><p>Pi4J V.2 also includes native libraries that will need to be compiled if you are modifying any native code. Most users will never need to compile the native libraries as these artifacts are automatically downloaded when building the Pi4J JARs from Maven repositories. One of the following commands can be used to build the Pi4J JARs and Native Libraries:</p><pre><code>mvn clean install -Pnative
mvn clean install -Pnative,docker
mvn clean install -Pnative,cross-compile
</code></pre><div class="notices note"><p>See the custom build profiles in the <a href=#custom-build-profiles>Custom Build Profiles</a> section for
more information about the profiles illustrated in these commands.</p></div><p>Additional information about Docker Builds vs Cross-Compiler builds can be found here:
<a href=https://github.com/Pi4J/pi4j-v2/issues/21#issuecomment-651976487>https://github.com/Pi4J/pi4j-v2/issues/21#issuecomment-651976487</a></p><p>TODO <em>Create a topic here detailing Docker builds vs Cross-compiler builds.</em></p><hr><h3 id=custom-build-profiles>Custom Build Profiles</h3><p>The Pi4J Maven build includes a number of custom profiles that can be activated to perform various build steps.</p><table><thead><tr><th style=text-align:left>Profile</th><th style=text-align:left>Description</th><th style=text-align:left>Notes</th></tr></thead><tbody><tr><td style=text-align:left><code>sources</code></td><td style=text-align:left>Package raw sources for each JAR</td><td style=text-align:left>Only needed when performing a snapshot or release build.</td></tr><tr><td style=text-align:left><code>javadoc</code></td><td style=text-align:left>Compile and package JavaDoc for each JAR</td><td style=text-align:left>Only needed when performing a snapshot or release build.</td></tr><tr><td style=text-align:left><code>native</code></td><td style=text-align:left>Compile any native libraries included in the build</td><td style=text-align:left>Only needed when modifying native code or performing a snapshot or release build.</td></tr><tr><td style=text-align:left><code>docker</code></td><td style=text-align:left>Use docker builder containers to compile native library artifacts</td><td style=text-align:left>Only used when incuding the <code>native</code> profile or performing a snapshot or release build.</td></tr><tr><td style=text-align:left><code>cross-compile</code></td><td style=text-align:left>Use cross-compilers on host to compile native library artifacts</td><td style=text-align:left>Only used when incuding the <code>native</code> profile or performing a snapshot or release build.</td></tr><tr><td style=text-align:left><code>test-hardware</code></td><td style=text-align:left>Perform hardware integration testing</td><td style=text-align:left>EXPERIMENTAL</td></tr><tr><td style=text-align:left><code>mac</code></td><td style=text-align:left>Use docker builder containers to compile native library artifacts (Same as <code>docker</code> profile)</td><td style=text-align:left>Automatically activated when running build from a MacOS host system.</td></tr><tr><td style=text-align:left><code>windows</code></td><td style=text-align:left>Use docker builder containers to compile native library artifacts (Same as <code>docker</code> profile)</td><td style=text-align:left>Automatically activated when running build from a Windows host system.</td></tr><tr><td style=text-align:left><code>transfer</code></td><td style=text-align:left>Perform SSH/SCP file transfers for each JAR to a remote Raspberry Pi</td><td style=text-align:left>Used for parallel development and testing.</td></tr></tbody></table><p>You can activate a build profile using the <code>-P</code>{profile-name} argument in the Maven command:</p><pre><code>mvn clean install -Pjavadoc
</code></pre><h3 id=releasesnapshot-builds>Release/Snapshot Builds</h3><p>Pi4J release and snapshot builds are reserved for the Pi4J Development Team. A release build ensures all JARs, resources, source-bundles, native libraries, and javadoc artifacts are compiled and deployed to the public Maven repositories. You can use the following command to perform all the build steps that would be performed during a release or snapshot build.</p><pre><code>mvn clean install -Drelease-build
</code></pre><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/architecture/about-the-code/download/install/ title=Installation><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/architecture/about-the-code/maven-settings/ title="Maven settings" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1614705262></script><script src=/js/perfect-scrollbar.min.js?1614705262></script><script src=/js/perfect-scrollbar.jquery.min.js?1614705262></script><script src=/js/jquery.sticky.js?1614705262></script><script src=/js/featherlight.min.js?1614705262></script><script src=/js/highlight.pack.js?1614705262></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1614705262></script><script src=/js/learn.js?1614705262></script><script src=/js/hugo-learn.js?1614705262></script><script src=/mermaid/mermaid.js?1614705262></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>