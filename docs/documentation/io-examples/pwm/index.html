<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Java IO Library for the Raspberry Pi"><meta name=author content="Pi4J"><link rel=icon href=/assets/favicon.ico type=image/ico><title>Pulse Width Modulation (PWM) - Pi4J</title><link href=/css/nucleus.css?1650886687 rel=stylesheet><link href=/css/fontawesome-all.min.css?1650886687 rel=stylesheet><link href=/css/hybrid.css?1650886687 rel=stylesheet><link href=/css/featherlight.min.css?1650886687 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1650886687 rel=stylesheet><link href=/css/auto-complete.css?1650886687 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1650886687 rel=stylesheet><link href=/css/theme.css?1650886687 rel=stylesheet><link href=/css/hugo-theme.css?1650886687 rel=stylesheet><link href=/css/theme-blue.css?1650886687 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1650886687></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/documentation/io-examples/pwm/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/assets/pi4j-header.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1650886687></script><script type=text/javascript src=/js/auto-complete.js?1650886687></script><script type=text/javascript>var baseurl="https:\/\/pi4j.com\/";</script><script type=text/javascript src=/js/search.js?1650886687></script></div><section id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i>Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/about/ title=About class=dd-item><a href=/about/>About</a><ul><li data-nav-id=/about/previous-version-v1/ title="Previous versions (V.1)" class=dd-item><a href=/about/previous-version-v1/>Previous versions (V.1)</a></li><li data-nav-id=/about/new-in-v2/ title="What's New (V.2)" class=dd-item><a href=/about/new-in-v2/>What's New (V.2)</a></li><li data-nav-id=/about/release-notes/ title="Release Notes" class=dd-item><a href=/about/release-notes/>Release Notes</a></li><li data-nav-id=/about/license/ title="License (Open Source)" class=dd-item><a href=/about/license/>License (Open Source)</a></li><li data-nav-id=/about/team/ title="The Team" class=dd-item><a href=/about/team/>The Team</a></li></ul></li><li data-nav-id=/getting-started/ title="Getting started with Pi4J" class=dd-item><a href=/getting-started/>Getting started with Pi4J</a><ul><li data-nav-id=/getting-started/set-up-a-new-raspberry-pi/ title="Set up a new Raspberry Pi" class=dd-item><a href=/getting-started/set-up-a-new-raspberry-pi/>Set up a new Raspberry Pi</a></li><li data-nav-id=/getting-started/understanding-the-pins/ title="Understanding the GPIO pins" class=dd-item><a href=/getting-started/understanding-the-pins/>Understanding the GPIO pins</a></li><li data-nav-id=/getting-started/java-development-on-the-raspberry-pi-with-vsc/ title="Java development with VSC" class=dd-item><a href=/getting-started/java-development-on-the-raspberry-pi-with-vsc/>Java development with VSC</a></li><li data-nav-id=/getting-started/developing-on-a-remote-pc/ title="Developing on a remote PC" class=dd-item><a href=/getting-started/developing-on-a-remote-pc/>Developing on a remote PC</a></li><li data-nav-id=/getting-started/minimal-example-application/ title="Minimal example application" class=dd-item><a href=/getting-started/minimal-example-application/>Minimal example application</a></li><li data-nav-id=/getting-started/minimal-example-application-fatjar/ title="Minimal example as FAT JAR" class=dd-item><a href=/getting-started/minimal-example-application-fatjar/>Minimal example as FAT JAR</a></li><li data-nav-id=/getting-started/crowpi/ title="Electronics with CrowPi" class=dd-item><a href=/getting-started/crowpi/>Electronics with CrowPi</a><ul><li data-nav-id=/getting-started/crowpi/crowpi-os/ title="CrowPi OS" class=dd-item><a href=/getting-started/crowpi/crowpi-os/>CrowPi OS</a></li><li data-nav-id=/getting-started/crowpi/develop-with-intellij/ title="Develop with Intellij IDEA" class=dd-item><a href=/getting-started/crowpi/develop-with-intellij/>Develop with Intellij IDEA</a></li></ul></li><li data-nav-id=/getting-started/user-interface-with-javafx/ title="User interface with JavaFX" class=dd-item><a href=/getting-started/user-interface-with-javafx/>User interface with JavaFX</a></li><li data-nav-id=/getting-started/fxgl/ title="Game development with FXGL" class=dd-item><a href=/getting-started/fxgl/>Game development with FXGL</a><ul><li data-nav-id=/getting-started/fxgl/fxgl-to-picade/ title="FXGl to Picade" class=dd-item><a href=/getting-started/fxgl/fxgl-to-picade/>FXGl to Picade</a></li><li data-nav-id=/getting-started/fxgl/kiosk-mode/ title="JavaFX kiosk mode" class=dd-item><a href=/getting-started/fxgl/kiosk-mode/>JavaFX kiosk mode</a></li></ul></li><li data-nav-id=/getting-started/javafx-mvc-template/ title="JavaFX GUI and MVC template" class=dd-item><a href=/getting-started/javafx-mvc-template/>JavaFX GUI and MVC template</a></li><li data-nav-id=/getting-started/learn-more/ title="Learn more..." class=dd-item><a href=/getting-started/learn-more/>Learn more...</a></li></ul></li><li data-nav-id=/documentation/ title=Documentation class="dd-item
parent"><a href=/documentation/>Documentation</a><ul><li data-nav-id=/documentation/pin-numbering/ title="Pin numbering" class=dd-item><a href=/documentation/pin-numbering/>Pin numbering</a></li><li data-nav-id=/documentation/java-installation/ title="Java for ARMv6/7/8" class=dd-item><a href=/documentation/java-installation/>Java for ARMv6/7/8</a></li><li data-nav-id=/documentation/logging/ title="Logging with SLF4J" class=dd-item><a href=/documentation/logging/>Logging with SLF4J</a></li><li data-nav-id=/documentation/create-context/ title="Creating a Pi4J Context" class=dd-item><a href=/documentation/create-context/>Creating a Pi4J Context</a></li><li data-nav-id=/documentation/platforms/ title="Choosing a Platform" class=dd-item><a href=/documentation/platforms/>Choosing a Platform</a><ul><li data-nav-id=/documentation/platforms/raspberry-pi/ title="Raspberry Pi" class=dd-item><a href=/documentation/platforms/raspberry-pi/>Raspberry Pi</a></li></ul></li><li data-nav-id=/documentation/providers/ title="Choosing an I/O Provider" class=dd-item><a href=/documentation/providers/>Choosing an I/O Provider</a><ul><li data-nav-id=/documentation/providers/linuxfs/ title=LinuxFS class=dd-item><a href=/documentation/providers/linuxfs/>LinuxFS</a></li><li data-nav-id=/documentation/providers/pigpio/ title=PiGpio class=dd-item><a href=/documentation/providers/pigpio/>PiGpio</a></li></ul></li><li data-nav-id=/documentation/build-io/ title="Building an I/O Instance" class=dd-item><a href=/documentation/build-io/>Building an I/O Instance</a></li><li data-nav-id=/documentation/io-examples/ title="I/O Examples" class="dd-item
parent"><a href=/documentation/io-examples/>I/O Examples</a><ul><li data-nav-id=/documentation/io-examples/digital-output/ title="Digital Output (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-output/>Digital Output (GPIO)</a></li><li data-nav-id=/documentation/io-examples/digital-input/ title="Digital Input (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-input/>Digital Input (GPIO)</a></li><li data-nav-id=/documentation/io-examples/pwm/ title="Pulse Width Modulation (PWM)" class="dd-item active"><a href=/documentation/io-examples/pwm/>Pulse Width Modulation (PWM)</a></li><li data-nav-id=/documentation/io-examples/i2c/ title="Inter-Integrated Circuit (I²C)" class=dd-item><a href=/documentation/io-examples/i2c/>Inter-Integrated Circuit (I²C)</a><ul><li data-nav-id=/documentation/io-examples/i2c/clock-stretching/ title="I²C Clock Stretching" class=dd-item><a href=/documentation/io-examples/i2c/clock-stretching/>I²C Clock Stretching</a></li></ul></li><li data-nav-id=/documentation/io-examples/spi/ title="Serial Peripheral Interface (SPI)" class=dd-item><a href=/documentation/io-examples/spi/>Serial Peripheral Interface (SPI)</a></li><li data-nav-id=/documentation/io-examples/serial/ title="Serial (UART/RS232)" class=dd-item><a href=/documentation/io-examples/serial/>Serial (UART/RS232)</a></li></ul></li><li data-nav-id=/documentation/device-examples/ title="Devices examples" class=dd-item><a href=/documentation/device-examples/>Devices examples</a><ul><li data-nav-id=/documentation/device-examples/simplebutton/ title="Simple Button" class=dd-item><a href=/documentation/device-examples/simplebutton/>Simple Button</a></li><li data-nav-id=/documentation/device-examples/simpleled/ title="Simple LED" class=dd-item><a href=/documentation/device-examples/simpleled/>Simple LED</a></li><li data-nav-id=/documentation/device-examples/joystick/ title=Joystick class=dd-item><a href=/documentation/device-examples/joystick/>Joystick</a></li></ul></li><li data-nav-id=/documentation/registry/ title="I/O Registry" class=dd-item><a href=/documentation/registry/>I/O Registry</a></li><li data-nav-id=/documentation/shutdown/ title="Shutting down the Pi4J Context" class=dd-item><a href=/documentation/shutdown/>Shutting down the Pi4J Context</a></li><li data-nav-id=/documentation/building/ title="Building and running" class=dd-item><a href=/documentation/building/>Building and running</a><ul><li data-nav-id=/documentation/building/javac/ title="Building with javac" class=dd-item><a href=/documentation/building/javac/>Building with javac</a></li><li data-nav-id=/documentation/building/fat-jar/ title="Build as a FAT JAR with Maven" class=dd-item><a href=/documentation/building/fat-jar/>Build as a FAT JAR with Maven</a></li><li data-nav-id=/documentation/building/modules-maven/ title="Build Java modules with Maven" class=dd-item><a href=/documentation/building/modules-maven/>Build Java modules with Maven</a></li><li data-nav-id=/documentation/building/modules-gradle/ title="Build Java modules with Gradle" class=dd-item><a href=/documentation/building/modules-gradle/>Build Java modules with Gradle</a></li><li data-nav-id=/documentation/building/jbang/ title="Running Pi4J with JBang" class=dd-item><a href=/documentation/building/jbang/>Running Pi4J with JBang</a></li></ul></li></ul></li><li data-nav-id=/architecture/ title=Architecture/Design class=dd-item><a href=/architecture/>Architecture/Design</a><ul><li data-nav-id=/architecture/about-the-code/ title="Project source structure" class=dd-item><a href=/architecture/about-the-code/>Project source structure</a><ul><li data-nav-id=/architecture/about-the-code/download/ title=Download/Install class=dd-item><a href=/architecture/about-the-code/download/>Download/Install</a><ul><li data-nav-id=/architecture/about-the-code/download/direct-download/ title="Direct Download" class=dd-item><a href=/architecture/about-the-code/download/direct-download/>Direct Download</a></li><li data-nav-id=/architecture/about-the-code/download/install/ title=Installation class=dd-item><a href=/architecture/about-the-code/download/install/>Installation</a></li></ul></li><li data-nav-id=/architecture/about-the-code/build-instructions/ title="Build Instructions" class=dd-item><a href=/architecture/about-the-code/build-instructions/>Build Instructions</a></li><li data-nav-id=/architecture/about-the-code/maven-settings/ title="Maven settings" class=dd-item><a href=/architecture/about-the-code/maven-settings/>Maven settings</a></li><li data-nav-id=/architecture/about-the-code/code-styling/ title="Code styling" class=dd-item><a href=/architecture/about-the-code/code-styling/>Code styling</a></li><li data-nav-id=/architecture/about-the-code/hardware-testing/ title="Hardware testing" class=dd-item><a href=/architecture/about-the-code/hardware-testing/>Hardware testing</a></li></ul></li><li data-nav-id=/architecture/advanced/ title=Advanced class=dd-item><a href=/architecture/advanced/>Advanced</a><ul><li data-nav-id=/architecture/advanced/annotated-provisioning/ title="Annotated provisioning" class=dd-item><a href=/architecture/advanced/annotated-provisioning/>Annotated provisioning</a></li><li data-nav-id=/architecture/advanced/dependency-injection/ title="Dependency injection" class=dd-item><a href=/architecture/advanced/dependency-injection/>Dependency injection</a></li><li data-nav-id=/architecture/advanced/library-path/ title="Native Library Path" class=dd-item><a href=/architecture/advanced/library-path/>Native Library Path</a></li><li data-nav-id=/architecture/advanced/plugins/ title=Plug-ins class=dd-item><a href=/architecture/advanced/plugins/>Plug-ins</a></li><li data-nav-id=/architecture/advanced/remote-support/ title="Remote support" class=dd-item><a href=/architecture/advanced/remote-support/>Remote support</a></li><li data-nav-id=/architecture/advanced/3rd-party/ title="Third-Party Integration" class=dd-item><a href=/architecture/advanced/3rd-party/>Third-Party Integration</a></li></ul></li><li data-nav-id=/architecture/pi4j-logo/ title="The Pi4J Logo" class=dd-item><a href=/architecture/pi4j-logo/>The Pi4J Logo</a></li></ul></li><li data-nav-id=/featured-projects/ title="Featured Projects" class=dd-item><a href=/featured-projects/>Featured Projects</a><ul><li data-nav-id=/featured-projects/soft-real-time-plc-written-in-strolch/ title="Soft real time PLC" class=dd-item><a href=/featured-projects/soft-real-time-plc-written-in-strolch/>Soft real time PLC</a></li><li data-nav-id=/featured-projects/pijukebox-by-daniel-martensson/ title=PiJukeBox class=dd-item><a href=/featured-projects/pijukebox-by-daniel-martensson/>PiJukeBox</a></li><li data-nav-id=/featured-projects/cocktail-maker-by-alex9849/ title="Cocktail Maker" class=dd-item><a href=/featured-projects/cocktail-maker-by-alex9849/>Cocktail Maker</a></li><li data-nav-id=/featured-projects/street-artist-robot/ title="Didier the street artist robot" class=dd-item><a href=/featured-projects/street-artist-robot/>Didier the street artist robot</a></li><li data-nav-id=/featured-projects/joystick-game/ title="JMonkeyEngine with Joystick" class=dd-item><a href=/featured-projects/joystick-game/>JMonkeyEngine with Joystick</a></li><li data-nav-id=/featured-projects/sensor-drivers/ title="Sensor drivers" class=dd-item><a href=/featured-projects/sensor-drivers/>Sensor drivers</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://pi4j.com/tags><i class="fas fa-tags"></i>Tags</a></li><li><a class=padding href=https://github.com/Pi4J><i class="fab fa-github"></i>GitHub project</a></li><li><a class=padding href=https://twitter.com/pi4J><i class="fab fa-twitter"></i>Twitter @pi4j</a></li><li><a class=padding href=https://github.com/Pi4J/pi4j-v2/discussions><i class="fab fa-github"></i>Pi4J Forum</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/Pi4J/pi4j.github.io/blob/main/content/documentation/io-examples/pwm.md target=blank><i class="fas fa-code-branch"></i><span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>Welcome to Pi4J</a> > <a href=/documentation/>Documentation</a> > <a href=/documentation/io-examples/>I/O Examples</a> > Pulse Width Modulation (PWM)</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#what-is-it>What is it?</a></li><li><a href=#software-vs-hardware>Software vs. Hardware</a></li><li><a href=#technical-implementation>Technical implementation</a></li><li><a href=#additional-information>Additional Information</a></li><li><a href=#code-example>Code example</a></li></ul></nav></div></div></div></div><div id=head-tags><div class=tags><a class=tag-link href=/tags/pwm>PWM</a></div></div><div id=body-inner><h1>Pulse Width Modulation (PWM)</h1><h2 id=what-is-it>What is it?</h2><p>The abbreviation PWM stands for &ldquo;Pulse Width Modulation&rdquo; and is also often referred
to in German as pulse width modulation or pulse width modulation. This technology
is used, among other things, to control servomotors and is also used, for example,
for the fans of a regular computer.</p><p>With PWM, it is possible to control a component such as a motor no longer purely
binary, i.e. off (0% power) or on (100% power), but to control them almost at will.
The functionality of PWM works in such a way that the component is switched off and
on again and again within a certain period of time.</p><h2 id=software-vs-hardware>Software vs. Hardware</h2><p>Two different types of PWM are available on the Raspberry Pi, specifically a software
and a hardware implementation. Both basically offer the same options, but the software
version cannot achieve precise or particularly fast frequencies.</p><p>The reason for this is that in the software implementation for each individual cycle
(on / off) a new control command must be transmitted from the JVM (Java Virtual Machine)
to the corresponding component, while in the hardware implementation of the Raspberry Pi
notices the desired frequency and regulates it independently directly on the board.</p><p>The Raspberry Pi supports 2 hardware based PWM channels. You can access these two channels
via 2 separate sets of 4 GPIO header pins, but still limited to only 2 channels
(2 unique PWM timing configurations).</p><pre><code>The same PWM channel is available on multiple GPIO. 
The latest frequency and dutycycle setting will be used by all GPIO which share a PWM channel.

The GPIO must be one of the following:

12  PWM channel 0  All models but A and B
13  PWM channel 1  All models but A and B
18  PWM channel 0  All models
19  PWM channel 1  All models but A and B

40  PWM channel 0  Compute module only
41  PWM channel 1  Compute module only
45  PWM channel 1  Compute module only
52  PWM channel 0  Compute module only
53  PWM channel 1  Compute module only
</code></pre><p>As Pi4J is using PiGPIO &ldquo;under the hood&rdquo;, you can take advantage of the additional
PWM functionalities of it. PiGPIO is providing <strong>additional (soft) PWM support to any
of the GPIO pins (0-31) and its using some hardware timing technique to optimize
performance</strong> &mdash; but its not the same as the actual hardware PWM pins natively on the
RaspberryPi. In the Pi4J API, we call this &ldquo;Software&rdquo; PWM and you would need to set
<code>.pwmType(PwmType.SOFTWARE)</code>. We consider this software-based PWM because its being
provided at a software layer, in this case by the PIGPIO library.</p><p>If you need more than 2 PWM pins, use the software PWM functionality, it may be perfectly
fine for your application. If they are not good enough, then you will probably need a
PWM expander board/chip (controlled by I2C/SPI) to provide additional PWM support.</p><h2 id=technical-implementation>Technical implementation</h2><p>For the technical control of a component with PWM, two values must be defined:</p><ul><li>Pulse-pause ratio (English: Duty Cycle): This value defines the ratio between the
switched-on and switched-off status and is represented by a number between 0% and 100%.
A value of 50% means that within one cycle the component is switched on exactly half
the time and then switched off. A value of 25%, on the other hand, would mean that
the component is switched on only a quarter of the time and the component remains
switched off for the remaining three quarters of the cycle.</li><li>Frequency: This value defines how often per second a cycle (on / off) takes place for
this component and is usually specified in the unit Hertz (Hz). With a value of 10Hz,
the component would alternate 10 times between being switched on and switched off in
one second.</li></ul><p>These two values can be controlled via the Pi4J library and are also used internally by this project.</p><h2 id=additional-information>Additional Information</h2><ul><li><a href=https://en.wikipedia.org/wiki/Pulse-width_modulation>Wikipedia on PWM</a></li><li><a href=https://en.wikipedia.org/wiki/Piano_key_frequencies>Wikipedia with audio frequencies</a></li></ul><h2 id=code-example>Code example</h2><p>The following example is an extract of the <a href=/getting-started/crowpi/>CrowPi example project</a> which includes
a component to control a buzzer with PWM.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BuzzerComponent</span> <span style=color:#66d9ef>extends</span> Component <span style=color:#f92672>{</span>

    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>final</span> Pwm pwm<span style=color:#f92672>;</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Creates a new buzzer component with a custom BCM pin.
</span><span style=color:#75715e>     *
</span><span style=color:#75715e>     * @param pi4j    Pi4J context
</span><span style=color:#75715e>     * @param address Custom BCM pin address
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>BuzzerComponent</span><span style=color:#f92672>(</span>Context pi4j<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> address<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>pwm</span> <span style=color:#f92672>=</span> pi4j<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>(</span>buildPwmConfig<span style=color:#f92672>(</span>pi4j<span style=color:#f92672>,</span> address<span style=color:#f92672>));</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Plays a tone with the given frequency in Hz indefinitely.
</span><span style=color:#75715e>     * This method is non-blocking and returns immediately.
</span><span style=color:#75715e>     * A frequency of zero causes the buzzer to play silence.
</span><span style=color:#75715e>     *
</span><span style=color:#75715e>     * @param frequency Frequency in Hz
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>playTone</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> frequency<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        playTone<span style=color:#f92672>(</span>frequency<span style=color:#f92672>,</span> 0<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Plays a tone with the given frequency in Hz for a specific duration.
</span><span style=color:#75715e>     * This method is blocking and will sleep until the specified duration has passed.
</span><span style=color:#75715e>     * A frequency of zero causes the buzzer to play silence.
</span><span style=color:#75715e>     * A duration of zero to play the tone indefinitely and return immediately.
</span><span style=color:#75715e>     *
</span><span style=color:#75715e>     * @param frequency Frequency in Hz
</span><span style=color:#75715e>     * @param duration  Duration in milliseconds
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>playTone</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> frequency<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> duration<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>frequency <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#75715e>// Activate the PWM with a duty cycle of 50% and the given frequency in Hz.
</span><span style=color:#75715e></span>            <span style=color:#75715e>// This causes the buzzer to be on for half of the time during each cycle, resulting in the desired frequency.
</span><span style=color:#75715e></span>            pwm<span style=color:#f92672>.</span><span style=color:#a6e22e>on</span><span style=color:#f92672>(</span>50<span style=color:#f92672>,</span> frequency<span style=color:#f92672>);</span>

            <span style=color:#75715e>// If the duration is larger than zero, the tone should be automatically stopped after the given duration.
</span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>duration <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                sleep<span style=color:#f92672>(</span>duration<span style=color:#f92672>);</span>
                <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>playSilence</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>playSilence</span><span style=color:#f92672>(</span>duration<span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Silences the buzzer and returns immediately.
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>playSilence</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        pwm<span style=color:#f92672>.</span><span style=color:#a6e22e>off</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Silences the buzzer and waits for the given duration.
</span><span style=color:#75715e>     * This method is blocking and will sleep until the specified duration has passed.
</span><span style=color:#75715e>     *
</span><span style=color:#75715e>     * @param duration Duration in milliseconds
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>playSilence</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> duration<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>playSilence</span><span style=color:#f92672>();</span>
        sleep<span style=color:#f92672>(</span>duration<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Returns the created PWM instance for the buzzer
</span><span style=color:#75715e>     *
</span><span style=color:#75715e>     * @return PWM instance
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>protected</span> Pwm <span style=color:#a6e22e>getPwm</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>pwm</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>

    <span style=color:#75715e>/**
</span><span style=color:#75715e>     * Builds a new PWM configuration for the buzzer
</span><span style=color:#75715e>     *
</span><span style=color:#75715e>     * @param pi4j    Pi4J context
</span><span style=color:#75715e>     * @param address BCM pin address
</span><span style=color:#75715e>     * @return PWM configuration
</span><span style=color:#75715e>     */</span>
    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>static</span> PwmConfig <span style=color:#a6e22e>buildPwmConfig</span><span style=color:#f92672>(</span>Context pi4j<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> address<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> Pwm<span style=color:#f92672>.</span><span style=color:#a6e22e>newConfigBuilder</span><span style=color:#f92672>(</span>pi4j<span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;BCM&#34;</span> <span style=color:#f92672>+</span> address<span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Buzzer&#34;</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>address</span><span style=color:#f92672>(</span>address<span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>pwmType</span><span style=color:#f92672>(</span>PwmType<span style=color:#f92672>.</span><span style=color:#a6e22e>HARDWARE</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pigpio-pwm&#34;</span><span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>initial</span><span style=color:#f92672>(</span>0<span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>shutdown</span><span style=color:#f92672>(</span>0<span style=color:#f92672>)</span>
            <span style=color:#f92672>.</span><span style=color:#a6e22e>build</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1650886687></script><script src=/js/perfect-scrollbar.min.js?1650886687></script><script src=/js/perfect-scrollbar.jquery.min.js?1650886687></script><script src=/js/jquery.sticky.js?1650886687></script><script src=/js/featherlight.min.js?1650886687></script><script src=/js/highlight.pack.js?1650886687></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1650886687></script><script src=/js/learn.js?1650886687></script><script src=/js/hugo-learn.js?1650886687></script><script src=/mermaid/mermaid.js?1650886687></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>