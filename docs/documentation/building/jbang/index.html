<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Java IO Library for the Raspberry Pi"><meta name=author content="Pi4J"><link rel=icon href=/assets/favicon.ico type=image/ico><title>Running Pi4J with JBang - Pi4J</title><link href=/css/nucleus.css?1647001464 rel=stylesheet><link href=/css/fontawesome-all.min.css?1647001464 rel=stylesheet><link href=/css/hybrid.css?1647001464 rel=stylesheet><link href=/css/featherlight.min.css?1647001464 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1647001464 rel=stylesheet><link href=/css/auto-complete.css?1647001464 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1647001464 rel=stylesheet><link href=/css/theme.css?1647001464 rel=stylesheet><link href=/css/hugo-theme.css?1647001464 rel=stylesheet><link href=/css/theme-blue.css?1647001464 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1647001464></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/documentation/building/jbang/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/assets/pi4j-header.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1647001464></script><script type=text/javascript src=/js/auto-complete.js?1647001464></script><script type=text/javascript>var baseurl="https:\/\/pi4j.com\/";</script><script type=text/javascript src=/js/search.js?1647001464></script></div><section id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i>Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/about/ title=About class=dd-item><a href=/about/>About</a><ul><li data-nav-id=/about/previous-version-v1/ title="Previous versions (V.1)" class=dd-item><a href=/about/previous-version-v1/>Previous versions (V.1)</a></li><li data-nav-id=/about/new-in-v2/ title="What's New (V.2)" class=dd-item><a href=/about/new-in-v2/>What's New (V.2)</a></li><li data-nav-id=/about/release-notes/ title="Release Notes" class=dd-item><a href=/about/release-notes/>Release Notes</a></li><li data-nav-id=/about/license/ title="License (Open Source)" class=dd-item><a href=/about/license/>License (Open Source)</a></li><li data-nav-id=/about/team/ title="The Team" class=dd-item><a href=/about/team/>The Team</a></li></ul></li><li data-nav-id=/getting-started/ title="Getting started with Pi4J" class=dd-item><a href=/getting-started/>Getting started with Pi4J</a><ul><li data-nav-id=/getting-started/set-up-a-new-raspberry-pi/ title="Set up a new Raspberry Pi" class=dd-item><a href=/getting-started/set-up-a-new-raspberry-pi/>Set up a new Raspberry Pi</a></li><li data-nav-id=/getting-started/understanding-the-pins/ title="Understanding the GPIO pins" class=dd-item><a href=/getting-started/understanding-the-pins/>Understanding the GPIO pins</a></li><li data-nav-id=/getting-started/java-development-on-the-raspberry-pi-with-vsc/ title="Java development with VSC" class=dd-item><a href=/getting-started/java-development-on-the-raspberry-pi-with-vsc/>Java development with VSC</a></li><li data-nav-id=/getting-started/developing-on-a-remote-pc/ title="Developing on a remote PC" class=dd-item><a href=/getting-started/developing-on-a-remote-pc/>Developing on a remote PC</a></li><li data-nav-id=/getting-started/minimal-example-application/ title="Minimal example application" class=dd-item><a href=/getting-started/minimal-example-application/>Minimal example application</a></li><li data-nav-id=/getting-started/minimal-example-application-fatjar/ title="Minimal example as FAT JAR" class=dd-item><a href=/getting-started/minimal-example-application-fatjar/>Minimal example as FAT JAR</a></li><li data-nav-id=/getting-started/crowpi/ title="Electronics with CrowPi" class=dd-item><a href=/getting-started/crowpi/>Electronics with CrowPi</a><ul><li data-nav-id=/getting-started/crowpi/crowpi-os/ title="CrowPi OS" class=dd-item><a href=/getting-started/crowpi/crowpi-os/>CrowPi OS</a></li><li data-nav-id=/getting-started/crowpi/develop-with-intellij/ title="Develop with Intellij IDEA" class=dd-item><a href=/getting-started/crowpi/develop-with-intellij/>Develop with Intellij IDEA</a></li></ul></li><li data-nav-id=/getting-started/user-interface-with-javafx/ title="User interface with JavaFX" class=dd-item><a href=/getting-started/user-interface-with-javafx/>User interface with JavaFX</a></li><li data-nav-id=/getting-started/fxgl/ title="Game development with FXGL" class=dd-item><a href=/getting-started/fxgl/>Game development with FXGL</a><ul><li data-nav-id=/getting-started/fxgl/fxgl-to-picade/ title="FXGl to Picade" class=dd-item><a href=/getting-started/fxgl/fxgl-to-picade/>FXGl to Picade</a></li><li data-nav-id=/getting-started/fxgl/kiosk-mode/ title="JavaFX kiosk mode" class=dd-item><a href=/getting-started/fxgl/kiosk-mode/>JavaFX kiosk mode</a></li></ul></li><li data-nav-id=/getting-started/javafx-mvc-template/ title="JavaFX GUI and MVC template" class=dd-item><a href=/getting-started/javafx-mvc-template/>JavaFX GUI and MVC template</a></li><li data-nav-id=/getting-started/learn-more/ title="Learn more..." class=dd-item><a href=/getting-started/learn-more/>Learn more...</a></li></ul></li><li data-nav-id=/documentation/ title=Documentation class="dd-item
parent"><a href=/documentation/>Documentation</a><ul><li data-nav-id=/documentation/pin-numbering/ title="Pin numbering" class=dd-item><a href=/documentation/pin-numbering/>Pin numbering</a></li><li data-nav-id=/documentation/java-installation/ title="Java for ARMv6/7/8" class=dd-item><a href=/documentation/java-installation/>Java for ARMv6/7/8</a></li><li data-nav-id=/documentation/logging/ title="Logging with SLF4J" class=dd-item><a href=/documentation/logging/>Logging with SLF4J</a></li><li data-nav-id=/documentation/create-context/ title="Creating a Pi4J Context" class=dd-item><a href=/documentation/create-context/>Creating a Pi4J Context</a></li><li data-nav-id=/documentation/platforms/ title="Choosing a Platform" class=dd-item><a href=/documentation/platforms/>Choosing a Platform</a><ul><li data-nav-id=/documentation/platforms/raspberry-pi/ title="Raspberry Pi" class=dd-item><a href=/documentation/platforms/raspberry-pi/>Raspberry Pi</a></li></ul></li><li data-nav-id=/documentation/providers/ title="Choosing an I/O Provider" class=dd-item><a href=/documentation/providers/>Choosing an I/O Provider</a><ul><li data-nav-id=/documentation/providers/linuxfs/ title=LinuxFS class=dd-item><a href=/documentation/providers/linuxfs/>LinuxFS</a></li><li data-nav-id=/documentation/providers/pigpio/ title=PiGpio class=dd-item><a href=/documentation/providers/pigpio/>PiGpio</a></li></ul></li><li data-nav-id=/documentation/build-io/ title="Building an I/O Instance" class=dd-item><a href=/documentation/build-io/>Building an I/O Instance</a></li><li data-nav-id=/documentation/io-examples/ title="I/O Examples" class=dd-item><a href=/documentation/io-examples/>I/O Examples</a><ul><li data-nav-id=/documentation/io-examples/digital-output/ title="Digital Output (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-output/>Digital Output (GPIO)</a></li><li data-nav-id=/documentation/io-examples/digital-input/ title="Digital Input (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-input/>Digital Input (GPIO)</a></li><li data-nav-id=/documentation/io-examples/pwm/ title="Pulse Width Modulation (PWM)" class=dd-item><a href=/documentation/io-examples/pwm/>Pulse Width Modulation (PWM)</a></li><li data-nav-id=/documentation/io-examples/i2c/ title="Inter-Integrated Circuit (I²C)" class=dd-item><a href=/documentation/io-examples/i2c/>Inter-Integrated Circuit (I²C)</a><ul><li data-nav-id=/documentation/io-examples/i2c/clock-stretching/ title="I²C Clock Stretching" class=dd-item><a href=/documentation/io-examples/i2c/clock-stretching/>I²C Clock Stretching</a></li></ul></li><li data-nav-id=/documentation/io-examples/spi/ title="Serial Peripheral Interface (SPI)" class=dd-item><a href=/documentation/io-examples/spi/>Serial Peripheral Interface (SPI)</a></li><li data-nav-id=/documentation/io-examples/serial/ title="Serial (UART/RS232)" class=dd-item><a href=/documentation/io-examples/serial/>Serial (UART/RS232)</a></li></ul></li><li data-nav-id=/documentation/device-examples/ title="Devices examples" class=dd-item><a href=/documentation/device-examples/>Devices examples</a></li><li data-nav-id=/documentation/registry/ title="I/O Registry" class=dd-item><a href=/documentation/registry/>I/O Registry</a></li><li data-nav-id=/documentation/shutdown/ title="Shutting down the Pi4J Context" class=dd-item><a href=/documentation/shutdown/>Shutting down the Pi4J Context</a></li><li data-nav-id=/documentation/building/ title="Building and running" class="dd-item
parent"><a href=/documentation/building/>Building and running</a><ul><li data-nav-id=/documentation/building/javac/ title="Building with javac" class=dd-item><a href=/documentation/building/javac/>Building with javac</a></li><li data-nav-id=/documentation/building/fat-jar/ title="Build as a FAT JAR with Maven" class=dd-item><a href=/documentation/building/fat-jar/>Build as a FAT JAR with Maven</a></li><li data-nav-id=/documentation/building/modules-maven/ title="Build Java modules with Maven" class=dd-item><a href=/documentation/building/modules-maven/>Build Java modules with Maven</a></li><li data-nav-id=/documentation/building/modules-gradle/ title="Build Java modules with Gradle" class=dd-item><a href=/documentation/building/modules-gradle/>Build Java modules with Gradle</a></li><li data-nav-id=/documentation/building/jbang/ title="Running Pi4J with JBang" class="dd-item active"><a href=/documentation/building/jbang/>Running Pi4J with JBang</a></li></ul></li></ul></li><li data-nav-id=/architecture/ title=Architecture/Design class=dd-item><a href=/architecture/>Architecture/Design</a><ul><li data-nav-id=/architecture/about-the-code/ title="Project source structure" class=dd-item><a href=/architecture/about-the-code/>Project source structure</a><ul><li data-nav-id=/architecture/about-the-code/download/ title=Download/Install class=dd-item><a href=/architecture/about-the-code/download/>Download/Install</a><ul><li data-nav-id=/architecture/about-the-code/download/direct-download/ title="Direct Download" class=dd-item><a href=/architecture/about-the-code/download/direct-download/>Direct Download</a></li><li data-nav-id=/architecture/about-the-code/download/install/ title=Installation class=dd-item><a href=/architecture/about-the-code/download/install/>Installation</a></li></ul></li><li data-nav-id=/architecture/about-the-code/build-instructions/ title="Build Instructions" class=dd-item><a href=/architecture/about-the-code/build-instructions/>Build Instructions</a></li><li data-nav-id=/architecture/about-the-code/maven-settings/ title="Maven settings" class=dd-item><a href=/architecture/about-the-code/maven-settings/>Maven settings</a></li><li data-nav-id=/architecture/about-the-code/code-styling/ title="Code styling" class=dd-item><a href=/architecture/about-the-code/code-styling/>Code styling</a></li><li data-nav-id=/architecture/about-the-code/hardware-testing/ title="Hardware testing" class=dd-item><a href=/architecture/about-the-code/hardware-testing/>Hardware testing</a></li></ul></li><li data-nav-id=/architecture/advanced/ title=Advanced class=dd-item><a href=/architecture/advanced/>Advanced</a><ul><li data-nav-id=/architecture/advanced/annotated-provisioning/ title="Annotated provisioning" class=dd-item><a href=/architecture/advanced/annotated-provisioning/>Annotated provisioning</a></li><li data-nav-id=/architecture/advanced/dependency-injection/ title="Dependency injection" class=dd-item><a href=/architecture/advanced/dependency-injection/>Dependency injection</a></li><li data-nav-id=/architecture/advanced/library-path/ title="Native Library Path" class=dd-item><a href=/architecture/advanced/library-path/>Native Library Path</a></li><li data-nav-id=/architecture/advanced/plugins/ title=Plug-ins class=dd-item><a href=/architecture/advanced/plugins/>Plug-ins</a></li><li data-nav-id=/architecture/advanced/remote-support/ title="Remote support" class=dd-item><a href=/architecture/advanced/remote-support/>Remote support</a></li><li data-nav-id=/architecture/advanced/3rd-party/ title="Third-Party Integration" class=dd-item><a href=/architecture/advanced/3rd-party/>Third-Party Integration</a></li></ul></li><li data-nav-id=/architecture/pi4j-logo/ title="The Pi4J Logo" class=dd-item><a href=/architecture/pi4j-logo/>The Pi4J Logo</a></li></ul></li><li data-nav-id=/featured-projects/ title="Featured Projects" class=dd-item><a href=/featured-projects/>Featured Projects</a><ul><li data-nav-id=/featured-projects/soft-real-time-plc-written-in-strolch/ title="Soft real time PLC" class=dd-item><a href=/featured-projects/soft-real-time-plc-written-in-strolch/>Soft real time PLC</a></li><li data-nav-id=/featured-projects/pijukebox-by-daniel-martensson/ title=PiJukeBox class=dd-item><a href=/featured-projects/pijukebox-by-daniel-martensson/>PiJukeBox</a></li><li data-nav-id=/featured-projects/cocktail-maker-by-alex9849/ title="Cocktail Maker" class=dd-item><a href=/featured-projects/cocktail-maker-by-alex9849/>Cocktail Maker</a></li><li data-nav-id=/featured-projects/street-artist-robot/ title="Didier the street artist robot" class=dd-item><a href=/featured-projects/street-artist-robot/>Didier the street artist robot</a></li><li data-nav-id=/featured-projects/joystick-game/ title="JMonkeyEngine with Joystick" class=dd-item><a href=/featured-projects/joystick-game/>JMonkeyEngine with Joystick</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://pi4j.com/tags><i class="fas fa-tags"></i>Tags</a></li><li><a class=padding href=https://github.com/Pi4J><i class="fab fa-github"></i>GitHub project</a></li><li><a class=padding href=https://twitter.com/pi4J><i class="fab fa-twitter"></i>Twitter @pi4j</a></li><li><a class=padding href=https://github.com/Pi4J/pi4j-v2/discussions><i class="fab fa-github"></i>Pi4J Forum</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/Pi4J/pi4j.github.io/blob/main/content/documentation/building/jbang.md target=blank><i class="fas fa-code-branch"></i><span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>Welcome to Pi4J</a> > <a href=/documentation/>Documentation</a> > <a href=/documentation/building/>Building and running</a> > Running Pi4J with JBang</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#what-is-jbang>What is JBang?</a></li><li><a href=#video>Video</a></li><li><a href=#prepare-a-raspberry-pi>Prepare a Raspberry Pi</a></li><li><a href=#installing-jbang>Installing JBang</a></li><li><a href=#minimal-jbang-example>Minimal JBang example</a></li><li><a href=#jbang-pi4j-example>JBang Pi4J example</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div id=head-tags><div class=tags><a class=tag-link href=/tags/jbang>JBang</a></div></div><div id=body-inner><h1>Running Pi4J with JBang</h1><div class="notices note"><p>JBang project website: <a href=https://www.jbang.dev/>https://www.jbang.dev/</a></p></div><h2 id=what-is-jbang>What is JBang?</h2><p>As described on their website:</p><p><em>JBang lets Students, Educators and Professional Developers create, edit and run self-contained source-only Java programs with unprecedented ease.</em></p><p><em>Want to learn, explore or use Java instantly without setup ?
Do you like Java but use python, groovy, kotlin or similar languages for scripts, experimentation and exploration ?
Ever wanted to just be able to run Java from anywhere without any or very minimal setup ? Ever tried out Java 11+ support
for running .java files directly in your shell but felt it was a bit too cumbersome ?</em></p><p><em>JBang lets you do all this!</em></p><h2 id=video>Video</h2><p>This video shows you all the steps described further on this page.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/33CWAN1dQvA style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h2 id=prepare-a-raspberry-pi>Prepare a Raspberry Pi</h2><p>For this manual you can use the following approach:</p><ul><li>Grab an SD card (minimum 8Gb)</li><li>Use the Raspberry Pi Imager tool to write the &ldquo;Raspberry Pi OS (32-bit)&rdquo; to this SD card</li><li>Push the SD card into your Raspberry Pi board</li><li>Power up and wait until the OS has booted (it will probably restart once to resize the partition on the SD card to the maximum available size)</li><li>Open a terminal and confirm Java is not available yet (except if you selected the &ldquo;Raspberry Pi OS Full (32-bit)&rdquo; version)</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ java -version
bash: java: command not found
</code></pre></div><h2 id=installing-jbang>Installing JBang</h2><p>As described on <a href=https://www.jbang.dev/download/>jbang.dev/download</a> installing JBang is enough to get started,
even if you don&rsquo;t have Java installed already, as JBang will also take care of this.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ curl -Ls https://sh.jbang.dev | bash -s - app setup
$ java -version
openjdk version <span style=color:#e6db74>&#34;11.0.14&#34;</span> 2022-01-18
OpenJDK Runtime Environment Temurin-11.0.14+9 <span style=color:#f92672>(</span>build 11.0.14+9<span style=color:#f92672>)</span>
OpenJDK Server VM Temurin-11.0.14+9 <span style=color:#f92672>(</span>build 11.0.14+9, mixed mode<span style=color:#f92672>)</span>
</code></pre></div><h2 id=minimal-jbang-example>Minimal JBang example</h2><p>A minimal JBang Java-file looks like the following code block, take note of the special first line that tricks the system
to run this as a script while still being valid Java-code.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>///usr/bin/env jbang &#34;$0&#34; &#34;$@&#34; ; exit $? 
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HelloWorld</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>args<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>==</span>0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Hello World!&#34;</span><span style=color:#f92672>);</span>
        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Hello &#34;</span> <span style=color:#f92672>+</span> args<span style=color:#f92672>[</span>0<span style=color:#f92672>]);</span>
        <span style=color:#f92672>}</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>By saving this file as <code>HelloWorld.java</code> it can be started with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ jbang HelloWorld.java
Hello World!
</code></pre></div><h2 id=jbang-pi4j-example>JBang Pi4J example</h2><p>If your project needs dependencies - which is the case for a Pi4J project - you can <a href=https://www.jbang.dev/documentation/guide/latest/dependencies.html>define them in the java-file with the
following gradle-style locators format</a>, for example:
<code>//DEPS com.pi4j:pi4j-core:2.1.1</code>.</p><p>The following example is based on the <a href=/getting-started/minimal-example-application/>&ldquo;Minimal example application&rdquo;</a>, and uses
the same wiring with a button and LED. By using JBang we can run this project with a single file without the need of a full
Maven or Gradle project, or compiling the Java code.</p><p>Create a new file <code>JBangPi4JExample.java</code> with the following content:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>///usr/bin/env jbang &#34;$0&#34; &#34;$@&#34; ; exit $?
</span><span style=color:#75715e>//DEPS org.slf4j:slf4j-api:1.7.35
</span><span style=color:#75715e>//DEPS org.slf4j:slf4j-simple:1.7.35
</span><span style=color:#75715e>//DEPS com.pi4j:pi4j-core:2.1.1
</span><span style=color:#75715e>//DEPS com.pi4j:pi4j-plugin-raspberrypi:2.1.1
</span><span style=color:#75715e>//DEPS com.pi4j:pi4j-plugin-pigpio:2.1.1
</span><span style=color:#75715e></span>
<span style=color:#f92672>import</span> com.pi4j.Pi4J<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> com.pi4j.io.gpio.digital.DigitalInput<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> com.pi4j.io.gpio.digital.DigitalOutput<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> com.pi4j.io.gpio.digital.DigitalState<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> com.pi4j.io.gpio.digital.PullResistance<span style=color:#f92672>;</span>
<span style=color:#f92672>import</span> com.pi4j.util.Console<span style=color:#f92672>;</span>

<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>JBangPi4JExample</span> <span style=color:#f92672>{</span>

    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> PIN_BUTTON <span style=color:#f92672>=</span> 24<span style=color:#f92672>;</span> <span style=color:#75715e>// PIN 18 = BCM 24
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> PIN_LED <span style=color:#f92672>=</span> 22<span style=color:#f92672>;</span> <span style=color:#75715e>// PIN 15 = BCM 22
</span><span style=color:#75715e></span>
    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> pressCount <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
    
    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>

        <span style=color:#66d9ef>final</span> var console <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Console<span style=color:#f92672>();</span>
        
        var pi4j <span style=color:#f92672>=</span> Pi4J<span style=color:#f92672>.</span><span style=color:#a6e22e>newAutoContext</span><span style=color:#f92672>();</span>
        
        var ledConfig <span style=color:#f92672>=</span> DigitalOutput<span style=color:#f92672>.</span><span style=color:#a6e22e>newConfigBuilder</span><span style=color:#f92672>(</span>pi4j<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;led&#34;</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;LED Flasher&#34;</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>address</span><span style=color:#f92672>(</span>PIN_LED<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>shutdown</span><span style=color:#f92672>(</span>DigitalState<span style=color:#f92672>.</span><span style=color:#a6e22e>LOW</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>initial</span><span style=color:#f92672>(</span>DigitalState<span style=color:#f92672>.</span><span style=color:#a6e22e>LOW</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pigpio-digital-output&#34;</span><span style=color:#f92672>);</span>
        var led <span style=color:#f92672>=</span> pi4j<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>(</span>ledConfig<span style=color:#f92672>);</span>

        var buttonConfig <span style=color:#f92672>=</span> DigitalInput<span style=color:#f92672>.</span><span style=color:#a6e22e>newConfigBuilder</span><span style=color:#f92672>(</span>pi4j<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;button&#34;</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Press button&#34;</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>address</span><span style=color:#f92672>(</span>PIN_BUTTON<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>pull</span><span style=color:#f92672>(</span>PullResistance<span style=color:#f92672>.</span><span style=color:#a6e22e>PULL_DOWN</span><span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>debounce</span><span style=color:#f92672>(</span>3000L<span style=color:#f92672>)</span>
                <span style=color:#f92672>.</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pigpio-digital-input&#34;</span><span style=color:#f92672>);</span>
        var button <span style=color:#f92672>=</span> pi4j<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>(</span>buttonConfig<span style=color:#f92672>);</span>
        button<span style=color:#f92672>.</span><span style=color:#a6e22e>addListener</span><span style=color:#f92672>(</span>e <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>e<span style=color:#f92672>.</span><span style=color:#a6e22e>state</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> DigitalState<span style=color:#f92672>.</span><span style=color:#a6e22e>LOW</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
                pressCount<span style=color:#f92672>++;</span>
                console<span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Button was pressed for the &#34;</span> <span style=color:#f92672>+</span> pressCount <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;th time&#34;</span><span style=color:#f92672>);</span>
            <span style=color:#f92672>}</span>
        <span style=color:#f92672>});</span>

        <span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span>pressCount <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>led<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>DigitalState<span style=color:#f92672>.</span><span style=color:#a6e22e>HIGH</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
                console<span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;LED low&#34;</span><span style=color:#f92672>);</span>
                led<span style=color:#f92672>.</span><span style=color:#a6e22e>low</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
                console<span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;LED high&#34;</span><span style=color:#f92672>);</span>
                led<span style=color:#f92672>.</span><span style=color:#a6e22e>high</span><span style=color:#f92672>();</span>
            <span style=color:#f92672>}</span>
            Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>500 <span style=color:#f92672>/</span> <span style=color:#f92672>(</span>pressCount <span style=color:#f92672>+</span> 1<span style=color:#f92672>));</span>
        <span style=color:#f92672>}</span>
        
        pi4j<span style=color:#f92672>.</span><span style=color:#a6e22e>shutdown</span><span style=color:#f92672>();</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>Without the need of any further configuration, installation, dependency download, or compiling, we should now be able to run this code with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ jbang JBangPi4JExample.java

<span style=color:#f92672>[</span>jbang<span style=color:#f92672>]</span> Building jar...

<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.Pi4J - New auto context
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.Pi4J - New context builder
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.platform.impl.DefaultRuntimePlatforms - adding platform to managed platform map <span style=color:#f92672>[</span>id<span style=color:#f92672>=</span>raspberrypi; name<span style=color:#f92672>=</span>RaspberryPi Platform; priority<span style=color:#f92672>=</span>5; class<span style=color:#f92672>=</span>com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform<span style=color:#f92672>]</span>
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> WARN com.pi4j.library.pigpio.impl.PiGpioNativeImpl - PIGPIO ERROR: PI_INIT_FAILED; pigpio initialisation failed
</code></pre></div><p>Auch, an error&mldr;?! But this is a known one! At this moment, PiGpio - the underlying native library which interacts with the GPIOs -
needs to be called as <code>sudo</code>. This is not ideal, and we are investigating how we can rework this. But with some additional
steps this can be fixed easily!</p><p>First we need to find out where JBang is installed for our current user with <code>which jbang</code>. This full path can be used to start
JBang from that location, instead of the shortcut <code>jbang</code> that was automatically created by JBang for the <code>pi</code> user (in this case).
As Java was installed by JBang for the <code>pi</code> user, it needs to do this again for the <code>sudo</code> user, but also this is handled
automatically again by JBang.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ which jbang
/home/pi/.jbang/bin/jbang

$ sudo /home/pi/.jbang/bin/jbang JBangPi4JExample.java
Downloading JDK 11. Be patient, this can take several minutes...

<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.Pi4J - New auto context
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.Pi4J - New context builder
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.platform.impl.DefaultRuntimePlatforms - adding platform to managed platform map <span style=color:#f92672>[</span>id<span style=color:#f92672>=</span>raspberrypi; name<span style=color:#f92672>=</span>RaspberryPi Platform; priority<span style=color:#f92672>=</span>5; class<span style=color:#f92672>=</span>com.pi4j.plugin.raspberrypi.platform.RaspberryPiPlatform<span style=color:#f92672>]</span>
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED high
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED low
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED low
<span style=color:#f92672>[</span>Thread-0<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - Button was pressed <span style=color:#66d9ef>for</span> the 1th time
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED high
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED low
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED high
<span style=color:#f92672>[</span>Thread-2<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - Button was pressed <span style=color:#66d9ef>for</span> the 2th time
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED low
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED high
...
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED high
<span style=color:#f92672>[</span>main<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - LED low
<span style=color:#f92672>[</span>Thread-8<span style=color:#f92672>]</span> INFO com.pi4j.util.Console - Button was pressed <span style=color:#66d9ef>for</span> the 5th time
</code></pre></div><p>Yep, we have a working example, with dependencies, without the need to compile anything!</p><p>And both commands can even be combined to make things even more easy, allowing you to start the application simply with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>$ sudo <span style=color:#e6db74>`</span>which jbang<span style=color:#e6db74>`</span> JBangPi4JExample.java
</code></pre></div><h2 id=conclusion>Conclusion</h2><p>JBang is a great way to run single-file Java-files, and helps you to quickly get started with Pi4J on the Raspberry Pi,
and can be the ideal getting-started method to experiment with electronics and Java.</p><p>Thanks to <a href=https://twitter.com/maxandersen>Max Rydahl Andersen</a> and the many contributors for creating JBang and to
propose the <a href=https://github.com/jbangdev/jbang/discussions/1229>solution how <code>sudo</code> can be combined with JBang</a>.</p><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1647001464></script><script src=/js/perfect-scrollbar.min.js?1647001464></script><script src=/js/perfect-scrollbar.jquery.min.js?1647001464></script><script src=/js/jquery.sticky.js?1647001464></script><script src=/js/featherlight.min.js?1647001464></script><script src=/js/highlight.pack.js?1647001464></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1647001464></script><script src=/js/learn.js?1647001464></script><script src=/js/hugo-learn.js?1647001464></script><script src=/mermaid/mermaid.js?1647001464></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>