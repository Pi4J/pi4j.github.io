<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Java IO Library for the Raspberry Pi"><meta name=author content="Pi4J"><link rel=icon href=/assets/favicon.ico type=image/ico><title>JavaFX kiosk mode - Pi4J</title><link href=/css/nucleus.css?1630310370 rel=stylesheet><link href=/css/fontawesome-all.min.css?1630310370 rel=stylesheet><link href=/css/hybrid.css?1630310370 rel=stylesheet><link href=/css/featherlight.min.css?1630310370 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1630310370 rel=stylesheet><link href=/css/auto-complete.css?1630310370 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1630310370 rel=stylesheet><link href=/css/theme.css?1630310370 rel=stylesheet><link href=/css/hugo-theme.css?1630310370 rel=stylesheet><link href=/css/theme-blue.css?1630310370 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1630310370></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/getting-started/fxgl/kiosk-mode/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/assets/pi4j-logo.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1630310370></script><script type=text/javascript src=/js/auto-complete.js?1630310370></script><script type=text/javascript>var baseurl="https:\/\/pi4j.com\/";</script><script type=text/javascript src=/js/search.js?1630310370></script></div><section id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i>Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/about/ title=About class=dd-item><a href=/about/>About</a><ul><li data-nav-id=/about/previous-version-v1/ title="Previous versions (V.1)" class=dd-item><a href=/about/previous-version-v1/>Previous versions (V.1)</a></li><li data-nav-id=/about/new-in-v2/ title="What's New (V.2)" class=dd-item><a href=/about/new-in-v2/>What's New (V.2)</a></li><li data-nav-id=/about/release-notes/ title="Release Notes" class=dd-item><a href=/about/release-notes/>Release Notes</a></li><li data-nav-id=/about/license/ title="License (Open Source)" class=dd-item><a href=/about/license/>License (Open Source)</a></li><li data-nav-id=/about/team/ title="The Team" class=dd-item><a href=/about/team/>The Team</a></li></ul></li><li data-nav-id=/getting-started/ title="Getting started with Pi4J" class="dd-item
parent"><a href=/getting-started/>Getting started with Pi4J</a><ul><li data-nav-id=/getting-started/set-up-a-new-raspberry-pi/ title="Set up a new Raspberry Pi" class=dd-item><a href=/getting-started/set-up-a-new-raspberry-pi/>Set up a new Raspberry Pi</a></li><li data-nav-id=/getting-started/understanding-the-pins/ title="Understanding the GPIO pins" class=dd-item><a href=/getting-started/understanding-the-pins/>Understanding the GPIO pins</a></li><li data-nav-id=/getting-started/java-development-on-the-raspberry-pi-with-vsc/ title="Java development with VSC" class=dd-item><a href=/getting-started/java-development-on-the-raspberry-pi-with-vsc/>Java development with VSC</a></li><li data-nav-id=/getting-started/developing-on-a-remote-pc/ title="Developing on a remote PC" class=dd-item><a href=/getting-started/developing-on-a-remote-pc/>Developing on a remote PC</a></li><li data-nav-id=/getting-started/minimal-example-application/ title="Minimal example application" class=dd-item><a href=/getting-started/minimal-example-application/>Minimal example application</a></li><li data-nav-id=/getting-started/crowpi/ title="Electronics with CrowPi" class=dd-item><a href=/getting-started/crowpi/>Electronics with CrowPi</a><ul><li data-nav-id=/getting-started/crowpi/crowpi-os/ title="CrowPi OS" class=dd-item><a href=/getting-started/crowpi/crowpi-os/>CrowPi OS</a></li><li data-nav-id=/getting-started/crowpi/develop-with-intellij/ title="Develop with Intellij IDEA" class=dd-item><a href=/getting-started/crowpi/develop-with-intellij/>Develop with Intellij IDEA</a></li></ul></li><li data-nav-id=/getting-started/user-interface-with-javafx/ title="User interface with JavaFX" class=dd-item><a href=/getting-started/user-interface-with-javafx/>User interface with JavaFX</a></li><li data-nav-id=/getting-started/fxgl/ title="Game development with FXGL" class="dd-item
parent"><a href=/getting-started/fxgl/>Game development with FXGL</a><ul><li data-nav-id=/getting-started/fxgl/fxgl-to-picade/ title="FXGl to Picade" class=dd-item><a href=/getting-started/fxgl/fxgl-to-picade/>FXGl to Picade</a></li><li data-nav-id=/getting-started/fxgl/kiosk-mode/ title="JavaFX kiosk mode" class="dd-item active"><a href=/getting-started/fxgl/kiosk-mode/>JavaFX kiosk mode</a></li></ul></li><li data-nav-id=/getting-started/learn-more/ title="Learn more..." class=dd-item><a href=/getting-started/learn-more/>Learn more...</a></li></ul></li><li data-nav-id=/documentation/ title=Documentation class=dd-item><a href=/documentation/>Documentation</a><ul><li data-nav-id=/documentation/pin-numbering/ title="Pin numbering" class=dd-item><a href=/documentation/pin-numbering/>Pin numbering</a></li><li data-nav-id=/documentation/java-installation/ title="Java for ARMv6/7/8" class=dd-item><a href=/documentation/java-installation/>Java for ARMv6/7/8</a></li><li data-nav-id=/documentation/logging/ title="Logging with SLF4J" class=dd-item><a href=/documentation/logging/>Logging with SLF4J</a></li><li data-nav-id=/documentation/create-context/ title="Creating a Pi4J Context" class=dd-item><a href=/documentation/create-context/>Creating a Pi4J Context</a></li><li data-nav-id=/documentation/platforms/ title="Choosing a Platform" class=dd-item><a href=/documentation/platforms/>Choosing a Platform</a><ul><li data-nav-id=/documentation/platforms/raspberry-pi/ title="Raspberry Pi" class=dd-item><a href=/documentation/platforms/raspberry-pi/>Raspberry Pi</a></li></ul></li><li data-nav-id=/documentation/providers/ title="Choosing an I/O Provider" class=dd-item><a href=/documentation/providers/>Choosing an I/O Provider</a><ul><li data-nav-id=/documentation/providers/linuxfs/ title=LinuxFS class=dd-item><a href=/documentation/providers/linuxfs/>LinuxFS</a></li><li data-nav-id=/documentation/providers/pigpio/ title=PiGpio class=dd-item><a href=/documentation/providers/pigpio/>PiGpio</a></li></ul></li><li data-nav-id=/documentation/build-io/ title="Building an I/O Instance" class=dd-item><a href=/documentation/build-io/>Building an I/O Instance</a></li><li data-nav-id=/documentation/io-events/ title="Listening for I/O Events" class=dd-item><a href=/documentation/io-events/>Listening for I/O Events</a></li><li data-nav-id=/documentation/io-examples/ title="I/O Examples" class=dd-item><a href=/documentation/io-examples/>I/O Examples</a><ul><li data-nav-id=/documentation/io-examples/digital-output/ title="Digital Output (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-output/>Digital Output (GPIO)</a></li><li data-nav-id=/documentation/io-examples/digital-input/ title="Digital Input (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-input/>Digital Input (GPIO)</a></li><li data-nav-id=/documentation/io-examples/pwm/ title="Pulse Width Modulation (PWM)" class=dd-item><a href=/documentation/io-examples/pwm/>Pulse Width Modulation (PWM)</a></li><li data-nav-id=/documentation/io-examples/i2c/ title="Inter-Integrated Circuit (I²C)" class=dd-item><a href=/documentation/io-examples/i2c/>Inter-Integrated Circuit (I²C)</a></li><li data-nav-id=/documentation/io-examples/spi/ title="Serial Peripheral Interface (SPI)" class=dd-item><a href=/documentation/io-examples/spi/>Serial Peripheral Interface (SPI)</a></li><li data-nav-id=/documentation/io-examples/serial/ title="Serial (UART/RS232)" class=dd-item><a href=/documentation/io-examples/serial/>Serial (UART/RS232)</a></li></ul></li><li data-nav-id=/documentation/device-examples/ title="Devices examples" class=dd-item><a href=/documentation/device-examples/>Devices examples</a></li><li data-nav-id=/documentation/registry/ title="I/O Registry" class=dd-item><a href=/documentation/registry/>I/O Registry</a></li><li data-nav-id=/documentation/shutdown/ title="Shutting down the Pi4J Context" class=dd-item><a href=/documentation/shutdown/>Shutting down the Pi4J Context</a></li></ul></li><li data-nav-id=/architecture/ title=Architecture/Design class=dd-item><a href=/architecture/>Architecture/Design</a><ul><li data-nav-id=/architecture/about-the-code/ title="Project source structure" class=dd-item><a href=/architecture/about-the-code/>Project source structure</a><ul><li data-nav-id=/architecture/about-the-code/download/ title=Download/Install class=dd-item><a href=/architecture/about-the-code/download/>Download/Install</a><ul><li data-nav-id=/architecture/about-the-code/download/direct-download/ title="Direct Download" class=dd-item><a href=/architecture/about-the-code/download/direct-download/>Direct Download</a></li><li data-nav-id=/architecture/about-the-code/download/repository/ title="Maven Repository" class=dd-item><a href=/architecture/about-the-code/download/repository/>Maven Repository</a></li><li data-nav-id=/architecture/about-the-code/download/install/ title=Installation class=dd-item><a href=/architecture/about-the-code/download/install/>Installation</a></li></ul></li><li data-nav-id=/architecture/about-the-code/build-instructions/ title="Build Instructions" class=dd-item><a href=/architecture/about-the-code/build-instructions/>Build Instructions</a></li><li data-nav-id=/architecture/about-the-code/maven-settings/ title="Maven settings" class=dd-item><a href=/architecture/about-the-code/maven-settings/>Maven settings</a></li><li data-nav-id=/architecture/about-the-code/code-styling/ title="Code styling" class=dd-item><a href=/architecture/about-the-code/code-styling/>Code styling</a></li><li data-nav-id=/architecture/about-the-code/hardware-testing/ title="Hardware testing" class=dd-item><a href=/architecture/about-the-code/hardware-testing/>Hardware testing</a></li></ul></li><li data-nav-id=/architecture/advanced/ title=Advanced class=dd-item><a href=/architecture/advanced/>Advanced</a><ul><li data-nav-id=/architecture/advanced/annotated-provisioning/ title="Annotated provisioning" class=dd-item><a href=/architecture/advanced/annotated-provisioning/>Annotated provisioning</a></li><li data-nav-id=/architecture/advanced/dependency-injection/ title="Dependency injection" class=dd-item><a href=/architecture/advanced/dependency-injection/>Dependency injection</a></li><li data-nav-id=/architecture/advanced/library-path/ title="Native Library Path" class=dd-item><a href=/architecture/advanced/library-path/>Native Library Path</a></li><li data-nav-id=/architecture/advanced/plugins/ title=Plug-ins class=dd-item><a href=/architecture/advanced/plugins/>Plug-ins</a></li><li data-nav-id=/architecture/advanced/remote-support/ title="Remote support" class=dd-item><a href=/architecture/advanced/remote-support/>Remote support</a></li><li data-nav-id=/architecture/advanced/3rd-party/ title="Third-Party Integration" class=dd-item><a href=/architecture/advanced/3rd-party/>Third-Party Integration</a></li></ul></li></ul></li><li data-nav-id=/featured-projects/ title="Featured Projects" class=dd-item><a href=/featured-projects/>Featured Projects</a><ul><li data-nav-id=/featured-projects/soft-real-time-plc-written-in-strolch/ title="Soft real time PLC with Strolch" class=dd-item><a href=/featured-projects/soft-real-time-plc-written-in-strolch/>Soft real time PLC with Strolch</a></li><li data-nav-id=/featured-projects/pijukebox-by-daniel-martensson/ title="PiJukeBox by Daniel Mårtensson" class=dd-item><a href=/featured-projects/pijukebox-by-daniel-martensson/>PiJukeBox by Daniel Mårtensson</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://pi4j.com/tags><i class="fas fa-tags"></i>Tags</a></li><li><a class=padding href=https://github.com/Pi4J><i class="fab fa-github"></i>GitHub project</a></li><li><a class=padding href=https://twitter.com/pi4J><i class="fab fa-twitter"></i>Twitter @pi4j</a></li><li><a class=padding href=https://github.com/Pi4J/pi4j-v2/discussions><i class="fab fa-github"></i>Pi4J Forum</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/Pi4J/pi4j.github.io/blob/main/content/getting-started/fxgl/kiosk-mode.md target=blank><i class="fas fa-code-branch"></i><span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>Welcome to Pi4J</a> > <a href=/getting-started/>Getting started with Pi4J</a> > <a href=/getting-started/fxgl/>Game development with FXGL</a> > JavaFX kiosk mode</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#kiosk-mode>Kiosk Mode</a><ul><li><a href=#performance>Performance</a></li><li><a href=#extra-tips>Extra tips</a></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>JavaFX kiosk mode</h1><div class="notices note"><p>Visit <a href=https://webtechie.be/post/2021-04-23-javafx-kiosk-raspberry-pi/>webtechie.be</a> for the full blogpost</p></div><h2 id=kiosk-mode>Kiosk Mode</h2><p>With Gluon&rsquo;s JavaFX 17-ea, we are able to run applications in different modes: Desktop and Kiosk mode.
In this post we focus on the Kiosk mode only.</p><p>With this approach, the application is the only thing you see on the screen. This prevents the user to open any other applications, or mess up your system.
In this case, there is no need for a window manager, and the application directly uses the underlying (hardware) framebuffer.
To achieve this, we use <strong>Monocle with EGL and DRM</strong>, as that is the Linux approach to directly address the hardware acceleration, without a window manager.
The JavaFX application is using Direct Rendering Mode (DRM) to be visualized. An extra benefit is the performance boost, as your program is the only thing that needs to be handled towards the screen.</p><ul><li>By using /sbin/init 3 before the application starts, the desktop mode is stopped.</li><li>As DRM in JavaFX 17-ea is part of the commercial license of Gluon, we need to set the environment value ENABLE_GLUON_COMMERCIAL_EXTENSIONS, for more info see Gluon docs: “JavaFX on Embedded” > “Legal notice”.</li><li>The display id needs to be defined, if card0 is not working and you get the error [GluonDRM] Device /dev/dri/card0 could be opened, but has no drm capabilities., try card1. More info is provided on Gluon docs: “JavaFX on Embedded” > “Testing JavaFX”.</li><li>After the application is stopped, we call /sbin/init 5 to restart the regular desktop environment.</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#75715e>#!/usr/bin/env bash
</span><span style=color:#75715e></span>/sbin/init <span style=color:#ae81ff>3</span>
export ENABLE_GLUON_COMMERCIAL_EXTENSIONS<span style=color:#f92672>=</span>true
java <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  -Degl.displayid<span style=color:#f92672>=</span>/dev/dri/card0 <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  -Dmonocle.egl.lib<span style=color:#f92672>=</span>/opt/javafx-sdk-17/lib/libgluon_drm-1.1.3.so <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  -Djava.library.path<span style=color:#f92672>=</span>/opt/javafx-sdk-17/lib <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  -Dmonocle.platform.traceConfig<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  -Dprism.verbose<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  -Djavafx.verbose<span style=color:#f92672>=</span>false <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  -Dmonocle.platform<span style=color:#f92672>=</span>EGL <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  --module-path .:/opt/javafx-sdk-17/lib <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  --add-modules javafx.controls <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>  --module com.pi4j.example/com.pi4j.example.FxglExample $@
/sbin/init <span style=color:#ae81ff>5</span>
</code></pre></div><p>To run the application in kiosk mode it is recommended to have an open ssh session on the side to follow the process or
in case of errors, being able to restart the desktop with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>/sbin/init <span style=color:#ae81ff>5</span>
</code></pre></div><h3 id=performance>Performance</h3><p>By disabling the window manager, more ressources are available for the application, therefore running more performant.
To test the performance of the windowed mode and kiosk mode, several <a href=https://github.com/FDelporte/FXGLPerformanceTest/tree/main/src/main/java/be/webtechie/performancetest>tests</a> have been executed.</p><p>RaspberryPi model: RaspberryPi 4 8G Model B</p><p>The tests were run with 50, 100 and 500 balls. The results of the study show that even thought many more resources are available, the game does not run the expected amount smoother.
A slight increase of RAM and CPU is noticeable, but the average frames per second do not improve that much. Non the less, the FPS was more stable while running in kiosk mode and might be an advantage when running games.</p><p>Overall the kiosk mode has advantages over the windowed mode but using the kiosk mode exclusively to boost the performance is not recommended.</p><h3 id=extra-tips>Extra tips</h3><h4 id=gluon-documentation>Gluon documentation</h4><p>Gluon keeps the documentation for Raspberry Pi constantly updated, keep an eye on <a href=https://docs.gluonhq.com/#_javafx_on_embedded>gluonhq</a> to stay up-to-date.</p><h4 id=64-bit-os-and-javafx>64-bit OS and JavaFX</h4><p>If you want to go 64-bit, you can use the same approach. There is no official 64-bit Raspberry Pi OS yet, but you can find more information on <a href=https://foojay.io/today/64-bit-raspbian-os-on-raspberry-pi-4-with-usb-boot/>“Faster & More Reliable 64-bit OS on Raspberry Pi 4 with USB Boot”</a>.</p><h4 id=unclutter>Unclutter</h4><p>Another great addition for a kiosk approach is <a href=https://wiki.archlinux.org/title/Unclutter>Unclutter</a>, a small tool which hides your mouse cursor when you do not need it. You only have to move the mouse for the cursor to reappear.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo apt install unclutter
</code></pre></div><p>To run the application in kiosk mode it is recommended to have an open ssh session on the side to follow the process or
in case of errors, being able to restart the desktop with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>/sbin/init <span style=color:#ae81ff>5</span>
</code></pre></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/getting-started/fxgl/fxgl-to-picade/ title="FXGl to Picade"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/getting-started/learn-more/ title="Learn more..." style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1630310370></script><script src=/js/perfect-scrollbar.min.js?1630310370></script><script src=/js/perfect-scrollbar.jquery.min.js?1630310370></script><script src=/js/jquery.sticky.js?1630310370></script><script src=/js/featherlight.min.js?1630310370></script><script src=/js/highlight.pack.js?1630310370></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1630310370></script><script src=/js/learn.js?1630310370></script><script src=/js/hugo-learn.js?1630310370></script><script src=/mermaid/mermaid.js?1630310370></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>