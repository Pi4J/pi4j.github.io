<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Java IO Library for the Raspberry Pi"><meta name=author content="Pi4J"><link rel=icon href=/assets/favicon.ico type=image/ico><title>Minimal example application - Pi4J</title><link href=/css/nucleus.css?1614853452 rel=stylesheet><link href=/css/fontawesome-all.min.css?1614853452 rel=stylesheet><link href=/css/hybrid.css?1614853452 rel=stylesheet><link href=/css/featherlight.min.css?1614853452 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1614853452 rel=stylesheet><link href=/css/auto-complete.css?1614853452 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1614853452 rel=stylesheet><link href=/css/theme.css?1614853452 rel=stylesheet><link href=/css/hugo-theme.css?1614853452 rel=stylesheet><link href=/css/theme-blue.css?1614853452 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1614853452></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/getting-started/minimal-example-application/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/assets/pi4j-logo.png></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1614853452></script><script type=text/javascript src=/js/auto-complete.js?1614853452></script><script type=text/javascript>var baseurl="https:\/\/v2.pi4j.com\/";</script><script type=text/javascript src=/js/search.js?1614853452></script></div><div class=highlightable><ul class=topics><li data-nav-id=/about/ title=About class=dd-item><a href=/about/>About</a><ul><li data-nav-id=/about/previous-version-v1/ title="Previous versions (V.1)" class=dd-item><a href=/about/previous-version-v1/>Previous versions (V.1)</a></li><li data-nav-id=/about/new-in-v2/ title="What's New (V.2)" class=dd-item><a href=/about/new-in-v2/>What's New (V.2)</a></li><li data-nav-id=/about/release-notes/ title="Release Notes" class=dd-item><a href=/about/release-notes/>Release Notes</a></li><li data-nav-id=/about/license/ title="License (Open Source)" class=dd-item><a href=/about/license/>License (Open Source)</a></li><li data-nav-id=/about/team/ title="The Team" class=dd-item><a href=/about/team/>The Team</a></li></ul></li><li data-nav-id=/getting-started/ title="Getting started with Pi4J" class="dd-item
parent"><a href=/getting-started/>Getting started with Pi4J</a><ul><li data-nav-id=/getting-started/set-up-a-new-raspberry-pi/ title="Set up a new Raspberry Pi" class=dd-item><a href=/getting-started/set-up-a-new-raspberry-pi/>Set up a new Raspberry Pi</a></li><li data-nav-id=/getting-started/understanding-the-pins/ title="Understanding the GPIO pins" class=dd-item><a href=/getting-started/understanding-the-pins/>Understanding the GPIO pins</a></li><li data-nav-id=/getting-started/java-development-on-the-raspberry-pi-with-vsc/ title="Java development with VSC" class=dd-item><a href=/getting-started/java-development-on-the-raspberry-pi-with-vsc/>Java development with VSC</a></li><li data-nav-id=/getting-started/developing-on-a-remote-pc/ title="Developing on a remote PC" class=dd-item><a href=/getting-started/developing-on-a-remote-pc/>Developing on a remote PC</a></li><li data-nav-id=/getting-started/minimal-example-application/ title="Minimal example application" class="dd-item active"><a href=/getting-started/minimal-example-application/>Minimal example application</a></li><li data-nav-id=/getting-started/introduction-to-electronics-with-crowpi/ title="Introduction to electronics" class=dd-item><a href=/getting-started/introduction-to-electronics-with-crowpi/>Introduction to electronics</a></li><li data-nav-id=/getting-started/user-interface-with-javafx/ title="User interface with JavaFX" class=dd-item><a href=/getting-started/user-interface-with-javafx/>User interface with JavaFX</a></li><li data-nav-id=/getting-started/game-development-with-fxgl/ title="Game development with FXGL" class=dd-item><a href=/getting-started/game-development-with-fxgl/>Game development with FXGL</a></li><li data-nav-id=/getting-started/learn-more/ title="Learn more..." class=dd-item><a href=/getting-started/learn-more/>Learn more...</a></li></ul></li><li data-nav-id=/documentation/ title=Documentation class=dd-item><a href=/documentation/>Documentation</a><ul><li data-nav-id=/documentation/pin-numbering/ title="Pin numbering" class=dd-item><a href=/documentation/pin-numbering/>Pin numbering</a></li><li data-nav-id=/documentation/java-installation/ title="Java for ARMv6/7/8" class=dd-item><a href=/documentation/java-installation/>Java for ARMv6/7/8</a></li><li data-nav-id=/documentation/logging/ title="Logging with SLF4J" class=dd-item><a href=/documentation/logging/>Logging with SLF4J</a></li><li data-nav-id=/documentation/create-context/ title="Creating a Pi4J Context" class=dd-item><a href=/documentation/create-context/>Creating a Pi4J Context</a></li><li data-nav-id=/documentation/platforms/ title="Choosing a Platform" class=dd-item><a href=/documentation/platforms/>Choosing a Platform</a><ul><li data-nav-id=/documentation/platforms/raspberry-pi/ title="Raspberry Pi" class=dd-item><a href=/documentation/platforms/raspberry-pi/>Raspberry Pi</a></li></ul></li><li data-nav-id=/documentation/providers/ title="Choosing an I/O Provider" class=dd-item><a href=/documentation/providers/>Choosing an I/O Provider</a><ul><li data-nav-id=/documentation/providers/pigpio/ title=PiGpio class=dd-item><a href=/documentation/providers/pigpio/>PiGpio</a></li></ul></li><li data-nav-id=/documentation/build-io/ title="Building an I/O Instance" class=dd-item><a href=/documentation/build-io/>Building an I/O Instance</a></li><li data-nav-id=/documentation/io-events/ title="Listening for I/O Events" class=dd-item><a href=/documentation/io-events/>Listening for I/O Events</a></li><li data-nav-id=/documentation/io-examples/ title="I/O Examples" class=dd-item><a href=/documentation/io-examples/>I/O Examples</a><ul><li data-nav-id=/documentation/io-examples/digital-output/ title="Digital Output (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-output/>Digital Output (GPIO)</a></li><li data-nav-id=/documentation/io-examples/digital-input/ title="Digital Input (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-input/>Digital Input (GPIO)</a></li><li data-nav-id=/documentation/io-examples/pwm/ title="Pulse Width Modulation (PWM)" class=dd-item><a href=/documentation/io-examples/pwm/>Pulse Width Modulation (PWM)</a></li><li data-nav-id=/documentation/io-examples/i2c/ title="Inter-Integrated Circuit (I²C)" class=dd-item><a href=/documentation/io-examples/i2c/>Inter-Integrated Circuit (I²C)</a></li><li data-nav-id=/documentation/io-examples/spi/ title="Serial Peripheral Interface (SPI)" class=dd-item><a href=/documentation/io-examples/spi/>Serial Peripheral Interface (SPI)</a></li><li data-nav-id=/documentation/io-examples/serial/ title="Serial (UART/RS232)" class=dd-item><a href=/documentation/io-examples/serial/>Serial (UART/RS232)</a></li></ul></li><li data-nav-id=/documentation/device-examples/ title="Devices examples" class=dd-item><a href=/documentation/device-examples/>Devices examples</a></li><li data-nav-id=/documentation/registry/ title="I/O Registry" class=dd-item><a href=/documentation/registry/>I/O Registry</a></li><li data-nav-id=/documentation/shutdown/ title="Shutting down the Pi4J Context" class=dd-item><a href=/documentation/shutdown/>Shutting down the Pi4J Context</a></li></ul></li><li data-nav-id=/architecture/ title=Architecture/Design class=dd-item><a href=/architecture/>Architecture/Design</a><ul><li data-nav-id=/architecture/about-the-code/ title="Project source structure" class=dd-item><a href=/architecture/about-the-code/>Project source structure</a><ul><li data-nav-id=/architecture/about-the-code/download/ title=Download/Install class=dd-item><a href=/architecture/about-the-code/download/>Download/Install</a><ul><li data-nav-id=/architecture/about-the-code/download/direct-download/ title="Direct Download" class=dd-item><a href=/architecture/about-the-code/download/direct-download/>Direct Download</a></li><li data-nav-id=/architecture/about-the-code/download/repository/ title="Maven Repository" class=dd-item><a href=/architecture/about-the-code/download/repository/>Maven Repository</a></li><li data-nav-id=/architecture/about-the-code/download/install/ title=Installation class=dd-item><a href=/architecture/about-the-code/download/install/>Installation</a></li></ul></li><li data-nav-id=/architecture/about-the-code/build-instructions/ title="Build Instructions" class=dd-item><a href=/architecture/about-the-code/build-instructions/>Build Instructions</a></li><li data-nav-id=/architecture/about-the-code/maven-settings/ title="Maven settings" class=dd-item><a href=/architecture/about-the-code/maven-settings/>Maven settings</a></li><li data-nav-id=/architecture/about-the-code/code-styling/ title="Code styling" class=dd-item><a href=/architecture/about-the-code/code-styling/>Code styling</a></li><li data-nav-id=/architecture/about-the-code/hardware-testing/ title="Hardware testing" class=dd-item><a href=/architecture/about-the-code/hardware-testing/>Hardware testing</a></li></ul></li><li data-nav-id=/architecture/advanced/ title=Advanced class=dd-item><a href=/architecture/advanced/>Advanced</a><ul><li data-nav-id=/architecture/advanced/annotated-provisioning/ title="Annotated provisioning" class=dd-item><a href=/architecture/advanced/annotated-provisioning/>Annotated provisioning</a></li><li data-nav-id=/architecture/advanced/dependency-injection/ title="Dependency injection" class=dd-item><a href=/architecture/advanced/dependency-injection/>Dependency injection</a></li><li data-nav-id=/architecture/advanced/library-path/ title="Native Library Path" class=dd-item><a href=/architecture/advanced/library-path/>Native Library Path</a></li><li data-nav-id=/architecture/advanced/plugins/ title=Plug-ins class=dd-item><a href=/architecture/advanced/plugins/>Plug-ins</a></li><li data-nav-id=/architecture/advanced/remote-support/ title="Remote support" class=dd-item><a href=/architecture/advanced/remote-support/>Remote support</a></li><li data-nav-id=/architecture/advanced/3rd-party/ title="Third-Party Integration" class=dd-item><a href=/architecture/advanced/3rd-party/>Third-Party Integration</a></li></ul></li></ul></li><li data-nav-id=/featured-projects/ title="Featured Projects" class=dd-item><a href=/featured-projects/>Featured Projects</a><ul><li data-nav-id=/featured-projects/soft-real-time-plc-written-in-strolch/ title="Soft real time PLC in Strolch" class=dd-item><a href=/featured-projects/soft-real-time-plc-written-in-strolch/>Soft real time PLC in Strolch</a></li><li data-nav-id=/featured-projects/pijukebox-by-daniel-martensson/ title="PiJukeBox by Daniel Mårtensson" class=dd-item><a href=/featured-projects/pijukebox-by-daniel-martensson/>PiJukeBox by Daniel Mårtensson</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://v2.pi4j.com/tags><i class="fas fa-tags"></i>Tags</a></li><li><a class=padding href=https://github.com/Pi4J><i class="fab fa-github"></i>GitHub project</a></li><li><a class=padding href=https://twitter.com/pi4J><i class="fab fa-twitter"></i>Twitter @pi4j</a></li><li><a class=padding href=https://github.com/Pi4J/pi4j-v2/discussions><i class="fab fa-github"></i>Pi4J Forum</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/Pi4J/pi4j.github.io/blob/main/content/getting-started/minimal-example-application.md target=blank><i class="fas fa-code-branch"></i><span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links>Minimal example application</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#wiring>Wiring</a></li><li><a href=#building-the-application>Building the application</a><ul><li><a href=#maven>Maven</a></li><li><a href=#gradle>Gradle</a></li></ul></li><li><a href=#dependency-in-pomxml>Dependency in pom.xml</a></li><li><a href=#pi4j-code-blocks-which-are-used>Pi4J code blocks which are used</a><ul><li><a href=#initialization>Initialization</a></li><li><a href=#output-pi4j-context-information>Output Pi4J Context information</a></li><li><a href=#handle-the-button-presses>Handle the button presses</a></li><li><a href=#toggle-a-led>Toggle a LED</a></li><li><a href=#closing-the-application>Closing the application</a></li></ul></li><li><a href=#steps-to-run-this-application-on-your-raspberry-pi>Steps to run this application on your Raspberry Pi</a></li></ul></nav></div></div></div></div><div id=head-tags><div class=tags><a class=tag-link href=/tags/digital-input>Digital Input</a>
<a class=tag-link href=/tags/digital-output>Digital Output</a></div></div><div id=body-inner><h1>Minimal example application</h1><div class="notices note"><p>GITHUB PROJECT: <a href=https://github.com/Pi4J/pi4j-example-minimal>https://github.com/Pi4J/pi4j-example-minimal</a></p></div><p>In the <a href=https://github.com/Pi4J/pi4j-example-minimal>&ldquo;pi4j-example-minimal&rdquo; GitHub project</a> you can
find a project which contains the minimal code to control a digital input and output with Pi4J. The project is further
described on this page. The application will toggle an LED on/off and each time you press the button, the toggling
speed increases. When you have pushed the button 5 times, the application stops.</p><h2 id=wiring>Wiring</h2><p>This minimal example application uses this wiring:</p><p><img src=/assets/getting-started/minimal/led-button_bb.png alt></p><h2 id=building-the-application>Building the application</h2><p>The main build tool used by the Pi4J project is Maven, but for this example we provided both the Maven and Gradle approach,
so you can select the tool you prefer.</p><h3 id=maven>Maven</h3><p>This project can be built with Apache Maven 3.6 (or later) and Java 11 OpenJDK (or later). These prerequisites must be
installed prior to building this project as described on the previous pages. The following command can be used to
download all project dependencies and compile the Java module. You can build this project directly on a Raspberry Pi with Java 11+.</p><pre><code>mvn clean package
</code></pre><h3 id=gradle>Gradle</h3><p>You can also use the Gradle Build Tool from these same sources. Use version 6.6 (or later) and Java 11 OpenJDK (or later).
The Gradle wrapper is used as described on <a href=https://docs.gradle.org/current/userguide/gradle_wrapper.html>docs.gradle.org</a>.
The Gradle configuraion file <a href=https://github.com/Pi4J/pi4j-example-minimal/blob/master/build.gradle>build.gradle-file</a>
is included in the sources.</p><p>On Linux:</p><pre><code>./gradlew build
</code></pre><p>On Windows:</p><pre><code>gradlew.bat build
</code></pre><h2 id=dependency-in-pomxml>Dependency in pom.xml</h2><p>For the Maven approach, a pom.xml file defines all the dependencies, and the build process.</p><div class="notices note">At this moment Pi4J V.2 is not yet released, so you&rsquo;ll need to add the snapshot repository.</div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;repositories&gt;</span>
    <span style=color:#f92672>&lt;repository&gt;</span>
        <span style=color:#f92672>&lt;id&gt;</span>oss-snapshots-repo<span style=color:#f92672>&lt;/id&gt;</span>
        <span style=color:#f92672>&lt;name&gt;</span>Sonatype OSS Maven Repository<span style=color:#f92672>&lt;/name&gt;</span>
        <span style=color:#f92672>&lt;url&gt;</span>https://oss.sonatype.org/content/groups/public<span style=color:#f92672>&lt;/url&gt;</span>
        <span style=color:#f92672>&lt;releases&gt;</span>
            <span style=color:#f92672>&lt;enabled&gt;</span>false<span style=color:#f92672>&lt;/enabled&gt;</span>
        <span style=color:#f92672>&lt;/releases&gt;</span>
        <span style=color:#f92672>&lt;snapshots&gt;</span>
            <span style=color:#f92672>&lt;enabled&gt;</span>true<span style=color:#f92672>&lt;/enabled&gt;</span>
        <span style=color:#f92672>&lt;/snapshots&gt;</span>
    <span style=color:#f92672>&lt;/repository&gt;</span>
<span style=color:#f92672>&lt;/repositories&gt;</span>
</code></pre></div><p>In this project we will be using slf4 for logging, pi4j-core and the pi4j-plugins for the Raspberry Pi and PiGPIO. To make the versions easy to update, we add those numbers as properties.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;properties&gt;</span>
    <span style=color:#75715e>&lt;!-- DEPENDENCIES VERSIONS --&gt;</span>
    <span style=color:#f92672>&lt;slf4j.version&gt;</span>2.0.0-alpha0<span style=color:#f92672>&lt;/slf4j.version&gt;</span>
    <span style=color:#f92672>&lt;pi4j.version&gt;</span>2.0-SNAPSHOT<span style=color:#f92672>&lt;/pi4j.version&gt;</span>
<span style=color:#f92672>&lt;/properties&gt;</span>
</code></pre></div><p>These are the dependencies we need:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;dependencies&gt;</span>
    <span style=color:#f92672>&lt;dependency&gt;</span>
        <span style=color:#f92672>&lt;groupId&gt;</span>org.slf4j<span style=color:#f92672>&lt;/groupId&gt;</span>
        <span style=color:#f92672>&lt;artifactId&gt;</span>slf4j-api<span style=color:#f92672>&lt;/artifactId&gt;</span>
        <span style=color:#f92672>&lt;version&gt;</span>${slf4j.version}<span style=color:#f92672>&lt;/version&gt;</span>
    <span style=color:#f92672>&lt;/dependency&gt;</span>
    <span style=color:#f92672>&lt;dependency&gt;</span>
        <span style=color:#f92672>&lt;groupId&gt;</span>org.slf4j<span style=color:#f92672>&lt;/groupId&gt;</span>
        <span style=color:#f92672>&lt;artifactId&gt;</span>slf4j-simple<span style=color:#f92672>&lt;/artifactId&gt;</span>
        <span style=color:#f92672>&lt;version&gt;</span>${slf4j.version}<span style=color:#f92672>&lt;/version&gt;</span>
    <span style=color:#f92672>&lt;/dependency&gt;</span>

    <span style=color:#75715e>&lt;!-- include Pi4J Core --&gt;</span>
    <span style=color:#f92672>&lt;dependency&gt;</span>
        <span style=color:#f92672>&lt;groupId&gt;</span>com.pi4j<span style=color:#f92672>&lt;/groupId&gt;</span>
        <span style=color:#f92672>&lt;artifactId&gt;</span>pi4j-core<span style=color:#f92672>&lt;/artifactId&gt;</span>
        <span style=color:#f92672>&lt;version&gt;</span>${pi4j.version}<span style=color:#f92672>&lt;/version&gt;</span>
    <span style=color:#f92672>&lt;/dependency&gt;</span>

    <span style=color:#75715e>&lt;!-- include Pi4J Plugins (Platforms and I/O Providers) --&gt;</span>
    <span style=color:#f92672>&lt;dependency&gt;</span>
        <span style=color:#f92672>&lt;groupId&gt;</span>com.pi4j<span style=color:#f92672>&lt;/groupId&gt;</span>
        <span style=color:#f92672>&lt;artifactId&gt;</span>pi4j-plugin-raspberrypi<span style=color:#f92672>&lt;/artifactId&gt;</span>
        <span style=color:#f92672>&lt;version&gt;</span>${pi4j.version}<span style=color:#f92672>&lt;/version&gt;</span>
    <span style=color:#f92672>&lt;/dependency&gt;</span>
    <span style=color:#f92672>&lt;dependency&gt;</span>
        <span style=color:#f92672>&lt;groupId&gt;</span>com.pi4j<span style=color:#f92672>&lt;/groupId&gt;</span>
        <span style=color:#f92672>&lt;artifactId&gt;</span>pi4j-plugin-pigpio<span style=color:#f92672>&lt;/artifactId&gt;</span>
        <span style=color:#f92672>&lt;version&gt;</span>${pi4j.version}<span style=color:#f92672>&lt;/version&gt;</span>
    <span style=color:#f92672>&lt;/dependency&gt;</span>
<span style=color:#f92672>&lt;/dependencies&gt;</span>
</code></pre></div><h2 id=pi4j-code-blocks-which-are-used>Pi4J code blocks which are used</h2><h3 id=initialization>Initialization</h3><p>Before you can use Pi4J you must initialize a new runtime context.</p><p>The &lsquo;Pi4J&rsquo; static class includes a few helper context creators for the most common use cases. The &lsquo;newAutoContext()&rsquo; method will automatically load all available Pi4J extensions found in the application&rsquo;s classpath which may include &lsquo;Platforms&rsquo; and &lsquo;I/O Providers&rsquo;.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>var pi4j <span style=color:#f92672>=</span> Pi4J<span style=color:#f92672>.</span><span style=color:#a6e22e>newAutoContext</span><span style=color:#f92672>();</span>
</code></pre></div><h3 id=output-pi4j-context-information>Output Pi4J Context information</h3><p>The library contains helper functions to output info about the available and used platforms and providers. To keep the example code clean, these are part of the &ldquo;PrintInfo.java&rdquo; class. For example to print the loaded platforms:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Platforms platforms <span style=color:#f92672>=</span> pi4j<span style=color:#f92672>.</span><span style=color:#a6e22e>platforms</span><span style=color:#f92672>();</span>

console<span style=color:#f92672>.</span><span style=color:#a6e22e>box</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Pi4J PLATFORMS&#34;</span><span style=color:#f92672>);</span>
console<span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
platforms<span style=color:#f92672>.</span><span style=color:#a6e22e>describe</span><span style=color:#f92672>().</span><span style=color:#a6e22e>print</span><span style=color:#f92672>(</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>);</span>
console<span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>();</span>
</code></pre></div><h3 id=handle-the-button-presses>Handle the button presses</h3><p>To handle digital input events we first need a configuration for it. With that configuration, Pi4J can create the object for us and the state changes can be handled.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>int</span> pressCount <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>
<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> PIN_BUTTON <span style=color:#f92672>=</span> 24<span style=color:#f92672>;</span> <span style=color:#75715e>// PIN 18 = BCM 24
</span><span style=color:#75715e></span>
var buttonConfig <span style=color:#f92672>=</span> DigitalInput<span style=color:#f92672>.</span><span style=color:#a6e22e>newConfigBuilder</span><span style=color:#f92672>(</span>pi4j<span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;button&#34;</span><span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Press button&#34;</span><span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>address</span><span style=color:#f92672>(</span>PIN_BUTTON<span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>pull</span><span style=color:#f92672>(</span>PullResistance<span style=color:#f92672>.</span><span style=color:#a6e22e>PULL_DOWN</span><span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>debounce</span><span style=color:#f92672>(</span>3000L<span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pigpio-digital-input&#34;</span><span style=color:#f92672>);</span>
      
var button <span style=color:#f92672>=</span> pi4j<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>(</span>buttonConfig<span style=color:#f92672>);</span>

button<span style=color:#f92672>.</span><span style=color:#a6e22e>addListener</span><span style=color:#f92672>(</span>e <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
       <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>e<span style=color:#f92672>.</span><span style=color:#a6e22e>state</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> DigitalState<span style=color:#f92672>.</span><span style=color:#a6e22e>LOW</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
              pressCount<span style=color:#f92672>++;</span>
              console<span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Button was pressed for the &#34;</span> <span style=color:#f92672>+</span> pressCount <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;th time&#34;</span><span style=color:#f92672>);</span>
       <span style=color:#f92672>}</span>
<span style=color:#f92672>});</span>
</code></pre></div><h3 id=toggle-a-led>Toggle a LED</h3><p>For the LED we use a similar approach with a configuration. The created led-object can be used to toggle its state.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> PIN_LED <span style=color:#f92672>=</span> 22<span style=color:#f92672>;</span> <span style=color:#75715e>// PIN 15 = BCM 22
</span><span style=color:#75715e></span>
var ledConfig <span style=color:#f92672>=</span> DigitalOutput<span style=color:#f92672>.</span><span style=color:#a6e22e>newConfigBuilder</span><span style=color:#f92672>(</span>pi4j<span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>id</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;led&#34;</span><span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>name</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;LED Flasher&#34;</span><span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>address</span><span style=color:#f92672>(</span>PIN_LED<span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>shutdown</span><span style=color:#f92672>(</span>DigitalState<span style=color:#f92672>.</span><span style=color:#a6e22e>LOW</span><span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>initial</span><span style=color:#f92672>(</span>DigitalState<span style=color:#f92672>.</span><span style=color:#a6e22e>LOW</span><span style=color:#f92672>)</span>
      <span style=color:#f92672>.</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pigpio-digital-output&#34;</span><span style=color:#f92672>);</span>
      
var led <span style=color:#f92672>=</span> pi4j<span style=color:#f92672>.</span><span style=color:#a6e22e>create</span><span style=color:#f92672>(</span>ledConfig<span style=color:#f92672>);</span>

<span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span>pressCount <span style=color:#f92672>&lt;</span> 5<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
      <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>led<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>DigitalState<span style=color:#f92672>.</span><span style=color:#a6e22e>HIGH</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
           led<span style=color:#f92672>.</span><span style=color:#a6e22e>low</span><span style=color:#f92672>();</span>
      <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
           led<span style=color:#f92672>.</span><span style=color:#a6e22e>high</span><span style=color:#f92672>();</span>
      <span style=color:#f92672>}</span>
      Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>sleep</span><span style=color:#f92672>(</span>500 <span style=color:#f92672>/</span> <span style=color:#f92672>(</span>pressCount <span style=color:#f92672>+</span> 1<span style=color:#f92672>));</span>
<span style=color:#f92672>}</span>
</code></pre></div><h3 id=closing-the-application>Closing the application</h3><p>Before the application quits, we need to call the &lsquo;shutdown()&rsquo; function on the Pi4J static helper class. This will ensure that all I/O instances are properly shutdown, released by the the system and shutdown in the appropriate manner. Terminate will also ensure that any background threads/processes are cleanly shutdown and any used memory is returned to the system.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>pi4j<span style=color:#f92672>.</span><span style=color:#a6e22e>shutdown</span><span style=color:#f92672>();</span>
</code></pre></div><h2 id=steps-to-run-this-application-on-your-raspberry-pi>Steps to run this application on your Raspberry Pi</h2><ul><li>Attach a LED and button as shown in the image above</li><li>Use a recent Raspbian OS image which has Java 11. To check if you have the correct Java version in the terminal:</li></ul><pre><code>$ java -version
openjdk version &quot;11.0.6&quot; 2020-01-14
OpenJDK Runtime Environment (build 11.0.6+10-post-Raspbian-1deb10u1)
OpenJDK Server VM (build 11.0.6+10-post-Raspbian-1deb10u1, mixed mode)
</code></pre><ul><li>Download the project from GitHub and build it:</li></ul><pre><code>$ git clone https://github.com/Pi4J/pi4j-example-minimal.git
$ cd pi4j-example-minimal/
$ mvn clean package
</code></pre><ul><li>Change to the distribution directory where you can find the generated package and required Java-modules. Start it with the provided run.sh script:</li></ul><pre><code>$ cd target/distribution
$ ls -l
total 644
-rw-r--r-- 1 pi pi 364456 Jun 19 10:04 pi4j-core-2.0-SNAPSHOT.jar
-rw-r--r-- 1 pi pi   7243 Jun 19 10:04 pi4j-example-minimal-0.0.1.jar
-rw-r--r-- 1 pi pi 142461 Jun 19 10:04 pi4j-library-pigpio-2.0-SNAPSHOT.jar
-rw-r--r-- 1 pi pi  37302 Jun 19 10:04 pi4j-plugin-pigpio-2.0-SNAPSHOT.jar
-rw-r--r-- 1 pi pi  26917 Jun 19 10:04 pi4j-plugin-raspberrypi-2.0-SNAPSHOT.jar
-rwxr-xr-x 1 pi pi    101 Jun 19 10:04 run.sh
-rw-r--r-- 1 pi pi  52173 Jun 19 10:04 slf4j-api-2.0.0-alpha0.jar
-rw-r--r-- 1 pi pi  15372 Jun 19 10:04 slf4j-simple-2.0.0-alpha0.jar
$ sudo ./run.sh
</code></pre><ul><li>The output will first show you some info about the platforms and providers. Then the LED starts blinking and shows how much times you pushed the button:</li></ul><pre><code>LED high
LED low
LED high
Button was pressed for the 1th time
LED low
LED high
Button was pressed for the 2th time
LED low
LED high
LED low
LED high
Button was pressed for the 3th time
LED low
LED high
LED low
LED high
Button was pressed for the 4th time
LED low
LED high
LED low
LED high
Button was pressed for the 5th time
</code></pre><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/getting-started/developing-on-a-remote-pc/ title="Developing on a remote PC"><i class="fa fa-chevron-left"></i></a><a class="nav nav-next" href=/getting-started/introduction-to-electronics-with-crowpi/ title="Introduction to electronics" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1614853452></script><script src=/js/perfect-scrollbar.min.js?1614853452></script><script src=/js/perfect-scrollbar.jquery.min.js?1614853452></script><script src=/js/jquery.sticky.js?1614853452></script><script src=/js/featherlight.min.js?1614853452></script><script src=/js/highlight.pack.js?1614853452></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1614853452></script><script src=/js/learn.js?1614853452></script><script src=/js/hugo-learn.js?1614853452></script><script src=/mermaid/mermaid.js?1614853452></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>