<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.80.0"><meta name=description content="Java IO Library for the Raspberry Pi"><meta name=author content="Pi4J"><link rel=icon href=/assets/favicon.ico type=image/ico><title>JMonkeyEngine with Joystick - Pi4J</title><link href=/css/nucleus.css?1702382827 rel=stylesheet><link href=/css/fontawesome-all.min.css?1702382827 rel=stylesheet><link href=/css/hybrid.css?1702382827 rel=stylesheet><link href=/css/featherlight.min.css?1702382827 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1702382827 rel=stylesheet><link href=/css/auto-complete.css?1702382827 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1702382827 rel=stylesheet><link href=/css/theme.css?1702382827 rel=stylesheet><link href=/css/hugo-theme.css?1702382827 rel=stylesheet><link href=/css/theme-blue.css?1702382827 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1702382827></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style><style>.DocSearch{width:90%}#docsearch-input{border:none;padding-top:15px;margin:0 0 0 10px;padding:0;background:0 0}</style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3></pre></li></head><body data-url=/featured-projects/joystick-game/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><img src=/assets/pi4j-header.png></a></div><div id=docsearch></div></div><section id=homelinks><ul><li><a class=padding href=/><i class="fas fa-home"></i>Home</a></li></ul></section><div class=highlightable><ul class=topics><li data-nav-id=/about/ title=About class=dd-item><a href=/about/>About</a><ul><li data-nav-id=/about/previous-version-v1/ title="Previous versions (V.1)" class=dd-item><a href=/about/previous-version-v1/>Previous versions (V.1)</a></li><li data-nav-id=/about/new-in-v2/ title="What's New (V.2)" class=dd-item><a href=/about/new-in-v2/>What's New (V.2)</a></li><li data-nav-id=/about/release-notes/ title="Release Notes" class=dd-item><a href=/about/release-notes/>Release Notes</a></li><li data-nav-id=/about/download/ title="Pi4J Downloads" class=dd-item><a href=/about/download/>Pi4J Downloads</a></li><li data-nav-id=/about/license/ title="License (Open Source)" class=dd-item><a href=/about/license/>License (Open Source)</a></li><li data-nav-id=/about/team/ title="The Team" class=dd-item><a href=/about/team/>The Team</a></li></ul></li><li data-nav-id=/getting-started/ title="Getting started with Pi4J" class=dd-item><a href=/getting-started/>Getting started with Pi4J</a><ul><li data-nav-id=/getting-started/set-up-a-new-raspberry-pi/ title="Set up a new Raspberry Pi" class=dd-item><a href=/getting-started/set-up-a-new-raspberry-pi/>Set up a new Raspberry Pi</a></li><li data-nav-id=/getting-started/understanding-the-pins/ title="Understanding the GPIO pins" class=dd-item><a href=/getting-started/understanding-the-pins/>Understanding the GPIO pins</a></li><li data-nav-id=/getting-started/electricalengeneering/ title="Electrical Engineering" class=dd-item><a href=/getting-started/electricalengeneering/>Electrical Engineering</a></li><li data-nav-id=/getting-started/java-development-on-the-raspberry-pi-with-vsc/ title="Java development with VSC" class=dd-item><a href=/getting-started/java-development-on-the-raspberry-pi-with-vsc/>Java development with VSC</a></li><li data-nav-id=/getting-started/developing-on-a-remote-pc/ title="Developing on a remote PC" class=dd-item><a href=/getting-started/developing-on-a-remote-pc/>Developing on a remote PC</a></li><li data-nav-id=/getting-started/minimal-example-application/ title="Minimal example application" class=dd-item><a href=/getting-started/minimal-example-application/>Minimal example application</a></li><li data-nav-id=/getting-started/minimal-example-application-fatjar/ title="Minimal example as FAT JAR" class=dd-item><a href=/getting-started/minimal-example-application-fatjar/>Minimal example as FAT JAR</a></li><li data-nav-id=/getting-started/user-interface-with-javafx/ title="User interface with JavaFX" class=dd-item><a href=/getting-started/user-interface-with-javafx/>User interface with JavaFX</a></li><li data-nav-id=/getting-started/fxgl/ title="Game development with FXGL" class=dd-item><a href=/getting-started/fxgl/>Game development with FXGL</a><ul><li data-nav-id=/getting-started/fxgl/fxgl-to-picade/ title="FXGl to Picade" class=dd-item><a href=/getting-started/fxgl/fxgl-to-picade/>FXGl to Picade</a></li><li data-nav-id=/getting-started/fxgl/kiosk-mode/ title="JavaFX kiosk mode" class=dd-item><a href=/getting-started/fxgl/kiosk-mode/>JavaFX kiosk mode</a></li></ul></li><li data-nav-id=/getting-started/javafx-mvc-template/ title="JavaFX GUI and MVC template" class=dd-item><a href=/getting-started/javafx-mvc-template/>JavaFX GUI and MVC template</a></li><li data-nav-id=/getting-started/learn-more/ title="Learn more..." class=dd-item><a href=/getting-started/learn-more/>Learn more...</a></li></ul></li><li data-nav-id=/documentation/ title=Documentation class=dd-item><a href=/documentation/>Documentation</a><ul><li data-nav-id=/documentation/pin-numbering/ title="Pin numbering" class=dd-item><a href=/documentation/pin-numbering/>Pin numbering</a></li><li data-nav-id=/documentation/java-installation/ title="Java for ARMv6/7/8" class=dd-item><a href=/documentation/java-installation/>Java for ARMv6/7/8</a></li><li data-nav-id=/documentation/logging/ title="Logging with SLF4J" class=dd-item><a href=/documentation/logging/>Logging with SLF4J</a></li><li data-nav-id=/documentation/create-context/ title="Creating a Pi4J Context" class=dd-item><a href=/documentation/create-context/>Creating a Pi4J Context</a></li><li data-nav-id=/documentation/platforms/ title="Choosing a Platform" class=dd-item><a href=/documentation/platforms/>Choosing a Platform</a><ul><li data-nav-id=/documentation/platforms/raspberry-pi/ title="Raspberry Pi" class=dd-item><a href=/documentation/platforms/raspberry-pi/>Raspberry Pi</a></li></ul></li><li data-nav-id=/documentation/providers/ title="Choosing an I/O Provider" class=dd-item><a href=/documentation/providers/>Choosing an I/O Provider</a><ul><li data-nav-id=/documentation/providers/linuxfs/ title=LinuxFS class=dd-item><a href=/documentation/providers/linuxfs/>LinuxFS</a></li><li data-nav-id=/documentation/providers/pigpio/ title=PiGpio class=dd-item><a href=/documentation/providers/pigpio/>PiGpio</a></li></ul></li><li data-nav-id=/documentation/build-io/ title="Building an I/O Instance" class=dd-item><a href=/documentation/build-io/>Building an I/O Instance</a></li><li data-nav-id=/documentation/io-examples/ title="I/O Examples" class=dd-item><a href=/documentation/io-examples/>I/O Examples</a><ul><li data-nav-id=/documentation/io-examples/digital-output/ title="Digital Output (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-output/>Digital Output (GPIO)</a></li><li data-nav-id=/documentation/io-examples/digital-input/ title="Digital Input (GPIO)" class=dd-item><a href=/documentation/io-examples/digital-input/>Digital Input (GPIO)</a></li><li data-nav-id=/documentation/io-examples/pwm/ title="Pulse Width Modulation (PWM)" class=dd-item><a href=/documentation/io-examples/pwm/>Pulse Width Modulation (PWM)</a></li><li data-nav-id=/documentation/io-examples/i2c/ title="Inter-Integrated Circuit (I²C)" class=dd-item><a href=/documentation/io-examples/i2c/>Inter-Integrated Circuit (I²C)</a><ul><li data-nav-id=/documentation/io-examples/i2c/clock-stretching/ title="I²C Clock Stretching" class=dd-item><a href=/documentation/io-examples/i2c/clock-stretching/>I²C Clock Stretching</a></li></ul></li><li data-nav-id=/documentation/io-examples/spi/ title="Serial Peripheral Interface (SPI)" class=dd-item><a href=/documentation/io-examples/spi/>Serial Peripheral Interface (SPI)</a></li><li data-nav-id=/documentation/io-examples/serial/ title="Serial (UART/RS232)" class=dd-item><a href=/documentation/io-examples/serial/>Serial (UART/RS232)</a></li></ul></li><li data-nav-id=/documentation/registry/ title="I/O Registry" class=dd-item><a href=/documentation/registry/>I/O Registry</a></li><li data-nav-id=/documentation/shutdown/ title="Shutting down the Pi4J Context" class=dd-item><a href=/documentation/shutdown/>Shutting down the Pi4J Context</a></li><li data-nav-id=/documentation/building/ title="Building and running" class=dd-item><a href=/documentation/building/>Building and running</a><ul><li data-nav-id=/documentation/building/javac/ title="Building with javac" class=dd-item><a href=/documentation/building/javac/>Building with javac</a></li><li data-nav-id=/documentation/building/fat-jar/ title="Build as a FAT JAR with Maven" class=dd-item><a href=/documentation/building/fat-jar/>Build as a FAT JAR with Maven</a></li><li data-nav-id=/documentation/building/modules-maven/ title="Build Java modules with Maven" class=dd-item><a href=/documentation/building/modules-maven/>Build Java modules with Maven</a></li><li data-nav-id=/documentation/building/modules-gradle/ title="Build Java modules with Gradle" class=dd-item><a href=/documentation/building/modules-gradle/>Build Java modules with Gradle</a></li><li data-nav-id=/documentation/building/jbang/ title="Running Pi4J with JBang" class=dd-item><a href=/documentation/building/jbang/>Running Pi4J with JBang</a></li></ul></li></ul></li><li data-nav-id=/examples/ title="Example Implementations" class=dd-item><a href=/examples/>Example Implementations</a><ul><li data-nav-id=/examples/jbang/ title="JBang Examples" class=dd-item><a href=/examples/jbang/>JBang Examples</a><ul><li data-nav-id=/examples/jbang/jbang_minimal_example/ title="Minimal Example" class=dd-item><a href=/examples/jbang/jbang_minimal_example/>Minimal Example</a></li><li data-nav-id=/examples/jbang/jbang_pi4j_spi_led_matrix/ title="8x8 LED Matrix" class=dd-item><a href=/examples/jbang/jbang_pi4j_spi_led_matrix/>8x8 LED Matrix</a></li><li data-nav-id=/examples/jbang/bme280_temperature_humidity_pressure/ title="BME280 Sensor" class=dd-item><a href=/examples/jbang/bme280_temperature_humidity_pressure/>BME280 Sensor</a></li><li data-nav-id=/examples/jbang/pixelblaze_output_expander/ title="Pixelblaze Output Expander" class=dd-item><a href=/examples/jbang/pixelblaze_output_expander/>Pixelblaze Output Expander</a></li><li data-nav-id=/examples/jbang/pixelblaze_output_expander_image/ title="Controlling a LED Matrix" class=dd-item><a href=/examples/jbang/pixelblaze_output_expander_image/>Controlling a LED Matrix</a></li><li data-nav-id=/examples/jbang/pixelblaze_output_expander_javafx/ title="LED strip with a JavaFX UI" class=dd-item><a href=/examples/jbang/pixelblaze_output_expander_javafx/>LED strip with a JavaFX UI</a></li></ul></li><li data-nav-id=/examples/components/ title="Component Examples" class=dd-item><a href=/examples/components/>Component Examples</a><ul><li data-nav-id=/examples/components/simplebutton/ title="Simple Button" class=dd-item><a href=/examples/components/simplebutton/>Simple Button</a></li><li data-nav-id=/examples/components/simpleled/ title="Simple LED" class=dd-item><a href=/examples/components/simpleled/>Simple LED</a></li><li data-nav-id=/examples/components/ads1115/ title="AD Converter ADS1115" class=dd-item><a href=/examples/components/ads1115/>AD Converter ADS1115</a></li><li data-nav-id=/examples/components/buzzer/ title=Buzzer class=dd-item><a href=/examples/components/buzzer/>Buzzer</a></li><li data-nav-id=/examples/components/camera/ title=Camera class=dd-item><a href=/examples/components/camera/>Camera</a></li><li data-nav-id=/examples/components/joystick/ title=Joystick class=dd-item><a href=/examples/components/joystick/>Joystick</a></li><li data-nav-id=/examples/components/joystickanalog/ title="Joystick Analog" class=dd-item><a href=/examples/components/joystickanalog/>Joystick Analog</a></li><li data-nav-id=/examples/components/lcddisplay/ title="LCD Display" class=dd-item><a href=/examples/components/lcddisplay/>LCD Display</a></li><li data-nav-id=/examples/components/ledbutton/ title="LED Button" class=dd-item><a href=/examples/components/ledbutton/>LED Button</a></li><li data-nav-id=/examples/components/ledmatrix/ title="LED Matrix" class=dd-item><a href=/examples/components/ledmatrix/>LED Matrix</a></li><li data-nav-id=/examples/components/ledstrip/ title="LED Strip" class=dd-item><a href=/examples/components/ledstrip/>LED Strip</a></li><li data-nav-id=/examples/components/potentiometer/ title=Potentiometer class=dd-item><a href=/examples/components/potentiometer/>Potentiometer</a></li><li data-nav-id=/examples/components/servo/ title=ServoMotor class=dd-item><a href=/examples/components/servo/>ServoMotor</a></li></ul></li><li data-nav-id=/examples/crowpi/ title="Electronics with CrowPi" class=dd-item><a href=/examples/crowpi/>Electronics with CrowPi</a><ul><li data-nav-id=/examples/crowpi/develop-crowpi-with-intellij/ title="Develop with Intellij IDEA" class=dd-item><a href=/examples/crowpi/develop-crowpi-with-intellij/>Develop with Intellij IDEA</a></li><li data-nav-id=/examples/crowpi/crowpi-examples/ title="CrowPi examples" class=dd-item><a href=/examples/crowpi/crowpi-examples/>CrowPi examples</a></li></ul></li><li data-nav-id=/examples/communityimplementation/ title="Community Implementations" class=dd-item><a href=/examples/communityimplementation/>Community Implementations</a><ul><li data-nav-id=/examples/communityimplementation/prototype-board/ title="Prototype Board" class=dd-item><a href=/examples/communityimplementation/prototype-board/>Prototype Board</a></li><li data-nav-id=/examples/communityimplementation/bmp280/ title="BMP280 Sensor" class=dd-item><a href=/examples/communityimplementation/bmp280/>BMP280 Sensor</a></li></ul></li></ul></li><li data-nav-id=/pi4j-os/ title="Pi4J Operating System" class=dd-item><a href=/pi4j-os/>Pi4J Operating System</a><ul><li data-nav-id=/pi4j-os/prepare-sd-with-pi4j-os/ title="Prepare SD with Pi4J OS" class=dd-item><a href=/pi4j-os/prepare-sd-with-pi4j-os/>Prepare SD with Pi4J OS</a></li><li data-nav-id=/pi4j-os/test-pi4j-basic-os/ title="Test Pi4J Basic OS" class=dd-item><a href=/pi4j-os/test-pi4j-basic-os/>Test Pi4J Basic OS</a></li><li data-nav-id=/pi4j-os/test-pi4j-picade-os/ title="Test Pi4J Picade OS" class=dd-item><a href=/pi4j-os/test-pi4j-picade-os/>Test Pi4J Picade OS</a></li></ul></li><li data-nav-id=/architecture/ title=Architecture/Design class=dd-item><a href=/architecture/>Architecture/Design</a><ul><li data-nav-id=/architecture/about-the-code/ title="Project source structure" class=dd-item><a href=/architecture/about-the-code/>Project source structure</a><ul><li data-nav-id=/architecture/about-the-code/download-sources/ title=Download/Install class=dd-item><a href=/architecture/about-the-code/download-sources/>Download/Install</a></li><li data-nav-id=/architecture/about-the-code/build-instructions/ title="Build Instructions" class=dd-item><a href=/architecture/about-the-code/build-instructions/>Build Instructions</a></li><li data-nav-id=/architecture/about-the-code/maven-settings/ title="Maven settings" class=dd-item><a href=/architecture/about-the-code/maven-settings/>Maven settings</a></li><li data-nav-id=/architecture/about-the-code/code-styling/ title="Code styling" class=dd-item><a href=/architecture/about-the-code/code-styling/>Code styling</a></li><li data-nav-id=/architecture/about-the-code/hardware-testing/ title="Hardware testing" class=dd-item><a href=/architecture/about-the-code/hardware-testing/>Hardware testing</a></li></ul></li><li data-nav-id=/architecture/advanced/ title=Advanced class=dd-item><a href=/architecture/advanced/>Advanced</a><ul><li data-nav-id=/architecture/advanced/annotated-provisioning/ title="Annotated provisioning" class=dd-item><a href=/architecture/advanced/annotated-provisioning/>Annotated provisioning</a></li><li data-nav-id=/architecture/advanced/dependency-injection/ title="Dependency injection" class=dd-item><a href=/architecture/advanced/dependency-injection/>Dependency injection</a></li><li data-nav-id=/architecture/advanced/library-path/ title="Native Library Path" class=dd-item><a href=/architecture/advanced/library-path/>Native Library Path</a></li><li data-nav-id=/architecture/advanced/plugins/ title=Plug-ins class=dd-item><a href=/architecture/advanced/plugins/>Plug-ins</a></li><li data-nav-id=/architecture/advanced/remote-support/ title="Remote support" class=dd-item><a href=/architecture/advanced/remote-support/>Remote support</a></li></ul></li><li data-nav-id=/architecture/pi4j-logo/ title="The Pi4J Logo" class=dd-item><a href=/architecture/pi4j-logo/>The Pi4J Logo</a></li></ul></li><li data-nav-id=/kotlin/ title="Pi4J Kotlin DSL" class=dd-item><a href=/kotlin/>Pi4J Kotlin DSL</a><ul><li data-nav-id=/kotlin/minimal-kotlin-example/ title="Minimal Kotlin Pi4J example" class=dd-item><a href=/kotlin/minimal-kotlin-example/>Minimal Kotlin Pi4J example</a></li><li data-nav-id=/kotlin/kotlin-api-docs/ title="Kotlin API & DSL Documentation" class=dd-item><a href=/kotlin/kotlin-api-docs/>Kotlin API & DSL Documentation</a></li><li data-nav-id=/kotlin/coroutines/ title="Coroutines Support" class=dd-item><a href=/kotlin/coroutines/>Coroutines Support</a></li><li data-nav-id=/kotlin/i2c/ title="I²C Kotlin DSL" class=dd-item><a href=/kotlin/i2c/>I²C Kotlin DSL</a></li><li data-nav-id=/kotlin/serial/ title="Serial Kotlin DSL" class=dd-item><a href=/kotlin/serial/>Serial Kotlin DSL</a></li></ul></li><li data-nav-id=/blog/ title=Blogs class=dd-item><a href=/blog/>Blogs</a><ul><li data-nav-id=/blog/2023/20230731_pi4j_os/ title="Pi4J Operating System" class=dd-item><a href=/blog/2023/20230731_pi4j_os/>Pi4J Operating System</a></li><li data-nav-id=/blog/2022/20221128_led_strip_with_jbang/ title="LED strip with Pi4J and JBang" class=dd-item><a href=/blog/2022/20221128_led_strip_with_jbang/>LED strip with Pi4J and JBang</a></li><li data-nav-id=/blog/2022/20221117_kotlin_on_raspberrypi/ title="Kotlin on the Raspberry Pi" class=dd-item><a href=/blog/2022/20221117_kotlin_on_raspberrypi/>Kotlin on the Raspberry Pi</a></li><li data-nav-id=/blog/2022/20220113_javafx_pi4j_template/ title="Getting Started Template" class=dd-item><a href=/blog/2022/20220113_javafx_pi4j_template/>Getting Started Template</a></li></ul></li><li data-nav-id=/featured-projects/ title="Featured Projects" class="dd-item
parent"><a href=/featured-projects/>Featured Projects</a><ul><li data-nav-id=/featured-projects/soft-real-time-plc-written-in-strolch/ title="Soft real time PLC" class=dd-item><a href=/featured-projects/soft-real-time-plc-written-in-strolch/>Soft real time PLC</a></li><li data-nav-id=/featured-projects/pijukebox-by-daniel-martensson/ title=PiJukeBox class=dd-item><a href=/featured-projects/pijukebox-by-daniel-martensson/>PiJukeBox</a></li><li data-nav-id=/featured-projects/cocktail-maker-by-alex9849/ title=CocktailPi class=dd-item><a href=/featured-projects/cocktail-maker-by-alex9849/>CocktailPi</a></li><li data-nav-id=/featured-projects/street-artist-robot/ title="Didier the street artist robot" class=dd-item><a href=/featured-projects/street-artist-robot/>Didier the street artist robot</a></li><li data-nav-id=/featured-projects/joystick-game/ title="JMonkeyEngine with Joystick" class="dd-item active"><a href=/featured-projects/joystick-game/>JMonkeyEngine with Joystick</a></li><li data-nav-id=/featured-projects/sensor-drivers/ title="Sensor drivers" class=dd-item><a href=/featured-projects/sensor-drivers/>Sensor drivers</a></li></ul></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://pi4j.com/tags target=_blank><i class="fas fa-tags" style=width:25px></i>Tags</a></li><li><a class=padding href=https://github.com/Pi4J target=_blank><i class="fab fa-github" style=width:25px></i>GitHub project</a></li><li><a class=padding href=https://foojay.social/@pi4j target=_blank rel=me><i class="fab fa-mastodon" style=width:25px></i>Mastodon @pi4j@foojay.social</a></li><li><a class=padding href=https://twitter.com/pi4J target=_blank><i class="fab fa-twitter" style=width:25px></i>Twitter @pi4j</a></li><li><a class=padding href=https://github.com/Pi4J/pi4j-v2/discussions target=_blank><i class="fab fa-github" style=width:25px></i>Pi4J Forum</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a>from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p><p>Visitor counter by <a href=https://clicky.com/101436354 target=_blank rel=noopener>Clicky</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/Pi4J/pi4j.github.io/blob/main/content/featured-projects/joystick-game.md target=blank><i class="fas fa-code-branch"></i><span id=top-github-link-text>Edit this page</span></a></div><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span><span class=links><a href=/>Welcome to Pi4J</a> > <a href=/featured-projects/>Featured Projects</a> > JMonkeyEngine with Joystick</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#requirements>Requirements</a></li><li><a href=#difference-between-analog-and-digital-signals>Difference between Analog and Digital signals?</a></li><li><a href=#whats-adc>What&rsquo;s ADC?</a><ul><li><a href=#this-is-how-adc-works-under-the-hood-steps-of-converting-analog-to-digital>This is how ADC works under the hood, steps of converting Analog to Digital</a></li></ul></li><li><a href=#whats-spi>What&rsquo;s SPI?</a></li><li><a href=#mcp3008-adc>MCP3008 ADC</a></li><li><a href=#cracking-the-mcp3008-datasheet>Cracking the MCP3008 Datasheet</a></li><li><a href=#wiring-up>Wiring Up</a></li><li><a href=#testing-the-wiring>Testing the wiring</a></li><li><a href=#testing-with-a-jmonkeyengine-vehicle>Testing with a jmonkeyengine vehicle</a></li><li><a href=#video-of-operation>Video of operation</a></li><li><a href=#more-at-sources>More at sources</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>JMonkeyEngine with Joystick</h1><p><a href=https://www.linkedin.com/in/pavl-g-420b81228/ target=_blank rel=noopener>Pavl G.</a> created a Java Gradle library to control a car in a <a href=https://jmonkeyengine.org/ target=_blank rel=noopener>JMonkeyEngine</a> game with an arduino joystick module connected to a Raspberry Pi4 model B, using GPIO digital pins and SPI interfacing through MCP3008 ADC (Analog~Digital Converter).</p><h2 id=requirements>Requirements</h2><ul><li>Raspberry Pi with arm processor (pi3, pi4, piZero) with a working java8 (preferred).</li><li>Female-to-male jumper wires.</li><li>Breadboard.</li><li>Arduino Joystick module.</li><li>MCP3008 IC (ADC &ndash; other adcs may work too, but we are covering only MCP3008 here).</li><li>Some patience and time.</li></ul><h2 id=difference-between-analog-and-digital-signals>Difference between Analog and Digital signals?</h2><p><img src=https://user-images.githubusercontent.com/60224159/157847529-3b46c3e9-8d39-428c-91a1-f3018cb9f9e3.png alt=image></p><ul><li>An analog signal is a continuously variable voltage between 0 and Vmax over time, examples : Temperature sensor output, Potentiometers (joysticks)&mldr;.</li><li>A digital signal is rather a discrete step-by-step output voltage of LOW (fall) to HIGH (rise) according to the switch position among a network of resistors.</li><li>To convert from analog signals to digial signals, we need to encode the output voltage changing over time to some sequence of bits.</li><li>We cannot interface analog electronics on digital devices such as (arduinos and raspberry pi w/o converting into digial signals).</li></ul><h2 id=whats-adc>What&rsquo;s ADC?</h2><p>Let&rsquo;s have an example of a 3-bit Analogue to Digital Converter :</p><p><img src=https://user-images.githubusercontent.com/60224159/157848094-2b43e3ba-8434-41bd-950c-d0847718ac24.png alt=image>
<img src=https://user-images.githubusercontent.com/60224159/157848257-f9b3c795-bf30-4fdd-8a57-3e9259c35a1f.png alt=image></p><h3 id=this-is-how-adc-works-under-the-hood-steps-of-converting-analog-to-digital>This is how ADC works under the hood, steps of converting Analog to Digital</h3><ol><li>Analog voltage goes through <code>Vin</code>,</li><li>Then it&rsquo;s passed to a network of voltage comparators that compares its voltage to the selected reference range (Vref, which is selected at the time of wiring).</li><li>If <code>Vin</code> > <code>Vref</code> the comparator output would be HIGH aka (1), if <code>Vin</code> &lt; <code>Vref</code> the comparator output would be LOW aka (0).</li><li>The significant of having a network of comparators is to encode the value of the analog signal into a digital sequence of bits.</li><li>The output of comparators <code>Dn</code> gets passed into a 3-bit priority encoder.</li><li>The priority encoder by definition, it encodes based on the <strong>high priority input</strong> and ignores <strong>the low priority input</strong>.</li><li>So, if <code>Vin = 3.5 to 4.0 V</code> then the <code>Comparators output = 11111111</code>,</li><li>At last when inputting the comparator output into the priority encoder the encoder gives a value of 7 which points to D7 of comparator U7 aka the last voltage level, and that&rsquo;s true because our Vin is bigger than the Vref<max>.</li></ol><h2 id=whats-spi>What&rsquo;s SPI?</h2><p><img src=https://user-images.githubusercontent.com/60224159/157852097-4800a22c-c81b-4a1b-ba2b-2d1ab2b1652b.png alt=image></p><ul><li>Serial Peripheral Interface (SPI) is an interface bus commonly used to send data between microcontrollers and small peripherals such as shift registers, sensors, and SD cards. It uses separate clock and data lines, along with a select line to choose the device you wish to talk to.</li><li>Our target is to transfer the output from our priority encoder to the BCM processor of our Pi throughout the SPI protocol (Synchronously over Tx from MCP3008 to Rx of the Pi).</li><li>To send and receive synchronous data we use <code>MISO</code> (the same as CIPO) for receving data from peripherals and <code>MOSI</code> (the same as COPI) to send data to the peripherals.</li><li>MISO : Master-in-Slave-Out = CIPO : Controller-in-peripheral-out.</li><li>MOSI : Master-out-Slave-In = COPI : Controller-out-Peripheral-in.</li><li>MCP3008 is used to receive analog input, so MISO or CIPO is our common active data line.</li><li>CS is the chip select, it&rsquo;s used to select which peripheral device to use.</li><li>SCLK is the serial clock and it&rsquo;s used to synchronize data on a data line, to have a clear separate message per 8 clocks (8-bit message).</li></ul><p><img src=https://user-images.githubusercontent.com/60224159/158260327-7252ab74-e77f-464b-b569-fdd0313f60da.png alt=image></p><p>This diagram describes steps of how SPI Communication works in MCP3008 :</p><ol><li>CS = LOW -> signifies the selection to peripheral IO 0.</li><li>SCLK += Clock.</li><li>Rising edge of clock (LOW-to-HIGH) -&#187; Reads data from A/D and latches it for the MCU (micro-controller unit) -&#187; Creates the rising edges of <code>Din</code> line (Cyan line) -&#187; MOSI line.</li><li>Falling edge of clock (HIGH-to_LOW) -&#187; Writes data from the MCU to the A/D -&#187; Creates the falling edges of <code>Dout</code> line bits (magneta line) -&#187; MISO line.</li><li>Each input (D0, D1, D2, Dn) is an analog input that&rsquo;s encoded into a 10-bit digital output (B0-B9) and then clocked out for the MCU on the falling edge of the SCLK as shown by the last data line (Dout).</li><li><code>B-null (red circle)</code> is the leading bit, it marks the last bit clocked out.</li></ol><h2 id=mcp3008-adc>MCP3008 ADC</h2><p><img src=https://user-images.githubusercontent.com/60224159/158028785-b54f7832-a876-4875-aeae-683dbeb0e895.png alt=image></p><ul><li>MCP3008 A/D Converter is a 10-bit analog to digital converter.</li><li>10-bit means : it has a maximum resolution of 10-bits <code>in binary (1111111111)</code> = <code>in dec (1023)</code> = <code>in hex (3FF)</code> and that&rsquo;s determined by the Vref vs Dn voltage as discussed before using the voltage comparator.</li><li>MCP3008 has 8 analog input channels that can be used in parallel (updated via SCLK using the SPI), the last number <code>8</code> stands for the number of analog inputs.</li><li>MCP3008 controls its logic using SPI.</li><li>MCP3008 can accept between <code>2v7</code> and <code>5v5</code> after which the IC may burn out.</li><li>MCP3008 comes in various packages for various usages (PDIP, SOIC,&mldr;.), in our case we would use the PDIP.</li><li>Other adcs like <code>MCP3002</code> and <code>MCP3004</code> works by the same analogy, except that they can accept a max of 2 analog inputs and a max of 8 analog inputs respectively, if your project would use a max of 2 analog inputs, then you could buy <code>MCP3002</code> and still can follow this tutorial.</li></ul><h2 id=cracking-the-mcp3008-datasheet>Cracking the MCP3008 Datasheet</h2><p>Alright, here is how to tackle down the MCP3008/MCP3004 datasheet :</p><ol><li><p>Know your package type whether PDIP (Plastic Dual in-Line), SOIC (Small Outline IC), TSSOP (Thin Shrink Small Outline Plastic) :</p><p><img src=https://user-images.githubusercontent.com/60224159/158029157-5c1e6ef7-6d2a-4802-a302-7208cd8c7d8c.png alt=image>
<img src=https://user-images.githubusercontent.com/60224159/158029201-9b789559-2ed2-407a-a3e7-53dcbea93b30.png alt=image></p></li><li><p>Know your pin configuration and orientation :</p><ul><li>In our case, we do a tutorial, so we will use PDIP (Plastic-Dual-In-Line) package :</li></ul><p><img src=https://user-images.githubusercontent.com/60224159/158029235-ecbbd08d-992f-4ca0-bf53-994dcaf53c1d.png alt=image></p><ul><li>So, our pins outline are as follows :</li></ul><p><img src=https://user-images.githubusercontent.com/60224159/158029866-e9b0f8fa-17ba-463f-9e81-23a66fa7dc86.png alt=image>
<img src=https://user-images.githubusercontent.com/60224159/158029842-f27a58cd-9b21-4759-9c51-554ab0c41a78.png alt=image></p></li><li><p>Know the meaning of pins on your package :</p><ul><li><p>This is the hardest part of understanding how an IC work, but quick looking on an internal diagram may be insightful :</p><p><img src=https://user-images.githubusercontent.com/60224159/158267851-18b269f9-7a40-49c9-9a61-82ab37c0676d.png alt=image></p></li></ul><p>As you can see the MCP has a different way of comparing VREF and Din and encoding the results, it uses a modern way called <code>10-bit SAR - Successive Approximation Register and a DAC</code> which we will not cover in this tutorial but the net result is the same as a using a network of resistors with comparators.</p></li><li><p>Know the max ratings of various IC properties before wiring up :</p><ul><li>VDD-Max-Rating = 5v5.</li><li>VREF-Max-Raing = 5v5, min-working-voltage = 2v7.</li><li>Analog-Channel-Max-Rating = VREF = 5v5 &ndash; after that the channel may burn or the IC may not work.</li><li>Max-Clock-Rating = f-CLK = 3.6 MHZ on 5v5, 1.35 MHZ on 2v7.</li><li>Error = +/- 1.0 LSB (least significant bit).</li><li>Resolution = max analog value = 10-bits = 0b1111111111 = 1023.</li><li>Other data like CLK rising, falling and setup time are neglectable.</li><li>You may pay attention to temperature data if your project works in a special temperature case like a hot place or freezer or etc.</li></ul></li><li><p>Have some fun with the IC.</p></li></ol><h2 id=wiring-up>Wiring Up</h2><p><img src=https://user-images.githubusercontent.com/60224159/157844859-34b0373b-09e2-488e-af82-d993a2d48719.png alt="Pi4j Joystick_bb"></p><ul><li>Vcc : is used for powering up the IC and not to compare with VREF.</li><li>Vref : is used for controlling the maximum resolution of the input voltage (analog signal), if VREF = 5v5 (maximum voltage received by MCP3008), then the resolution of Vin is a 100%.</li></ul><h2 id=testing-the-wiring>Testing the wiring</h2><p>Before going deeper and testing with jme vehicle, please test this code and do your conclusions :</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// Define MCP3008 provider on CS0 -- Peripheral device 0
</span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> MCP3008GpioProvider mcp3008GpioProvider <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> MCP3008GpioProvider<span style=color:#f92672>(</span>SpiChannel<span style=color:#f92672>.</span><span style=color:#a6e22e>CS0</span><span style=color:#f92672>);</span>
<span style=color:#75715e>// define analog input pins on the adc
</span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> GpioPinAnalogInput<span style=color:#f92672>[]</span> gpioPinAnalogInput<span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> GpioPinAnalogInput<span style=color:#f92672>[</span>2<span style=color:#f92672>];</span>
gpioPinAnalogInput<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> MCP3008Pin<span style=color:#f92672>.</span><span style=color:#a6e22e>CH0</span><span style=color:#f92672>;</span>
gpioPinAnalogInput<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> MCP3008Pin<span style=color:#f92672>.</span><span style=color:#a6e22e>CH1</span><span style=color:#f92672>;</span>
<span style=color:#75715e>// define the threshold analog (the minimum voltage at which the Pi can listen to).
</span><span style=color:#75715e></span>mcp3008GpioProvider<span style=color:#f92672>.</span><span style=color:#a6e22e>setEventThreshold</span><span style=color:#f92672>(</span>thresholdAnalogValue<span style=color:#f92672>,</span> gpioPinAnalogInput<span style=color:#f92672>);</span>
<span style=color:#75715e>// enable monitoring of analog values with an interval of 250 ms
</span><span style=color:#75715e></span>mcp3008GpioProvider<span style=color:#f92672>.</span><span style=color:#a6e22e>setMonitorEnabled</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
mcp3008GpioProvider<span style=color:#f92672>.</span><span style=color:#a6e22e>setMonitorInterval</span><span style=color:#f92672>(</span>250<span style=color:#f92672>);</span>
<span style=color:#75715e>// start collecting data from the SPi connected to MCP3008 output.
</span><span style=color:#75715e></span><span style=color:#66d9ef>final</span> GpioController gpioController <span style=color:#f92672>=</span> GpioFactory<span style=color:#f92672>.</span><span style=color:#a6e22e>getInstance</span><span style=color:#f92672>();</span>
gpioController<span style=color:#f92672>.</span><span style=color:#a6e22e>addListener</span><span style=color:#f92672>((</span>GpioPinListenerAnalog<span style=color:#f92672>)</span> event <span style=color:#f92672>-&gt;</span> <span style=color:#f92672>{</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Value at CH0 : &#34;</span> <span style=color:#f92672>+</span> mcp3008GpioProvider<span style=color:#f92672>.</span><span style=color:#a6e22e>getValue</span><span style=color:#f92672>(</span>gpioPinAnalogInput<span style=color:#f92672>[</span>0<span style=color:#f92672>]));</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Value at CH1 : &#34;</span> <span style=color:#f92672>+</span> mcp3008GpioProvider<span style=color:#f92672>.</span><span style=color:#a6e22e>getValue</span><span style=color:#f92672>(</span>gpioPinAnalogInput<span style=color:#f92672>[</span>1<span style=color:#f92672>]));</span>
<span style=color:#f92672>},</span> gpioPinAnalogInput<span style=color:#f92672>);</span>
</code></pre></div><h2 id=testing-with-a-jmonkeyengine-vehicle>Testing with a jmonkeyengine vehicle</h2><p>It&rsquo;s very hard to give you a full overview of how to create a jmonkeyengine vehicle in this tutorial, so you could fairly refer to jme docs and examples for more :</p><ul><li>Use the physics in your game and control your game via keyboard : <a href=https://wiki.jmonkeyengine.org/docs/3.4/tutorials/beginner/hello_physics.html>https://wiki.jmonkeyengine.org/docs/3.4/tutorials/beginner/hello_physics.html</a></li><li>A Keyboard controlled car demo : <a href=https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/bullet/TestPhysicsCar.java>https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-examples/src/main/java/jme3test/bullet/TestPhysicsCar.java</a></li><li>The idea is simple, any game can be controlled using a keyboard interface (bound to jme update), so you can simply replace that with a custom <code>InputHandler</code> using a custom hardware.</li><li>The trick is to bind your joystick pi4j interface to jme thread (OpenGL&rsquo;s thread).</li></ul><h2 id=video-of-operation>Video of operation</h2><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/9ZvhFQSwHF0 style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div><h2 id=more-at-sources>More at sources</h2><ul><li>ADC overview : <a href=https://www.electronics-tutorials.ws/combination/analogue-to-digital-converter.html>https://www.electronics-tutorials.ws/combination/analogue-to-digital-converter.html</a></li><li>MCP3008 ADC : <a href=https://www.microchip.com/en-us/product/MCP3008>https://www.microchip.com/en-us/product/MCP3008</a></li><li>SPI overview : <a href=https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi/all>https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi/all</a></li><li>Gradle lib : <a href=https://github.com/Scrappers-glitch/JoyStickModule>https://github.com/Scrappers-glitch/JoyStickModule</a></li><li>Testcase : <a href=https://github.com/Scrappers-glitch/JmeCarPhysicsTestRPI>https://github.com/Scrappers-glitch/JmeCarPhysicsTestRPI</a></li></ul><footer class=footline></footer></div></div><div id=navigation></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1702382827></script><script src=/js/perfect-scrollbar.min.js?1702382827></script><script src=/js/perfect-scrollbar.jquery.min.js?1702382827></script><script src=/js/jquery.sticky.js?1702382827></script><script src=/js/featherlight.min.js?1702382827></script><script src=/js/highlight.pack.js?1702382827></script><script>hljs.initHighlightingOnLoad();</script><script src=/js/modernizr.custom-3.6.0.js?1702382827></script><script src=/js/learn.js?1702382827></script><script src=/js/hugo-learn.js?1702382827></script><script src=/mermaid/mermaid.js?1702382827></script><script>mermaid.initialize({startOnLoad:true});</script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3></script><script type=text/javascript>docsearch({appId:"QJ0EB8YHN3",apiKey:"8ddde1d36a62d9e2d7c4333239e6a2fc",indexName:"pi4j",container:'#docsearch',debug:true});</script><script async data-id=101436817 src=//static.getclicky.com/js></script></body></html>