<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/apt/example/shutdown.apt.vm at 2021-03-01
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>The Pi4J Project &#x2013; Shutdown Example</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.9.min.js"></script>
<meta name="COPYRIGHT" content="Copyright (c); 2012-2021 Pi4J. All Rights Reserved."/>
			<meta name="KEYWORDS" content="raspberry, pi, raspberrypi, raspi, java, pi4j, java pi, gpio, input, output, io, odroid, bananapi"/>
			<meta name="ROBOTS" content="ALL"/>
			<meta name="DESCRIPTION" content="The Pi4J Project provides Java programmers full IO control of a Raspberry Pi"/>
			<meta name="AUTHOR" content="Robert Savage"/>

            <!-- FAVICONS -->
            <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"/>
            <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"/>
            <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"/>
            <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"/>
            <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"/>
            <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"/>
            <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"/>
            <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"/>
            <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"/>
            <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32"/>
            <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192"/>
            <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96"/>
            <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16"/>
            <link rel="manifest" href="/manifest.json"/>
            <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"/>
            <meta name="msapplication-TileColor" content="#da532c"/>
            <meta name="msapplication-TileImage" content="/mstile-144x144.png"/>
            <meta name="theme-color" content="#ffffff"/>

			<!-- GOOGLE ANALYTICS SCRIPT -->
			<script type="text/javascript">

			  var _gaq = _gaq || [];
			  _gaq.push(['_setAccount', 'UA-35332834-1']);
			  _gaq.push(['_setDomainName', 'pi4j.com']);
			  _gaq.push(['_trackPageview']);

			  (function() {
			    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			  })();

			</script>
  </head>
  <body class="topBarDisabled">
    <a href="https://github.com/Pi4J/pi4j">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href=".././" id="bannerLeft"><img src="../images/logos/pi4j-header.png"  alt="Pi4J"/></a></div>
          <div class="pull-right"><a href="http://www.raspberrypi.org/" id="bannerRight"><img src="../images/logos/trademarks.png"  alt="The Pi4J Project"/></a></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2021-03-01<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 1.4</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="http://www.savagehomeautomation.com/projects/category/pi4j" class="externalLink" target="_blank" title="Blog">Blog</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://twitter.com/pi4j" class="externalLink" target="_blank" title="@Pi4J (Twitter)">@Pi4J (Twitter)</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://forum.pi4j.com" class="externalLink" target="pi4j-forum" title="Forum">Forum</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://github.com/Pi4J/pi4j-v1/issues/" class="externalLink" target="pi4j-github" title="Issues">Issues</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://github.com/Pi4J/pi4j-v1/" class="externalLink" target="pi4j-github" title="Github">Github</a></li>
      <li class="pull-right"><span class="divider">|</span>
<a href="../download.html" title="Downloads">Downloads</a></li>
      <li class="pull-right"><a href="http://pi4j.com/" class="externalLink" title="Home">Home</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Pi4J</li>
    <li><a href="../index.html" title="Welcome"><span class="none"></span>Welcome</a></li>
    <li><a href="../team-list.html" title="The Team"><span class="none"></span>The Team</a></li>
    <li><a href="../contact.html" title="Contact"><span class="none"></span>Contact</a></li>
    <li><a href="../faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="../license.html" title="License"><span class="none"></span>License</a></li>
    <li><a href="../dependency.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="../release-notes.html" title="Release Notes"><span class="none"></span>Release Notes</a></li>
    <li><a href="../install.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="../download.html" title="Download"><span class="none"></span>Download</a></li>
    <li><a href="../usage.html" title="Usage"><span class="none"></span>Usage</a></li>
    <li><a href="../pin-numbering-scheme.html" title="Pin Numbering Scheme"><span class="none"></span>Pin Numbering Scheme</a></li>
    <li><a href="../apidocs/index.html" target="pi4j-javadoc" title="JavaDoc"><span class="none"></span>JavaDoc</a></li>
   <li class="nav-header">Pin Numbering</li>
    <li><a href="../pins/rpi-1a.html" title="Raspberry Pi - 1A"><span class="none"></span>Raspberry Pi - 1A</a></li>
    <li><a href="../pins/rpi-1ap.html" title="Raspberry Pi - 1A+"><span class="none"></span>Raspberry Pi - 1A+</a></li>
    <li><a href="../pins/rpi-1b-rev1.html" title="Raspberry Pi - 1B (Rev 1)"><span class="none"></span>Raspberry Pi - 1B (Rev 1)</a></li>
    <li><a href="../pins/rpi-1b-rev2.html" title="Raspberry Pi - 1B (Rev 2)"><span class="none"></span>Raspberry Pi - 1B (Rev 2)</a></li>
    <li><a href="../pins/rpi-1bp.html" title="Raspberry Pi - 1B+"><span class="none"></span>Raspberry Pi - 1B+</a></li>
    <li><a href="../pins/rpi-2b.html" title="Raspberry Pi - 2B"><span class="none"></span>Raspberry Pi - 2B</a></li>
    <li><a href="../pins/rpi-3b.html" title="Raspberry Pi - 3B"><span class="none"></span>Raspberry Pi - 3B</a></li>
    <li><a href="../pins/rpi-3bp.html" title="Raspberry Pi - 3B+"><span class="none"></span>Raspberry Pi - 3B+</a></li>
    <li><a href="../pins/rpi-3ap.html" title="Raspberry Pi - 3A+"><span class="none"></span>Raspberry Pi - 3A+</a></li>
    <li><a href="../pins/rpi-4b.html" title="Raspberry Pi - 4B"><span class="none"></span>Raspberry Pi - 4B</a></li>
    <li><a href="../pins/rpi-400.html" title="Raspberry Pi - 400"><span class="none"></span>Raspberry Pi - 400</a></li>
    <li><a href="../pins/rpi-zero.html" title="Raspberry Pi - Zero"><span class="none"></span>Raspberry Pi - Zero</a></li>
    <li><a href="../pins/rpi-zerow.html" title="Raspberry Pi - Zero W"><span class="none"></span>Raspberry Pi - Zero W</a></li>
    <li><a href="../pins/rpi-cm1.html" title="Raspberry Pi - CM1 (Compute Module)"><span class="none"></span>Raspberry Pi - CM1 (Compute Module)</a></li>
    <li><a href="../pins/rpi-cm3.html" title="Raspberry Pi - CM3 (Compute Module)"><span class="none"></span>Raspberry Pi - CM3 (Compute Module)</a></li>
    <li><a href="../pins/rpi-cm3p.html" title="Raspberry Pi - CM3+ (Compute Module)"><span class="none"></span>Raspberry Pi - CM3+ (Compute Module)</a></li>
    <li><a href="../pins/rpi-cm4.html" title="Raspberry Pi - CM4 (Compute Module)"><span class="none"></span>Raspberry Pi - CM4 (Compute Module)</a></li>
   <li class="nav-header">GPIO Examples</li>
    <li><a href="../example/control.html" title="Control GPIO"><span class="none"></span>Control GPIO</a></li>
    <li><a href="../example/listener.html" title="Listen for GPIO Events"><span class="none"></span>Listen for GPIO Events</a></li>
    <li class="active"><a href="#"><span class="none"></span>Shutdown GPIO</a></li>
    <li><a href="../example/trigger.html" title="Trigger GPIO on Events"><span class="none"></span>Trigger GPIO on Events</a></li>
   <li class="nav-header">Other Examples</li>
    <li><a href="../example/serial.html" title="Serial Communication"><span class="none"></span>Serial Communication</a></li>
    <li><a href="../example/system-info.html" title="System/Network Information"><span class="none"></span>System/Network Information</a></li>
    <li><a href="../example/more.html" title="More Pi4J Examples"><span class="none"></span>More Pi4J Examples</a></li>
   <li class="nav-header">Utilities</li>
    <li><a href="../utility/pi4j.html" title="Pi4J Utility Script"><span class="none"></span>Pi4J Utility Script</a></li>
   <li class="nav-header">Presentations/Articles</li>
    <li><a href="../articles.html#Devoxx_2014_Conference_Session_2014_-_Antwerp_Belgium" title="Devoxx Presentations (2014)"><span class="none"></span>Devoxx Presentations (2014)</a></li>
    <li><a href="../articles.html#Java_Magazine_Article_2014" title="Java Magazine Article (2014)"><span class="none"></span>Java Magazine Article (2014)</a></li>
    <li><a href="../articles.html#JavaOne_Presentation_2013" title="JavaOne Presentation (2013)"><span class="none"></span>JavaOne Presentation (2013)</a></li>
    <li><a href="../articles.html#SunriseSunset_Timer_for_Christmas_Lights_Project" title="Sunrise/Sunset Timer Project"><span class="none"></span>Sunrise/Sunset Timer Project</a></li>
   <li class="nav-header">Project Development</li>
    <li><a href="../project-info.html" title="Project Information"><span class="none"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="none"></span>Project Reports</a></li>
   <li class="nav-header">Previous Releases</li>
    <li><a href="../../1.3" title="Pi4J Version 1.3"><span class="none"></span>Pi4J Version 1.3</a></li>
    <li><a href="../../1.2" title="Pi4J Version 1.2"><span class="none"></span>Pi4J Version 1.2</a></li>
    <li><a href="../../1.1" title="Pi4J Version 1.1"><span class="none"></span>Pi4J Version 1.1</a></li>
    <li><a href="../../1.0" title="Pi4J Version 1.0"><span class="none"></span>Pi4J Version 1.0</a></li>
    <li><a href="../../0.0.5" title="Pi4J Version 0.0.5"><span class="none"></span>Pi4J Version 0.0.5</a></li>
    <li><a href="../../0.0.4" title="Pi4J Version 0.0.4"><span class="none"></span>Pi4J Version 0.0.4</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://www.raspberrypi.org/" title="RaspberryPi" class="builtBy"><img class="builtBy"  alt="RaspberryPi" src="../images/logos/raspberrypi.png"    /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="GPIO_Shutdown_using_Pi4J."></a>GPIO Shutdown using Pi4J.</h2>
<p>If is highly likely that your program should return the GPIO pins states to a known fixed state any time the user application is exited. The following example demonstrates how to configure the shutdown behavior that will be applied to the GPIO pins when the Java application terminates.</p><section>
<h3><a name="Source_Code"></a>Source Code</h3>
<p>The source code for this example is included in the github repository:<br /><a class="externalLink" href="https://github.com/Pi4J/pi4j-v1/tree/master/pi4j-example/src/main/java/ShutdownGpioExample.java">https://github.com/Pi4J/pi4j-v1/tree/master/pi4j-example/src/main/java/ShutdownGpioExample.java</a></p>
<div class="source"><pre class="prettyprint linenums">

/*
 * #%L
 * **********************************************************************
 * ORGANIZATION  :  Pi4J
 * PROJECT       :  Pi4J :: Java Examples
 * FILENAME      :  ShutdownGpioExample.java
 *
 * This file is part of the Pi4J project. More information about
 * this project can be found here:  https://pi4j.com/
 * **********************************************************************
 * %%
 * Copyright (C) 2012 - 2021 Pi4J
 * %%
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * #L%
 */

import com.pi4j.io.gpio.GpioController;
import com.pi4j.io.gpio.GpioFactory;
import com.pi4j.io.gpio.GpioPinDigitalOutput;
import com.pi4j.io.gpio.PinPullResistance;
import com.pi4j.io.gpio.PinState;
import com.pi4j.io.gpio.RaspiPin;

/**
 * This example code demonstrates how to perform simple state
 * control of a GPIO pin on the Raspberry Pi.
 *
 * @author Robert Savage
 */
public class ShutdownGpioExample {

    public static void main(String[] args) throws InterruptedException {

        System.out.println(&quot;&lt;--Pi4J--&gt; GPIO Shutdown Example ... started.&quot;);

        // create gpio controller
        final GpioController gpio = GpioFactory.getInstance();

        // provision gpio pin #01 as an output pin and turn on
        final GpioPinDigitalOutput pin = gpio.provisionDigitalOutputPin(RaspiPin.GPIO_01, PinState.HIGH);

        // configure the pin shutdown behavior; these settings will be
        // automatically applied to the pin when the application is terminated
        pin.setShutdownOptions(true, PinState.LOW, PinPullResistance.OFF);

        System.out.println(&quot;--&gt; GPIO state should be: ON&quot;);
        System.out.println(&quot;    This program will automatically terminate in 10 seconds,&quot;);
        System.out.println(&quot;    or you can use the CTRL-C keystroke to terminate at any time.&quot;);
        System.out.println(&quot;    When the program terminates, the GPIO state should be shutdown and set to: OFF&quot;);

        // wait 10 seconds
        Thread.sleep(10000);

        System.out.println(&quot; .. shutting down now ...&quot;);

        // stop all GPIO activity/threads by shutting down the GPIO controller
        // (this method will forcefully shutdown all GPIO monitoring threads and scheduled tasks)
        gpio.shutdown();

        System.out.println(&quot;Exiting ShutdownGpioExample&quot;);
    }
}
</pre></div></section><section>
<h3><a name="JavaDoc"></a>JavaDoc</h3>
<p>The following JavaDoc links are the primary interfaces used to perform automated shutdown for the Pi's GPIO pins:</p>
<ul>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/GpioFactory.html">com.pi4j.io.gpio.GpioFactory</a></li>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/Gpio.html">com.pi4j.io.gpio.Gpio</a></li>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/GpioPin.html">com.pi4j.io.gpio.GpioPin</a></li>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/PinEdge.html">com.pi4j.io.gpio.PinEdge</a></li>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/PinState.html">com.pi4j.io.gpio.PinState</a></li></ul></section><section>
<h3><a name="Wiring_Diagram"></a>Wiring Diagram</h3>
<p>The following circuit can be used in conjunction with this sample code.</p><figure><img src="../images/gpio-control-example.png" alt="" /></figure>
<p><a href="../images/gpio-control-example-large.png">(click here for hi-resolution image)</a></p></section><section>
<h3><a name="Navigate"></a>Navigate</h3>
<p>If you have not already downloaded and installed the Pi4J library on the RaspberryPi, then view this page for instructions on where to download and how to install Pi4J: <br /><a href="../install.html">Download &amp; Install Pi4J</a></p>
<p>First, locate the <i>ShutdownGpioExample.java</i> source file in the samples folder of the Pi4J installation on the RaspberryPi. <br />You can use the following command on the Pi's console or SSH terminal to navigate to this path: <br /><code>cd /opt/pi4j/examples</code></p></section><section>
<h3><a name="Compile"></a>Compile</h3>
<p>Next, use the following command to compile this example program:</p>
<p><code>javac -classpath .:classes:/opt/pi4j/lib/'*' -d . ShutdownGpioExample.java</code></p></section><section>
<h3><a name="Execute"></a>Execute</h3>
<p>The following command will run this example program:</p>
<p><code>sudo java -classpath .:classes:/opt/pi4j/lib/'*' ShutdownGpioExample</code></p></section><section>
<h3><a name="Output"></a>Output</h3>
<p>You should see the attached LED perform as follows:</p><figure><img src="../images/pinon.png" alt="" /></figure>
<p>Turn ON</p><figure><img src="../images/pinoff.png" alt="" /></figure>
<p>Turn OFF after 10 seconds when the program automatically exists.<br />Turn OFF if the user terminates the program using CTRL-C prior to the 10 second timeout. </p></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2012&#x2013;2021
<a href="https://pi4j.com">Pi4J</a>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
