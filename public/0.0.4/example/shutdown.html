<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2019-03-01
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190301" />
    <meta http-equiv="Content-Language" content="en" />
    <title>The Pi4J Project - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<META CONTENT="NO-CACHE" HTTP-EQUIV="CACHE-CONTROL"/>
                      
        
<META CONTENT="NO-CACHE" HTTP-EQUIV="PRAGMA"/>
                      
        
<META CONTENT="Copyright Â© 2012 Pi4J. All Rights Reserved." NAME="COPYRIGHT"/>
                      
        
<META CONTENT="raspberry, pi, raspberrypi, raspi, java, pi4j, java pi, gpio, input, output, io" NAME="KEYWORDS"/>
                      
        
<META CONTENT="ALL" NAME="ROBOTS"/>
                      
        
<META CONTENT="The Pi4J Project provides Java programmer&apos;s full IO control to a Raspberry Pi" NAME="DESCRIPTION"/>
                      
        
<META CONTENT="Robert Savage" NAME="AUTHOR"/>
                      
        
<script type="text/javascript">var _gaq = _gaq || [];
			  _gaq.push(['_setAccount', 'UA-35332834-1']);
			  _gaq.push(['_setDomainName', 'pi4j.com']);
			  _gaq.push(['_trackPageview']);
			
			  (function() {
			    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			  })();</script>
          
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href=".././" id="bannerLeft">
                                                                                                <img src="../images/logos/pi4j-header-small3.png"  alt="Pi4J"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.raspberrypi.org/" id="bannerRight">
                                                                                                <img src="../images/logos/trademarks.png"  alt="The Pi4J Project"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2019-03-01</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.0.4</li>
                      
                
                    
      
                                              
    <li class="pull-right">              <a href="http://www.savagehomeautomation.com/projects/category/pi4j" class="externalLink" target="_blank" title="Blog">
        Blog</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="https://twitter.com/pi4j" class="externalLink" target="_blank" title="@Pi4J (Twitter)">
        @Pi4J (Twitter)</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="https://groups.google.com/forum/#!forum/pi4j" class="externalLink" target="pi4j-groups" title="Forum">
        Forum</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="https://github.com/Pi4J/pi4j/issues/" class="externalLink" target="pi4j-github" title="Issues">
        Issues</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="https://github.com/Pi4J/pi4j/" class="externalLink" target="pi4j-github" title="Github">
        Github</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href="../download.html" title="Downloads">
        Downloads</a>
  </li>

        <li class="divider pull-right">|</li>
      
    <li class="pull-right">              <a href=".././" title="Home">
        Home</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Pi4J</li>
                                
      <li>
    
                          <a href="../index.html" title="Welcome">
          <i class="none"></i>
        Welcome</a>
            </li>
                  
      <li>
    
                          <a href="../team-list.html" title="The Team">
          <i class="none"></i>
        The Team</a>
            </li>
                  
      <li>
    
                          <a href="../contact.html" title="Contact">
          <i class="none"></i>
        Contact</a>
            </li>
                  
      <li>
    
                          <a href="../faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                  
      <li>
    
                          <a href="../license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                  
      <li>
    
                          <a href="../dependency.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
                  
      <li>
    
                          <a href="../release-notes.html" title="Release Notes">
          <i class="none"></i>
        Release Notes</a>
            </li>
                  
      <li>
    
                          <a href="../download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                  
      <li>
    
                          <a href="../install.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../usage.html" title="Usage">
          <i class="none"></i>
        Usage</a>
            </li>
                  
      <li>
    
                          <a href="../apidocs/index.html" target="pi4j-javadoc" title="JavaDoc">
          <i class="none"></i>
        JavaDoc</a>
            </li>
                              <li class="nav-header">Examples</li>
                                
      <li>
    
                          <a href="../example/control.html" title="Control GPIO">
          <i class="none"></i>
        Control GPIO</a>
            </li>
                  
      <li>
    
                          <a href="../example/listener.html" title="Listen for GPIO Events">
          <i class="none"></i>
        Listen for GPIO Events</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Shutdown GPIO</a>
          </li>
                  
      <li>
    
                          <a href="../example/trigger.html" title="Trigger GPIO on Events">
          <i class="none"></i>
        Trigger GPIO on Events</a>
            </li>
                  
      <li>
    
                          <a href="../example/serial.html" title="Serial Communication">
          <i class="none"></i>
        Serial Communication</a>
            </li>
                  
      <li>
    
                          <a href="../example/system-info.html" title="System/Network Information">
          <i class="none"></i>
        System/Network Information</a>
            </li>
                              <li class="nav-header">Project Development</li>
                                
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="none"></i>
        Project Information</a>
            </li>
                  
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="none"></i>
        Project Reports</a>
            </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                         <a href="http://www.raspberrypi.org/" title="RaspberryPi" class="builtBy">
        <img class="builtBy"  alt="RaspberryPi" src="../images/logos/raspberrypi.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>GPIO Shutdown using Pi4J.<a name="GPIO_Shutdown_using_Pi4J."></a></h2>
<p>If is highly likely that your program should return the GPIO pins states to a known fixed state any time the user application is exited. The following example demonstrates how to configure the shutdown behavior that will be applied to the GPIO pins when the Java application terminates.</p>
<div class="section">
<h3>Source Code<a name="Source_Code"></a></h3>
<p>The source code for this example is included in the github repository:<br /><a class="externalLink" href="https://github.com/Pi4J/pi4j/tree/master/pi4j-example/src/main/java/ShutdownGpioExample.java">https://github.com/Pi4J/pi4j/tree/master/pi4j-example/src/main/java/ShutdownGpioExample.java</a></p>
<div class="source">
<pre>

/*
 * #%L
 * **********************************************************************
 * ORGANIZATION  :  Pi4J
 * PROJECT       :  Pi4J :: Java Examples
 * FILENAME      :  ShutdownGpioExample.java  
 * 
 * This file is part of the Pi4J project. More information about 
 * this project can be found here:  http://www.pi4j.com/
 * **********************************************************************
 * %%
 * Copyright (C) 2012 Pi4J
 * %%
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *      http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * #L%
 */



import com.pi4j.io.gpio.GpioController;
import com.pi4j.io.gpio.GpioFactory;
import com.pi4j.io.gpio.GpioPin;
import com.pi4j.io.gpio.PinPullResistance;
import com.pi4j.io.gpio.PinState;
import com.pi4j.io.gpio.RaspiPin;

/**
 * This example code demonstrates how to perform simple state
 * control of a GPIO pin on the Raspberry Pi.  
 * 
 * @author Robert Savage
 */
public class ShutdownGpioExample
{
    public static void main(String[] args) throws InterruptedException
    {
        System.out.println(&quot;&lt;--Pi4J--&gt; GPIO Shutdown Example ... started.&quot;);
        
        // create gpio controller
        final GpioController gpio = GpioFactory.getInstance();
        
        // provision gpio pin #01 as an output pin and turn on
        final GpioPin pin = gpio.provisionDigitalOutputPin(RaspiPin.GPIO_01, PinState.HIGH);
        
        // configure the pin shutdown behavior; these settings will be 
        // automatically applied to the pin when the application is terminated
        pin.setShutdownOptions(true, PinState.LOW, PinPullResistance.OFF);
        
        System.out.println(&quot;--&gt; GPIO state should be: ON&quot;);
        System.out.println(&quot;    This program will automatically terminate in 10 seconds,&quot;);
        System.out.println(&quot;    or you can use the CTRL-C keystroke to terminate at any time.&quot;);
        System.out.println(&quot;    When the program terminates, the GPIO state should be shutdown and set to: OFF&quot;);
        
        // wait 10 seconds
        Thread.sleep(10000);
    }
}
</pre></div></div>
<div class="section">
<h3>JavaDoc<a name="JavaDoc"></a></h3>
<p>The following JavaDoc links are the primary interfaces used to perform automated shutdown for the Pi's GPIO pins:</p>
<ul>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/GpioFactory.html">com.pi4j.io.gpio.GpioFactory</a></li>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/Gpio.html">com.pi4j.io.gpio.Gpio</a></li>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/GpioPin.html">com.pi4j.io.gpio.GpioPin</a></li>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/PinEdge.html">com.pi4j.io.gpio.PinEdge</a></li>
<li><a href="../apidocs/index.html?com/pi4j/io/gpio/PinState.html">com.pi4j.io.gpio.PinState</a></li></ul></div>
<div class="section">
<h3>Wiring Diagram<a name="Wiring_Diagram"></a></h3>
<p>The following circuit can be used in conjunction with this sample code.</p><img src="../images/gpio-control-example.png" alt="" />
<p><a href="../images/gpio-control-example-large.png">(click here for hi-resolution image)</a></p></div>
<div class="section">
<h3>Navigate<a name="Navigate"></a></h3>
<p>If you have not already downloaded and installed the Pi4J library on the RaspberryPi, then view this page for instructions on where to download and how to install Pi4J: <br /><a href="../install.html">Download &amp; Install Pi4J</a></p>
<p>First, locate the <i>ShutdownGpioExample.java</i> source file in the samples folder of the Pi4J installation on the RaspberryPi. <br />You can use the following command on the Pi's console or SSH terminal to navigate to this path: <br /><tt>cd /opt/pi4j/examples</tt></p></div>
<div class="section">
<h3>Compile<a name="Compile"></a></h3>
<p>Next, use the following command to compile this example program:</p>
<p><tt>javac -classpath .:classes:/opt/pi4j/lib/'*' -d . ShutdownGpioExample.java</tt></p></div>
<div class="section">
<h3>Execute<a name="Execute"></a></h3>
<p>The following command will run this example program:</p>
<p><tt>sudo java -classpath .:classes:/opt/pi4j/lib/'*' ShutdownGpioExample</tt></p></div>
<div class="section">
<h3>Output<a name="Output"></a></h3>
<p>You should see the attached LED perform as follows:</p><img src="../images/pinon.png" alt="" />
<p>Turn ON</p><img src="../images/pinoff.png" alt="" />
<p>Turn OFF after 10 seconds when the program automatically exists.<br />Turn OFF if the user terminates the program using CTRL-C prior to the 10 second timeout. </p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2012-2019
                        <a href="http://www.pi4j.com">Pi4J</a>.
            All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
